(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1162:function(e,t,r){},1163:function(e,t,r){},1164:function(e,t,r){},1165:function(e,t,r){},1166:function(e,t,r){},1167:function(e,t,r){},1168:function(e,t,r){},1169:function(e,t,r){},1170:function(e,t,r){},1171:function(e,t,r){},1231:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(858),o=r(3),i=r(7),c=r.n(i),l=r(2),s=(r(909),r(8)),u=r(4),f=r(269),m=r(145),b=r(5);var p=r(12),d=r.n(p),h=(r(910),r(142));function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(){v=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new C(n||[]);return a(i,"_invoke",{value:S(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function O(){}function w(){}var j={};s(j,i,(function(){return this}));var g=Object.getPrototypeOf,E=g&&g(g(A([])));E&&E!==r&&n.call(E,i)&&(j=E);var _=w.prototype=h.prototype=Object.create(j);function N(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==y(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=x(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function x(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(y(t)+" is not iterable")}return O.prototype=w,a(_,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:O,configurable:!0}),O.displayName=s(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===O||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,s(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},N(k.prototype),s(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new k(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(_),s(_,l,"Generator"),s(_,i,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function O(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){O(o,n,a,i,c,"next",e)}function c(e){O(o,n,a,i,c,"throw",e)}i(void 0)}))}}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t=Object(n.useContext)(b.d),r=e.isOpen,a=e.onRequestClose,i=e.node,p=e.isEvent,y=void 0===p||p,O=e.automationID,j=i.id,E=Object(f.a)(),N=E.setNodeDatabyId,k=E.fetchAutomation,S=E.setAutomationData,x=E.showSidebar,P=Object(m.a)(),L=P.getEventsList,C=P.getActionsList,A=P.getAutomationSteps,T=P.getAutomationLinks,I=P.getCount,D=P.getAutomationData,F=P.getNodeDataByID,M=y?L():C(),G=_(Object(n.useState)({loading:!1,status:!1}),2),z=G[0],q=G[1],B=M.group,Y=void 0===B?[]:B,R=M.list,U=void 0===R?{}:R,H=M.subgroup,V=void 0===H?[]:H,$=M.subgroup_priority,J=void 0===$?{}:$,W=_(Object(n.useState)(""),2),Q=W[0],X=W[1],Z=_(Object(n.useState)(""),2),K=Z[0],ee=Z[1],te=_(Object(n.useState)(""),2),re=te[0],ne=te[1],ae=_(Object(n.useState)(""),2),oe=ae[0],ie=ae[1],ce=_(Object(n.useState)(!1),2),le=ce[0],se=ce[1],ue=A(),fe=T(),me=I(),be=D("data"),pe=F(j),de=pe.data,he=void 0===de?{}:de,ye=pe.stepId,ve=void 0===ye?0:ye,Oe=Object.keys(J).sort((function(e,t){return J[e]-J[t]})),we=be.source,je=void 0===we?"":we,ge=be.event,Ee=void 0===ge?"":ge,_e=function(e){var t=[],r="";return Y.map((function(n){(Object(o.isArray)(n.subgroup)&&n.subgroup.includes(e)||Object(o.isObject)(n.subgroup)&&Object.values(n.subgroup).includes(e))&&(t=n.subgroup,r=n.group_slug)})),{acsubgp:t,acgrp:r}};Object(n.useEffect)((function(){if(Object(o.isEmpty)(Y)||(""!=je||""!=Ee)&&y){var e=_e(je),t=e.acsubgp,r=e.acgrp;ne(Object(o.isObject)(t)?Object.values(t):t),ee(r),ie(Ee)}else ee(Y[0].group_slug),ne(Object(o.isObject)(Y[0].subgroup)?Object.values(Y[0].subgroup):Y[0].subgroup)}),[r]),Object(n.useEffect)((function(){if(Object(o.isEmpty)(Q))if(Object(o.isEmpty)(Y)||(""!=je||""!=Ee)&&y){var e=_e(je),t=e.acsubgp,r=e.acgrp;ne(Object(o.isObject)(t)?Object.values(t):t),ee(r),ie(Ee)}else ee(Y[0].group_slug);else ee("")}),[Q]);var Ne,ke,Se=function(){a&&a()},xe=function(){var e=w(v().mark((function e(r,n,a,i){var c,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=!1,i.hasOwnProperty("event")&&U.hasOwnProperty(i.event)&&U[i.event].hasOwnProperty("need_unique_key")&&U[i.event].need_unique_key&&(c=!0),s={},s=""==Ee?{steps:Object(o.cloneDeep)(r).map((function(e){return e.hasOwnProperty("data")&&e.data.hasOwnProperty("sidebarValues")&&(e.data.sidebarValues={}),e})),links:n,count:a,data:i,need_unique_key:c}:{data:i,need_unique_key:c},e.prev=4,se(!0),t(Object(l.__)("Updating automation…","wp-marketing-automations-crm")),e.next=9,d()({path:Object(b.m)("/automation/".concat(O)),method:"POST",data:{data:s}}).then(function(){var e=w(v().mark((function e(r){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==r.code){e.next=7;break}return e.next=3,k(O).then((function(){S("openStartSidebar",!0)}));case 3:t(r.message),Object(b.fb)(t,1e3),e.next=8;break;case 7:throw Error(Object(b.j)(null==r?void 0:r.message));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),Object(b.fb)(t,1e3),se(!1),setTimeout((function(){q({status:!0,error:e.t0.message})}),[1500]);case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,r,n,a){return e.apply(this,arguments)}}(),Pe=function(){var e=w(v().mark((function e(r,n){var a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={steps:Object(o.cloneDeep)(ue).map((function(e){return e.hasOwnProperty("data")&&e.data.hasOwnProperty("sidebarValues")&&(e.data.sidebarValues={}),e})),links:fe,count:me,data:{action:{action:r,intergration:n}},updateStatus:2},e.prev=1,se(!0),t(Object(l.__)("Updating automation…","wp-marketing-automations-crm")),e.next=6,d()({path:Object(b.m)("/automation/".concat(O,"/step/").concat(ve)),method:"POST",data:a}).then((function(e){if(200!==e.code)throw Error(Object(b.j)(null==e?void 0:e.message));N(i.id,{selected:r},{step_status:2}),t(e.message)})).then((function(){var e=Object(o.cloneDeep)(i);e.data.selected=r,S("sidebarNodeData",e),x(!0),se(!1),Se(),Object(b.fb)(t,1e3)}));case 6:e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),Object(b.fb)(t,1e3),se(!1),setTimeout((function(){q({status:!0,error:e.t0.message})}),[1500]);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),Le=function(e){if("string"==typeof e&&""!==e)if("start"===j&&y)he.evtGroup=U[e].source_type,he.event=e,function(e){var t={};t=ue.map((function(t){return"start"==t.id&&(t.data=e),t}));var r=[];1==ue.length?(t.push({id:"end",type:"end",data:{label:"End Automation"},hidden:!1,position:{x:250,y:600}}),r=[{id:"endlink",source:"start",target:"end",sourceHandle:"",animated:!1}]):r=Object(o.cloneDeep)(fe);var n=Object(o.cloneDeep)(be);n.event=e.event,n.source=e.evtGroup,xe(t,r,2,n)}(he);else{var r=U[e].integration_slug;Pe(e,r)}else t(y?Object(l.__)("Please choose an event."):Object(l.__)("Please choose an action.")),Object(b.fb)(t,1e3)};return r?Object(n.createElement)(u.Modal,{onRequestClose:Se,className:"bwf-admin-modal bwf-event-search-modal bwf-admin-modal-xl",shouldCloseOnEsc:!0,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-modal-search-header"},Object(n.createElement)("div",{className:"bwf-modal-title"},y?Object(l.__)("Select an Event"):Object(l.__)("Select an Action")),Object(n.createElement)("div",{className:"bwf-modal-search-wrap"},Object(n.createElement)("div",{className:"bwf-component-search-control"},Object(n.createElement)(s.a,{icon:"search",size:15}),Object(n.createElement)(u.TextControl,{value:Q,onChange:X,placeholder:Object(l.__)("Search…..")}))),Object(n.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",onClick:Se},Object(n.createElement)(s.a,{icon:"close",size:16}))),Object(n.createElement)("div",{className:"bwf-event-modal-main"},Object(n.createElement)("div",{className:"bwf-event-modal-body"},Object(n.createElement)("div",{className:"bwf-modal-sidebar"},Object(n.createElement)("div",{className:"bwf-modal-filter-wrap"},Y.map((function(e,t){if(function(e){var t=!1;if(e.hasOwnProperty("subgroup")&&!Object(o.isEmpty)(e.subgroup)){var r=[];(Object(o.isObject)(e.subgroup)?Object.values(e.subgroup):e.subgroup).map((function(e){V.hasOwnProperty(e)&&r.push(e)})),Object(o.isEmpty)(r)||(t=!0)}return t}(e))return Object(n.createElement)("div",{key:t,className:c()("bwf-modal-filter",{active:K===e.group_slug}),onClick:function(){ie(""),ee(e.group_slug),ne(Object(o.isObject)(e.subgroup)?Object.values(e.subgroup):e.subgroup)}},e.label)})))),Object(n.createElement)("div",{className:"bwf-modal-content-content"},Object(n.createElement)("div",{className:"bwf-modal-content-brick"},Object(n.createElement)("div",{className:"modal-brick-wrap bwfan_pb20"},Object(n.createElement)("div",{className:"bwf-brick-content"},(Ne=[],ke={},Object(o.isEmpty)(Q)?re.map((function(e){ke=g(g({},ke),V[e])})):Object.values(V).map((function(e){ke=g(g({},ke),e)})),Ne.push(ke),Ne).map((function(e,t){if(Object(o.isEmpty)(e))return Object(n.createElement)(n.Fragment,{key:t});var r=[],a=Object.keys(e);return Object(o.isEmpty)(Oe)?r=a:Oe.map((function(e){a.includes(e)&&r.push(e)})),Object(n.createElement)("div",{key:t+"-2"},r.map((function(t,r){var a=[];return a=function(e){var t=[];return(Object(o.isObject)(e)?Object.values(e):e).map((function(e){if(U.hasOwnProperty(e)&&U[e].hasOwnProperty(y?"event_name":"action_name")){var r=y?U[e].event_name:U[e].action_name;(Object(o.isEmpty)(Q)||r.toLowerCase().includes(Q.toLowerCase()))&&t.push(e)}})),t}(e[t]),!Object(o.isEmpty)(a)&&Object(n.createElement)(n.Fragment,{key:r},Object(n.createElement)("div",{className:"bwf-brick-content-header",key:r},t),a.map((function(e,t){var r=!!U[e].hasOwnProperty("lock")&&U[e].lock;return Object(n.createElement)(u.Button,{key:t,isPrimary:oe===e,isSecondary:oe!==e,className:"bwf-secondary-alter "+(Object(b.mb)()?r?"locked":"":"not-pro"),onClick:function(){Object(b.mb)()||!r?ie(e):S("showProModal",!0)},disabled:Object(b.mb)()&&r},oe===e&&Object(n.createElement)("span",{className:"bwf-circle-tick"},Object(n.createElement)(s.a,{icon:"tick",size:10})),y?U[e].event_name:U[e].action_name,r&&!Object(b.mb)()&&Object(n.createElement)("span",{className:"bwf-display-flex bwf-ml-5"},Object(n.createElement)(s.a,{icon:"lock",size:15})))})))})))}))))),Object(n.createElement)("div",{className:"bwf-modal-inner-footer bwf_text_right"},Object(n.createElement)(u.Button,{className:"bwf-modal-cancel-btn",onClick:Se},Object(l.__)("Cancel")),Object(n.createElement)(u.Button,{isPrimary:!0,isBusy:le,onClick:function(){le||Le(oe)}},Object(l.__)("Done")))))),Object(n.createElement)(h.a,{modalTitle:y?"Event Selection":"Action Selection",errorMessage:z.error,onRequestClose:function(){return q({status:!1})},isOpen:z.status})):""};function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(){x=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new C(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(A([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==S(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(S(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function P(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){var t=Object(n.useContext)(b.d),r=e.isOpen,a=e.onRequestClose,i=e.node,p=e.automationID,h=i.id,y=Object(f.a)(),v=y.setNodeDatabyId,O=y.setAutomationData,w=y.showSidebar,j=Object(m.a)(),g=j.getGoals,E=j.getAutomationSteps,_=j.getAutomationLinks,N=j.getCount,k=j.getNodeDataByID,S=g(),C=S.group,A=void 0===C?[]:C,T=S.list,I=void 0===T?{}:T,D=S.subgroup,F=void 0===D?[]:D,M=S.subgroup_priority,G=void 0===M?{}:M,z=L(Object(n.useState)(""),2),q=z[0],B=z[1],Y=L(Object(n.useState)(""),2),R=Y[0],U=Y[1],H=L(Object(n.useState)(""),2),V=H[0],$=H[1],J=L(Object(n.useState)(""),2),W=J[0],Q=J[1],X=L(Object(n.useState)(!1),2),Z=X[0],K=X[1],ee=E(),te=_(),re=N(),ne=k(h),ae=ne.data,oe=void 0===ae?{}:ae,ie=ne.stepId,ce=void 0===ie?0:ie,le=G[R]?G[R]:{},se=oe.source,ue=void 0===se?"":se,fe=oe.benchmark,me=void 0===fe?"":fe,be=function(e){var t=[],r="";return A.map((function(n){n.subgroup.includes(e)&&(t=n.subgroup,r=n.group_slug)})),{acsubgp:t,acgrp:r}};Object(n.useEffect)((function(){if(Object(o.isEmpty)(A)||""!=ue||""!=me){var e=be(ue),t=e.acsubgp,r=e.acgrp;$(t),U(r),Q(me)}else U(A[0].group_slug),$(A[0].subgroup)}),[r]),Object(n.useEffect)((function(){if(Object(o.isEmpty)(q))if(Object(o.isEmpty)(A)||""!=ue||""!=me){var e=be(ue),t=e.acsubgp,r=e.acgrp;$(t),U(r),Q(me)}else U(A[0].group_slug);else U("")}),[q]);var pe,de=function(){a&&a()},he=function(){var e,r=(e=x().mark((function e(r,n){var a,c;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=oe,K(!0),a.benchmark=r,t("Adding benchmark.."),e.prev=4,c={steps:Object(o.cloneDeep)(ee).map((function(e){return e.hasOwnProperty("data")&&e.data.hasOwnProperty("sidebarValues")&&(e.data.sidebarValues={}),e})),links:te,count:re,data:{action:{benchmark:r,source:n}},updateStatus:2},e.next=8,d()({path:Object(b.m)("/automation/".concat(p,"/step/").concat(ce)),method:"POST",data:c}).then((function(e){200===e.code&&(t(e.message),v(parseInt(h),a,{step_status:2}))})).then((function(){var e=Object(o.cloneDeep)(i);e.data.benchmark=r,O("sidebarNodeData",e),w(!0),K(!1),de()}));case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0),K(!0);case 14:Object(b.fb)(t,1e3);case 15:case"end":return e.stop()}}),e,null,[[4,10]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){P(o,n,a,i,c,"next",e)}function c(e){P(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(e,t){return r.apply(this,arguments)}}();return r?Object(n.createElement)(u.Modal,{onRequestClose:de,className:"bwf-admin-modal bwf-event-search-modal bwf-admin-modal-xl",shouldCloseOnEsc:!0,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-modal-search-header"},Object(n.createElement)("div",{className:"bwf-modal-title"},Object(l.__)("Select an Goal")),Object(n.createElement)("div",{className:"bwf-modal-search-wrap"},Object(n.createElement)("div",{className:"bwf-component-search-control"},Object(n.createElement)(s.a,{icon:"search",size:15}),Object(n.createElement)(u.TextControl,{value:q,onChange:B,placeholder:Object(l.__)("Search…..")}))),Object(n.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",onClick:de},Object(n.createElement)(s.a,{icon:"close",size:16}))),Object(n.createElement)("div",{className:"bwf-event-modal-main"},Object(n.createElement)("div",{className:"bwf-event-modal-body"},Object(n.createElement)("div",{className:"bwf-modal-sidebar"},Object(n.createElement)("div",{className:"bwf-modal-filter-wrap"},A.map((function(e,t){if(function(e){var t=!1;if(e.hasOwnProperty("subgroup")&&!Object(o.isEmpty)(e.subgroup)){var r=[];e.subgroup.map((function(e){F.hasOwnProperty(e)&&r.push(e)})),Object(o.isEmpty)(r)||(t=!0)}return t}(e))return Object(n.createElement)("div",{key:t,className:c()("bwf-modal-filter",{active:R===e.group_slug}),onClick:function(){Q(""),U(e.group_slug),$(e.subgroup)}},e.label)})))),Object(n.createElement)("div",{className:"bwf-modal-content-content"},Object(n.createElement)("div",{className:"bwf-modal-content-brick"},Object(n.createElement)("div",{className:"modal-brick-wrap bwfan_pb20"},Object(n.createElement)("div",{className:"bwf-brick-content"},(pe=[],Object(o.isEmpty)(q)&&!Object(o.isEmpty)(V)?V.map((function(e){pe.push(F[e])})):Object.values(F).map((function(e){pe.push(e)})),pe).map((function(e,t){if(Object(o.isEmpty)(e))return Object(n.createElement)("div",{key:t});var r=[];return r=le&&Object.keys(le).length>0?Object.keys(e).sort((function(e,t){return le[e]||le[t]?le[e]&&!le[t]?1:!le[e]&&le[t]?-1:le[e]-le[t]:1})):Object.keys(e),Object(n.createElement)("div",{key:t},r.map((function(t,r){var a=function(e){var t=[];return e.map((function(e){if(I.hasOwnProperty(e)&&I[e].hasOwnProperty("event_name")){var r=I[e].event_name;(Object(o.isEmpty)(q)||r.toLowerCase().includes(q.toLowerCase()))&&t.push(e)}})),t}(e[t]);return!Object(o.isEmpty)(a)&&Object(n.createElement)("div",{key:r},Object(n.createElement)("div",{className:"bwf-brick-content-header"},t),a.map((function(e){return Object(n.createElement)(u.Button,{key:e,isPrimary:W===e,isSecondary:W!==e,className:"bwf-secondary-alter",onClick:function(){Q(e)}},W===e&&Object(n.createElement)("span",{className:"bwf-circle-tick"},Object(n.createElement)(s.a,{icon:"tick",size:10})),I[e].event_name)})))})))}))))),Object(n.createElement)("div",{className:"bwf-modal-inner-footer bwf_text_right"},Object(n.createElement)(u.Button,{className:"bwf-modal-cancel-btn",onClick:de},Object(l.__)("Cancel")),Object(n.createElement)(u.Button,{isPrimary:!0,isBusy:Z,onClick:function(){Z||function(e){if("string"==typeof e&&""!==e){var r=I[e].source_type;he(e,r)}else t(Object(l.__)("Please choose an benchmark.")),Object(b.fb)(t,1e3)}(W)}},Object(l.__)("Done"))))))):""},T=function(e){var t=e.onNodeClick,r=e.onNoteToggleClick,a=e.onElipsisToggleClick,o=e.onInfoToggleClick,i=e.onNodeStatClick,c=e.onNodeQueuedStatClick,l=Object(m.a)(),s=l.getEnableCopy,u=l.getEnableMove,f=s(),b=u(),p=Object(n.useCallback)((function(e,t){var r=!(!e.target||"string"!=typeof e.target.className)&&e.target.className;return!!r&&r.includes(t)||e.target.closest("."+t)}),[]);return function(e){if(!f&&!b)if(p(e,"bwf-note__toggle"))r&&r();else if(p(e,"bwf-ellipsis-menu__toggle"))a&&a();else if(p(e,"bwf-info__toggle"))o&&o();else if(p(e,"bwf-status-wrap"))i&&i();else if(p(e,"bwf-queued-status-wrap"))c&&c();else{var n=p(e,"bwf-ellipsis-menu"),l=p(e,"bwf-note-popup"),s=p(e,"bwf-info-popup");n||l||s||t&&t()}}},I=r(101),D=r(17),F=r(67);function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z=function(e){e.data;var t=e.selected,r=void 0!==t&&t,i=M(Object(n.useState)(!1),2),c=i[0],u=i[1],p=Object(m.a)(),d=p.getEventsList,h=p.getAutomationData,y=p.getOpenStartSidebar,v=p.getEnableMove,O=p.getEnableCopy,w=p.getStatLoading,j=p.getStatData,g=O(),E=v(),_=h(),N=y(),S=w(),x=j(),P=_.ID,L=_.event,C=void 0===L?"":L,A=x.hasOwnProperty("start")?x.start:{};Object(n.useEffect)((function(){N&&(z("sidebarNodeData",e),q(!0))}),[N]);var G=Object(f.a)(),z=G.setAutomationData,q=G.showSidebar,B=d(),Y=T({onNodeClick:!Object(o.isEmpty)(C)&&B.list.hasOwnProperty(C)&&function(){B.list[C].hasOwnProperty("fields")&&!Object(o.isEmpty)(B.list[C].fields)&&(z("sidebarNodeData",e),q(!0))},onNodeStatClick:function(){Object(b.mb)()?(z("showContactModalId",C),z("showContactModalType","completed")):z("showProModal",!0)},onNodeQueuedStatClick:function(){Object(b.mb)()?(z("showContactModalId",C),z("showContactModalType","active")):z("showProModal",!0)}});return Object(n.createElement)("div",{className:"bwf-node-wrapper"},Object(n.createElement)("div",{className:"bwf-inner-wrapper "+(r?"bwf-selected-node":"")+(Object(o.isEmpty)(C)?" bwf-empty-start-node":""),onClick:Y},Object(o.isEmpty)(C)?Object(n.createElement)("div",{className:"bwf-node-brick is-start-node",onClick:function(){return u(!0)}},Object(n.createElement)("div",{className:"bwf-node-icon"},Object(n.createElement)(s.a,{size:22,icon:"tap-icon"})),Object(n.createElement)("div",{className:"bwf-display-flex bwf-h4"},"Select Trigger")):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-brick is-start-node-selected"},Object(n.createElement)("div",{className:"bwf-node-icon icon-start"},Object(n.createElement)(s.a,{size:22,icon:"rocket"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},B.list.hasOwnProperty(C)&&B.list[C].hasOwnProperty("source_label")?B.list[C].source_label:""),Object(n.createElement)("div",{className:"bwf-node-content-label"},B.list.hasOwnProperty(C)&&B.list[C].hasOwnProperty("event_name")?B.list[C].event_name:"Event Not Found")),Object(n.createElement)("div",{className:"bwf-node-action"},!Object(o.isEmpty)(C)&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(F.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations-crm"),classes:"bwf-event-action",isDisable:!(!g&&!E),renderContent:function(e){var t=e.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){u(!0),t()}},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Change Event","wp-marketing-automations-crm")))))}})))),Object(n.createElement)("div",{className:"bwf-node-status bwf-node-m-0"},Object(n.createElement)("div",{className:"bwf-queued-status-wrap"},Object(n.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Active","wp-marketing-automations-crm")),Object(n.createElement)("span",{className:"bwf-node-status-count"},S?Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(n.createElement)(n.Fragment,null,A.hasOwnProperty("active")?Object(b.zb)(parseInt(A.active)):0))),Object(n.createElement)("div",{className:"bwf-status-wrap"},Object(n.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Completed","wp-marketing-automations-crm")),Object(n.createElement)("span",{className:"bwf-node-status-count"},S?Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(n.createElement)(n.Fragment,null,A.hasOwnProperty("completed")?Object(b.zb)(parseInt(A.completed)):0)))))),!Object(o.isEmpty)(C)&&Object(n.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1}),Object(n.createElement)(k,{isOpen:c,node:e,onRequestClose:function(){return u(!1)},automationID:P}))},q=r(49);r(1162);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(){Y=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==B(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(B(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function R(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var V=function(e){var t=e.node,r=t.id,a=void 0===r?"":r,i=t.data,p=Object(n.useContext)(b.d),h=U(Object(n.useState)(!1),2),y=h[0],v=h[1],O=U(Object(n.useState)(i.hasOwnProperty("note")?i.note:""),2),w=O[0],j=O[1],g=U(Object(n.useState)(!1),2),E=g[0],_=g[1],N=Object(f.a)().setNodeDatabyId,k=Object(m.a)(),S=k.getAutomationData,x=k.getNodeDataByID,P=k.getEnableMove,L=k.getEnableCopy,C=P(),A=L(),T=Object(o.isEmpty)(a)?{}:x(a),D=T.stepId,M=void 0===D?0:D,G=T.data,z=(void 0===G?{}:G).note,B=void 0===z?"":z,H=S().ID,V=function(){var e,t=(e=Y().mark((function e(t){return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,e.next=4,d()({path:Object(b.m)("/automation/".concat(H,"/step/").concat(M)),method:"POST",data:{data:{data:{note:t}}}}).then((function(e){200===e.code&&(p(e.message),i.note=t,N(a,i),_(!1))}));case 4:v(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),p(e.t0.message),v(!1);case 11:Object(b.fb)(p,1e3);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){R(o,n,a,i,c,"next",e)}function c(e){R(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return Object(n.createElement)("div",{className:"bwf-note-popup"},Object(n.createElement)(q.a,{contentClassName:"bwf-note__popover",position:"top right",renderToggle:function(e){var t=e.onToggle,r=e.isOpen,a=c()("bwf-note__toggle bwf-cursor-pointer",{"is-opened":r});return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:a,onClick:function(e){C||A||t(e)},"aria-expanded":r},!Object(o.isEmpty)(w)&&Object(n.createElement)("span",{className:"bwf-has-note"}),Object(n.createElement)(s.a,{size:16,icon:"note"})))},renderContent:function(e){var t,r=e.onToggle;return Object(n.createElement)("div",{className:"bwf-note-popover-container"},Object(n.createElement)("div",{className:"bwf-note-popover-header"},Object(n.createElement)("div",{className:"bwf-note-header-text"},Object(l.__)("Notes")),Object(n.createElement)("span",{className:"bwf-note-close",onClick:r},Object(n.createElement)(s.a,{icon:"close",size:"16"}))),Object(n.createElement)("div",{className:"bwf-note-popover-body"},Object(o.isEmpty)(w)||E?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(u.TextareaControl,{value:w,autoFocus:!0,onChange:function(e){_(!0),j(e)}}),Object(n.createElement)("div",{className:"bwf_text_right",onClick:function(){return V(w)}},Object(n.createElement)(u.Button,{isPrimary:!0,isBusy:y},Object(o.isEmpty)(B)?Object(l.__)("Add","wp-marketing-automations-crm"):Object(l.__)("Update","wp-marketing-automations-crm")))):Object(n.createElement)("div",{className:"bwf-note-wrapper"},Object(n.createElement)("div",{className:"bwf-note--content"},Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:(t=w,t.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,'<a href="$1" target="_blank" class="bwf-a-no-underline">$1</a>'))}})),Object(n.createElement)(F.a,{label:Object(l.__)("Event note action","wp-marketing-automations-crm"),renderContent:function(e){var t=e.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){_(!0)}},Object(l.__)("Edit","wp-marketing-automations-crm")),Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){t(),j(""),V("")}},Object(l.__)("Delete","wp-marketing-automations-crm")))}}))))},focusOnMount:!0}))},$=r(938);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(){W=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==J(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(J(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function Q(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var K=function(e){var t=e.readables;return Object(n.createElement)("div",{className:"bwf-step-brick"},t.map((function(e,t){var r=e.map((function(e,t){return Object(o.isEmpty)(e)?Object(n.createElement)(n.Fragment,null):Object(n.createElement)("div",{key:t},0!==t&&Object(n.createElement)("div",{className:"bwf-step-divider"},Object(n.createElement)("span",{className:"bwf-divider"},"AND")),Object(n.createElement)("div",{className:"bwf-step-content-content bwf-two-line-ellipse-text"},e))}));return 0!==t?Object(o.isEmpty)(r)?Object(n.createElement)(n.Fragment,null):Object(n.createElement)("div",{key:t+"-or"},Object(n.createElement)("div",{className:"bwf-step-divider divider-line bwf-or"},Object(n.createElement)("span",{className:"bwf-divider"},"OR")),r):r})))},ee=function(e){var t=e.data,r=void 0===t?{}:t,i=e.selected,c=void 0!==i&&i,u=e.id,p=X(Object(n.useState)({status:!1,loading:!0}),2),d=p[0],y=p[1],v=Object(f.a)(),O=v.deleteNode,w=v.setAutomationData,j=v.showSidebar,g=v.setNodeForAdd,E=v.copyNodeHere,_=v.setOpenStepModal,N=v.setModalAnchorNode,k=Object(m.a)(),S=k.getAutomationId,x=k.getAutomationData,P=k.getEnableCopy,L=k.getEnableMove,C=k.getNodeDataByID,A=k.getLastAddedNode,M=k.getStatLoading,G=k.getStatData,z=A(),q=x().event,B=S(),Y=M(),R=G();Object(n.useEffect)((function(){z==u&&(w("sidebarNodeData",e),j(!0),w("lastAddedNode",0))}),[z]);var U,H,J=P(),Z=L(),ee=C(e.id),te=ee.hasMultiParents,re=void 0!==te&&te,ne=ee.stepId,ae=ee.step_status,oe=void 0===ae?1:ae,ie=R.hasOwnProperty(ne)?R[ne]:{},ce=!Object(o.isEmpty)(q)&&Object(b.mb)()?Object($.a)(q,parseInt(B)):{},le=ce.isLoading,se=ce.error,ue=ce.getReadableTexts,fe=ce.rules,me=Object(b.mb)()?(U=r.sidebarValues,H=[],Object(o.isEmpty)(U)?[]:(Object.keys(U).map((function(e){var t=U[e],r=[];!Object(o.isEmpty)(t)&&Object(o.isArray)(t)&&(t.map((function(e){fe.hasOwnProperty(e.filter)&&r.push(e)})),Object(o.isEmpty)(r)||H.push(r))})),H)):[],be=!Object(b.mb)()||le||se||Object(o.isEmpty)(q)?[]:ue(me),pe=Object(b.mb)()?T({onNodeClick:function(){w("sidebarNodeData",e),j(!0)},onNodeStatClick:function(){Object(b.mb)()?(w("showContactModalId",ne),w("showContactModalType","completed")):w("showProModal",!0)}}):{};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper","data-stepid":ne},Object(n.createElement)(a.d,{type:"target",position:"top",isConnectable:!1}),Object(b.mb)()?Object(n.createElement)("div",{className:"bwf-inner-wrapper "+(c?"bwf-selected-node":"")+(2===parseInt(oe)?" bwf-draft-node":""),onClick:pe},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon"},Object(n.createElement)(s.a,{size:26,icon:"condition"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},"Step "+u),Object(n.createElement)("div",{className:"bwf-node-content-label"},"Condition")),Object(n.createElement)("div",{className:"bwf-node-action"},Object(n.createElement)(V,{node:e}),Object(n.createElement)(F.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations-crm"),classes:"bwf-event-action",isDisable:!(!J&&!Z),renderContent:function(t){var r=t.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){w("enableCopy",!0),w("copyData",{type:"conditional",data:e.data,id:e.id}),r()}},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Copy","wp-marketing-automations-crm")))),Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){w("enableMove",!0),w("moveID",e.id),w("copyData",{type:"conditional",data:e.data,id:e.id}),r()}},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Move","wp-marketing-automations-crm")))),Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){var t,n;y({status:!0,onConfirm:(t=W().mark((function t(){return W().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e).then((function(){return y({status:!1})}));case 2:case"end":return t.stop()}}),t)})),n=function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){Q(o,n,a,i,c,"next",e)}function c(e){Q(o,n,a,i,c,"throw",e)}i(void 0)}))},function(){return n.apply(this,arguments)})}),r()}},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Delete","wp-marketing-automations-crm")))))}}))),Array.isArray(be)&&be.length?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-step-content"},Object(n.createElement)("div",{className:"bwf-step-content"},Object(n.createElement)(K,{readables:be}))),Object(n.createElement)("div",{className:"bwf-node-status"},Object(n.createElement)("div",{className:"bwf-status-wrap"},Object(n.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Completed","wp-marketing-automations-crm")),Object(n.createElement)("span",{className:"bwf-node-status-count"},Y?Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(n.createElement)(n.Fragment,null,ie.hasOwnProperty("completed")?Object(b.zb)(parseInt(ie.completed)):0))))):Object(n.createElement)(n.Fragment,null,le?Object(n.createElement)("div",{className:"bwf-node-step-content"},Object(n.createElement)("div",{className:"bwf-step-brick"},Object(n.createElement)("div",{className:"bwf-step-content-content"},Object(n.createElement)("div",{className:"bwf-step-brick"},Object(n.createElement)("div",{className:"bwf-step-content-content"},Object(l.__)("Loading","wp-marketing-automations")))))):Object(n.createElement)("div",{className:"bwf-control-event-error"},Object(n.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer"},Object(l.__)("Not Configured","wp-marketing-automations-crm"))))):Object(n.createElement)("div",{className:"bwf-inner-wrapper "+(c?"bwf-selected-node":"")+(2===parseInt(oe)?" bwf-draft-node":""),onClick:function(){return w("showProModal",!0)}},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon"},Object(n.createElement)(s.a,{size:26,icon:"condition"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},"Step "+ne),Object(n.createElement)("div",{className:"bwf-node-content-label"},"Condition")),Object(n.createElement)("div",{className:"bwf-node-action"})),Object(n.createElement)("div",{className:"bwf-control-event-error"},Object(n.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer bwf-display-flex"},Object(n.createElement)("span",{className:"bwf-mr-5"},Object(n.createElement)(s.a,{icon:"lock",size:15,color:"#D72D1D"})),Object(l.__)("Pro Feature","wp-marketing-automations-crm")))),re&&Object(n.createElement)("div",{className:"bwf-node-plus-paste-wrap bwf-pos-top"},J||Z?Object(n.createElement)("div",{className:"bwf-drag-area",onClick:function(){return E(e,"before","")}},Object(n.createElement)("div",{className:"bwf-drag-node is-copy-paste"},Object(n.createElement)("div",{className:"bwf-node-add"})),Object(n.createElement)("div",{className:"bwf-paste-label"},"Paste Here")):Object(n.createElement)("div",{className:"bwf-node-add",onClick:function(t){g(e.id,{option:"",position:"before"}),_(!0),N(t.target)}}))),Object(n.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1}),Object(n.createElement)(h.a,{modalTitle:Object(l.__)("Delete Conditional Step"),deleteEntityName:Object(l.__)("conditional step"),confirmButtonText:Object(l.__)("Delete","wp-marketing-automations-crm"),onConfirm:d.onConfirm,isLoading:!1,onRequestClose:function(){return y({status:!1})},isOpen:d.status,isDelete:!0}))};r(1163);function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ne=function(e){var t=e.header,r=void 0===t?Object(l.__)("View Analytics","wp-marketing-automations"):t,a=e.icon,i=void 0===a?"analytic":a,u=e.automationId,f=e.analyticsId,m=e.mode,p=void 0===m?"":m,h=te(Object(n.useState)(!0),2),y=h[0],v=h[1],O=te(Object(n.useState)(!1),2),w=O[0],j=O[1],g=te(Object(n.useState)({}),2),E=g[0],_=g[1],N=function(){parseInt(f)>0&&Object(b.mb)()?(v(!0),_({}),function(){try{d()({path:Object(b.m)("/automation/".concat(u,"/analytics/").concat(f,"?mode=").concat(p)),method:"GET"}).then((function(e){200===e.code?Object(o.isEmpty)(e.result)||_(e.result):j(!0),v(!1)}))}catch(e){j(!0),v(!1)}}()):v(!1)},k=function(){var e,t=E.tile,r=void 0===t?[]:t;return w?Object(n.createElement)(n.Fragment,null,Object(l.__)("Error while fetching the Analytics.","wp-marketing-automations")):Object(b.mb)()?Object(n.createElement)("div",{className:"bwf-info-brick"},Object(o.isEmpty)(r)?Object(n.createElement)(n.Fragment,null,Object(l.__)("No analytics found.","wp-marketing-automations")):r.map((function(e,t){return Object(n.createElement)("div",{className:"bwf-info-item",key:t},Object(n.createElement)("span",{className:"bwf-node-content-type"},e.label),Object(n.createElement)("span",{className:"bwf-node-content-label"},e.value))}))):(e=[{label:Object(l.__)("Sent","wp-marketing-automations")},{label:Object(l.__)("Open Rate","wp-marketing-automations")}],"email"===p&&e.push({label:Object(l.__)("Click Rate","wp-marketing-automations")},{label:Object(l.__)("Click to Open Rate","wp-marketing-automations")}),e.push({label:Object(l.__)("Revenue","wp-marketing-automations")},{label:Object(l.__)("Revenue/ Person","wp-marketing-automations")},{label:Object(l.__)("Unsubscribe Rate","wp-marketing-automations")}),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-info-brick bwf-lite-restrict-section"},e.map((function(e,t){return Object(n.createElement)("div",{className:"bwf-info-item",key:t},Object(n.createElement)("span",{className:"bwf-node-content-type"},e.label),Object(n.createElement)("div",{className:"bwf-placeholder-temp no-animation bwf-w-60 bwf-h-15"}))}))),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-single-automation-notice is-info no-icon"},Object(n.createElement)("b",null,Object(l.__)("Email Analytics is a PRO feature.","wp-marketing-automations"))," ",Object(n.createElement)("a",{target:"__blank",className:"bwf-a-no-underline",href:"https://funnelkit.com/autonami-lite-upgrade/?utm_source=WordPress&utm_medium=Get+PRO+Email+Analytics&utm_campaign=Lite+Plugin"},Object(l.__)("Upgrade to PRO Now","wp-marketing-automations")))))};return Object(n.createElement)("div",{className:"bwf-info-popup"},Object(n.createElement)(q.a,{contentClassName:"bwf-info__popover",position:"top center",renderToggle:function(e){var t=e.onToggle,a=e.isOpen,o=c()("bwf-info__toggle bwf-cursor-pointer",{"is-opened":a});return Object(n.createElement)("div",{className:o,onClick:function(){t(),N()},"aria-expanded":a},Object(n.createElement)(s.a,{size:14,icon:i}),r)},renderContent:function(e){var t=e.onToggle;return Object(n.createElement)("div",{className:"bwf-info-popover-container"},Object(n.createElement)("div",{className:"bwf-info-popover-header"},Object(n.createElement)("div",{className:"bwf-info-header-text"},r),Object(n.createElement)("span",{className:"bwf-info-close",onClick:t},Object(n.createElement)(s.a,{icon:"close",size:"16"}))),Object(n.createElement)("div",{className:"bwf-info-popover-body"},Object(n.createElement)("div",{className:"bwf-info-wrapper"},Object(n.createElement)("div",{className:"bwf-info--content"},y?Object(n.createElement)("div",{className:"bwf-info-brick"},[1,2,3,4,5,6].map((function(e){return Object(n.createElement)("div",{className:"bwf-info-item",key:e},Object(n.createElement)("span",{className:"bwf-node-content-type"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})),Object(n.createElement)("span",{className:"bwf-node-content-label"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-15"})))}))):k()))))},focusOnMount:!0}))},ae=r(103);function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(){ie=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==oe(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(oe(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function ce(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function le(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){ce(o,n,a,i,c,"next",e)}function c(e){ce(o,n,a,i,c,"throw",e)}i(void 0)}))}}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fe=function(e){var t=e.data,r=void 0===t?{}:t,i=e.selected,c=void 0!==i&&i,u=e.id,p=se(Object(n.useState)(!1),2),d=p[0],y=p[1],v=se(Object(n.useState)({status:!1,loading:!0}),2),O=v[0],w=v[1],j=Object(f.a)(),g=j.deleteNode,E=j.setAutomationData,_=j.showSidebar,N=j.setNodeForAdd,S=j.copyNodeHere,x=j.setOpenStepModal,P=j.setModalAnchorNode,L=Object(m.a)(),C=L.getActionsList,A=L.getAutomationData,M=L.getNodeDataByID,G=L.getEnableCopy,z=L.getEnableMove,q=L.getLastAddedNode,B=L.getStatLoading,Y=L.getStatData,R=q(),U=C(),H=A(),$=B(),J=Y(),W=H.ID,Q=G(),X=z(),Z=M(e.id),K=Z.hasMultiParents,ee=void 0!==K&&K,te=Z.stepId,re=Z.step_status,oe=void 0===re?1:re,ce=J.hasOwnProperty(te)?J[te]:{},ue=r.sidebarValues,fe=void 0===ue?{}:ue,me=r.desc_text,be=void 0===me?"":me;Object(n.useEffect)((function(){R==u&&(y(!0),E("lastAddedNode",0))}),[R]);var pe,de,he,ye=T({onNodeClick:!!r.selected&&function(){U.list.hasOwnProperty(r.selected)&&U.list[r.selected].hasOwnProperty("fields")&&!Object(o.isEmpty)(U.list[r.selected].fields)&&(E("sidebarNodeData",e),_(!0))},onNodeStatClick:function(){Object(b.mb)()?(E("showContactModalId",te),E("showContactModalType","completed")):E("showProModal",!0)},onInfoToggleClick:function(){return E("analyticNodeId",te)}});return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper","data-stepid":te},Object(n.createElement)(a.d,{type:"target",position:"top",isConnectable:!1}),Object(n.createElement)("div",{className:"bwf-inner-wrapper "+(c?"bwf-selected-node":"")+(2===parseInt(oe)?" bwf-draft-node":""),onClick:ye},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon icon-action"},Object(n.createElement)(s.a,{size:22,icon:"charge"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},"Step "+u),Object(n.createElement)("div",{className:"bwf-node-content-label"},"Action")),Object(n.createElement)("div",{className:"bwf-node-action"},r.hasOwnProperty("selected")&&!Object(o.isEmpty)(r.selected)&&Object(n.createElement)(V,{node:e}),Object(n.createElement)(F.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations-crm"),classes:"bwf-event-action",isDisable:!(!Q&&!X),renderContent:function(t){var a=t.onToggle;return Object(n.createElement)(n.Fragment,null,r.hasOwnProperty("selected")&&!Object(o.isEmpty)(r.selected)&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){E("enableCopy",!0),E("copyData",{type:"action",data:e.data}),a()}},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Copy","wp-marketing-automations-crm")))),Object(n.createElement)(I.a,{isClickable:!0,onInvoke:le(ie().mark((function t(){return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E("enableMove",!0),E("moveID",e.id),E("copyData",{type:"action",data:e.data}),a();case 4:case"end":return t.stop()}}),t)})))},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Move","wp-marketing-automations-crm"))))),Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){var t;w({status:!0,onConfirm:(t=le(ie().mark((function t(){return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e).then((function(){return w({status:!1})}));case 2:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}),a()}},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Delete","wp-marketing-automations-crm")))))}}))),r.hasOwnProperty("selected")&&!Object(o.isEmpty)(r.selected)?Object(n.createElement)("div",{className:"bwf-node-step-content"},Object(n.createElement)("div",{className:"bwf-step-content"},Object(n.createElement)("div",{className:"bwf-step-brick"},Object(n.createElement)("div",{className:"bwf-step-content-content"},!Object(o.isEmpty)(r)&&r.hasOwnProperty("selected")&&(he=Object(n.createElement)(n.Fragment,null),"wp_sendemail"===r.selected?(pe=fe.bwfan_email_data,de=void 0===pe?{}:pe,he=Object(n.createElement)(n.Fragment,null,!Object(o.isEmpty)(de)&&de.hasOwnProperty("subject")&&""!==de.subject&&Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf-mt-3 bwf-cursor-pointer bwf-info__toggle "},Object(n.createElement)(ne,{automationId:W,analyticsId:te,mode:"email"})))):"twilio_send_sms"!==r.selected&&"bulkgate_send_transactional_sms"!==r.selected&&"linkmobility_send_sms"!==r.selected||(he=Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf-mt-3 bwf-cursor-pointer bwf-info__toggle"},Object(n.createElement)(ne,{automationId:W,analyticsId:te,mode:"sms"}))),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-content-type"},U.list.hasOwnProperty(r.selected)&&U.list[r.selected].hasOwnProperty("integration_nicename")?U.list[r.selected].integration_nicename:""),Object(n.createElement)("div",{className:"bwf-node-content-label"},U.list.hasOwnProperty(r.selected)?U.list[r.selected].action_name:"Action Not Found"),!Object(o.isEmpty)(be)&&Object(n.createElement)("div",{className:"bwf-node-content-label bwf-node-desc"+(Object(o.isArray)(be)?"":" bwf-two-line-ellipse-text")},function(e){if(Object(o.isEmpty)(e))return Object(n.createElement)(n.Fragment,null);if(Object(o.isArray)(e)){var t="",r=[];return e.map((function(e){Object(o.isEmpty)(t)&&(t=e),r.push(Object(n.createElement)("span",{key:e},e))})),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-table-v-center"},Object(n.createElement)("span",null,!Object(o.isEmpty)(t)&&t),!Object(o.isEmpty)(r)&&r.length>1&&Object(n.createElement)("div",{className:"bwf-display-inline",onClick:function(e){e.preventDefault(),e.stopPropagation()}},Object(n.createElement)(ae.a,{items:r}))))}return e}(be)),he,U.list.hasOwnProperty(r.selected)&&U.list[r.selected].hasOwnProperty("analytics_mode")&&""!==U.list[r.selected].analytics_mode?Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf-mt-3 bwf-cursor-pointer bwf-info__toggle"},Object(n.createElement)(ne,{automationId:W,analyticsId:te,mode:U.list[r.selected].analytics_mode})):null)))))):Object(n.createElement)("div",{className:"bwf-control-event-error"},Object(n.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer",onClick:function(){return y(!0)}},Object(l.__)("Not Configured","wp-marketing-automations-crm"))),r.hasOwnProperty("selected")&&!Object(o.isEmpty)(r.selected)&&Object(n.createElement)("div",{className:"bwf-node-status"},Object(n.createElement)("div",{className:"bwf-status-wrap"},Object(n.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Completed","wp-marketing-automations-crm")),Object(n.createElement)("span",{className:"bwf-node-status-count"},$?Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(n.createElement)(n.Fragment,null,ce.hasOwnProperty("completed")?Object(b.zb)(parseInt(ce.completed)):0))))),ee&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-plus-paste-wrap bwf-pos-top"},Q||X?Object(n.createElement)("div",{className:"bwf-drag-area",onClick:function(){return S(e,"before","")}},Object(n.createElement)("div",{className:"bwf-drag-node is-copy-paste"},Object(n.createElement)("div",{className:"bwf-node-add"})),Object(n.createElement)("div",{className:"bwf-paste-label"},"Paste Here")):Object(n.createElement)("div",{className:"bwf-node-add",onClick:function(t){N(e.id,{option:"",position:"before"}),x(!0),P(t.target)}})))),Object(n.createElement)(a.d,{type:"source",isConnectable:!1,position:"bottom"}),Object(n.createElement)(k,{isOpen:d,onRequestClose:function(){return y(!1)},node:e,isEvent:!1,automationID:W}),Object(n.createElement)(h.a,{modalTitle:Object(l.__)("Delete Action Step"),deleteEntityName:Object(l.__)("action step"),confirmButtonText:Object(l.__)("Delete","wp-marketing-automations-crm"),onConfirm:O.onConfirm,isLoading:!1,onRequestClose:function(){return w({status:!1})},isOpen:O.status,isDelete:!0}))},me=function(e){var t=Object(m.a)(),r=t.getEnableCopy,o=t.getEnableMove,i=t.getNodeDataByID,c=r(),l=o(),s=Object(f.a)(),u=s.copyNodeHere,b=s.setNodeForAdd,p=s.setOpenStepModal,d=s.setModalAnchorNode,h=i(e.id).hasMultiParents,y=void 0!==h&&h;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper"},y?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-plus-paste-wrap bwf-pos-top"},c||l?Object(n.createElement)("div",{className:"bwf-drag-area",onClick:function(){return u(e,"before","")}},Object(n.createElement)("div",{className:"bwf-drag-node is-copy-paste"},Object(n.createElement)("div",{className:"bwf-node-add"})),Object(n.createElement)("div",{className:"bwf-paste-label"},"Paste Here")):Object(n.createElement)("div",{className:"bwf-node-add",onClick:function(t){b(e.id,{option:"",position:"before"}),p(!0),d(t.target)}})),Object(n.createElement)(a.d,{type:"source",position:"top",isConnectable:!1})):Object(n.createElement)(a.d,{type:"source",position:"top",isConnectable:!1}),Object(n.createElement)("div",{className:"bwf-node-content bwf-end"},Object(n.createElement)("div",{className:"bwf-node-content-item"},"End Automation"))))};function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(){pe=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==be(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(be(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function de(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ve=function(e){var t=e.data,r=void 0===t?{}:t,i=e.selected,c=void 0!==i&&i,u=e.id,p=he(Object(n.useState)(!1),2),d=p[0],y=p[1],v=he(Object(n.useState)({status:!1,loading:!0}),2),O=v[0],w=v[1],j=Object(f.a)(),g=j.deleteNode,E=j.setAutomationData,_=j.showSidebar,N=j.setNodeForAdd,k=j.copyNodeHere,S=j.setOpenStepModal,x=j.setModalAnchorNode,P=Object(m.a)(),L=P.getGoals,C=P.getNodeDataByID,M=P.getEnableCopy,G=P.getEnableMove,z=P.getLastAddedNode,q=P.getAutomationData,B=P.getStatLoading,Y=P.getStatData,R=L().list,U=z(),H=M(),$=G(),J=B(),W=Y();Object(n.useEffect)((function(){U==u&&(y(!0),E("lastAddedNode",0))}),[U]);var Q=q(),X=C(e.id),Z=X.hasMultiParents,K=void 0!==Z&&Z,ee=X.stepId,te=X.step_status,re=void 0===te?1:te,ne=Q.ID,oe=W.hasOwnProperty(ee)?W[ee]:{},ie=r.desc_text,ce=void 0===ie?"":ie,le=T({onNodeClick:!!r&&!!r.benchmark&&function(){E("sidebarNodeData",e),_(!0)},onNodeStatClick:function(){Object(b.mb)()?(E("showContactModalId",ee),E("showContactModalType","completed")):E("showProModal",!0)},onNodeQueuedStatClick:function(){Object(b.mb)()?(E("showContactModalId",ee),E("showContactModalType","queued")):E("showProModal",!0)}});return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper","data-stepid":ee},Object(n.createElement)(a.d,{type:"target",position:"top",isConnectable:!1}),Object(b.mb)()?Object(n.createElement)("div",{className:"bwf-inner-wrapper "+(c?"bwf-selected-node":"")+(2===parseInt(re)?" bwf-draft-node":""),onClick:le},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon icon-goal"},Object(n.createElement)(s.a,{size:26,icon:"goal"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},"Step "+u),Object(n.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Goal","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-node-action"},r.hasOwnProperty("benchmark")&&!Object(o.isEmpty)(r.benchmark)&&Object(n.createElement)(V,{node:e}),Object(n.createElement)(F.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations-crm"),classes:"bwf-event-action",isDisable:!(!H&&!$),renderContent:function(t){var a=t.onToggle;return Object(n.createElement)(n.Fragment,null,r.hasOwnProperty("benchmark")&&!Object(o.isEmpty)(r.benchmark)&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){E("enableCopy",!0),E("copyData",{type:"benchmark",data:e.data}),a()}},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Copy","wp-marketing-automations-crm")))),Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){E("enableMove",!0),E("moveID",e.id),E("copyData",{type:"benchmark",data:e.data}),a()}},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Move","wp-marketing-automations-crm"))))),Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){var t,r;w({status:!0,onConfirm:(t=pe().mark((function t(){return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e).then((function(){return w({status:!1})}));case 2:case"end":return t.stop()}}),t)})),r=function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){de(o,n,a,i,c,"next",e)}function c(e){de(o,n,a,i,c,"throw",e)}i(void 0)}))},function(){return r.apply(this,arguments)})}),a()}},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Delete","wp-marketing-automations-crm")))))}}))),!r.hasOwnProperty("benchmark")||Object(o.isEmpty)(r.benchmark)?Object(n.createElement)("div",{className:"bwf-control-event-error"},Object(n.createElement)("div",{className:"bwf-control-error-msg",onClick:function(){return y(!0)}},"Not Configured")):Object(n.createElement)("div",{className:"bwf-node-step-content"},Object(n.createElement)("div",{className:"bwf-step-content"},Object(n.createElement)("div",{className:"bwf-step-brick"},Object(n.createElement)("div",{className:"bwf-step-content-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},R.hasOwnProperty(r.benchmark)&&R[r.benchmark].hasOwnProperty("source_label")?R[r.benchmark].source_label:""),Object(n.createElement)("div",{className:"bwf-node-content-label"},R.hasOwnProperty(r.benchmark)?R[r.benchmark].event_name:"Goal Not Found"),!Object(o.isEmpty)(ce)&&Object(n.createElement)("div",{className:"bwf-node-content-label bwf-node-desc"+(Object(o.isArray)(ce)?"":" bwf-two-line-ellipse-text")},function(e){if(Object(o.isEmpty)(e))return Object(n.createElement)(n.Fragment,null);if(Object(o.isArray)(e)){var t="",r=[];return e.map((function(e){Object(o.isEmpty)(t)&&(t=e),r.push(Object(n.createElement)("span",{key:e},e))})),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-table-v-center"},Object(n.createElement)("span",null,!Object(o.isEmpty)(t)&&t),!Object(o.isEmpty)(r)&&r.length>1&&Object(n.createElement)("div",{className:"bwf-display-inline",onClick:function(e){e.preventDefault(),e.stopPropagation()}},Object(n.createElement)(ae.a,{items:r}))))}return e}(ce)))))),r.hasOwnProperty("benchmark")&&!Object(o.isEmpty)(r.benchmark)&&Object(n.createElement)("div",{className:"bwf-node-status"},Object(n.createElement)("div",{className:"bwf-queued-status-wrap"},Object(n.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Queued","wp-marketing-automations-crm")),Object(n.createElement)("span",{className:"bwf-node-status-count"},J?Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(n.createElement)(n.Fragment,null,oe.hasOwnProperty("queued")?Object(b.zb)(parseInt(oe.queued)):0))),Object(n.createElement)("div",{className:"bwf-status-wrap"},Object(n.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Completed","wp-marketing-automations-crm")),Object(n.createElement)("span",{className:"bwf-node-status-count"},J?Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(n.createElement)(n.Fragment,null,oe.hasOwnProperty("completed")?Object(b.zb)(parseInt(oe.completed)):0))))):Object(n.createElement)("div",{className:"bwf-inner-wrapper "+(c?"bwf-selected-node":"")+(2===parseInt(re)?" bwf-draft-node":""),onClick:function(){return E("showProModal",!0)}},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon icon-goal"},Object(n.createElement)(s.a,{size:26,icon:"goal"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},"Step "+u),Object(n.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Goal","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-node-action"})),Object(n.createElement)("div",{className:"bwf-control-event-error"},Object(n.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer bwf-display-flex"},Object(n.createElement)("span",{className:"bwf-mr-5"},Object(n.createElement)(s.a,{icon:"lock",size:15,color:"#D72D1D"})),Object(l.__)("Pro Feature","wp-marketing-automations-crm")))),K&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-plus-paste-wrap bwf-pos-top"},H||$?Object(n.createElement)("div",{className:"bwf-drag-area",onClick:function(){return k(e,"before","")}},Object(n.createElement)("div",{className:"bwf-drag-node is-copy-paste"},Object(n.createElement)("div",{className:"bwf-node-add"})),Object(n.createElement)("div",{className:"bwf-paste-label"},"Paste Here")):Object(n.createElement)("div",{className:"bwf-node-add",onClick:function(t){N(e.id,{option:"",position:"before"}),S(!0),x(t.target)}})))),Object(n.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1}),Object(n.createElement)(A,{isOpen:d,onRequestClose:function(){return y(!1)},node:e,automationID:ne}),Object(n.createElement)(h.a,{modalTitle:Object(l.__)("Delete Goal Step"),deleteEntityName:Object(l.__)("goal step"),confirmButtonText:Object(l.__)("Delete","wp-marketing-automations-crm"),onConfirm:O.onConfirm,isLoading:!1,onRequestClose:function(){return w({status:!1})},isOpen:O.status,isDelete:!0,deleteDescriptionText:"Once you delete this step, all the queued contacts will move to next step right away."}))},Oe=r(85),we=r(9),je=r.n(we);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(){Ee=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==ge(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(ge(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function _e(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Se={1:Object(l.__)("Delay for a specific period","wp-marketing-automations-crm"),2:Object(l.__)("Delay until a specific date and time","wp-marketing-automations-crm"),3:Object(l.__)("Delay until a custom field date","wp-marketing-automations-crm"),4:Object(l.__)("Delay with variable","wp-marketing-automations-crm")},xe={1:"Sun",2:"Mon",3:"Tue",4:"Wed",5:"Thu",6:"Fri",7:"Sat"},Pe=function(e){var t=e.data,r=e.selected,i=void 0!==r&&r,c=e.id,u=Ne(Object(n.useState)({status:!1,loading:!0}),2),p=u[0],d=u[1],y=Object(f.a)(),v=y.deleteNode,O=y.setAutomationData,w=y.showSidebar,j=y.setNodeForAdd,g=y.copyNodeHere,E=y.setOpenStepModal,_=y.setModalAnchorNode,N=Object(m.a)(),k=N.getNodeDataByID,S=N.getEnableCopy,x=N.getEnableMove,P=N.getLastAddedNode,L=N.getStatLoading,C=N.getStatData,A=P(),M=!Object(o.isEmpty)(t)&&t.hasOwnProperty("sidebarValues")?t.sidebarValues:{},G=M.type,z=void 0===G?0:G,q=M.data,B=void 0===q?{}:q,Y=L(),R=C();Object(n.useEffect)((function(){A==c&&(O("sidebarNodeData",e),w(!0),O("lastAddedNode",0))}),[A]);var U=function(){switch(parseInt(z)){case 1:var e=B.day_delay,t=void 0===e?{}:e,r=B.enable_time_delay,a=void 0!==r&&r,i=B.enable_week_delay,c=void 0!==i&&i,l=B.time_delay,s=void 0===l?{time:""}:l,u=B.week_delay,f=void 0===u?[]:u;if(!Object(o.isEmpty)(t)){var m=t.text+" "+function(e,t){switch(e){case"min":return parseInt(t)>1?"Minutes":"Minute";case"hours":return parseInt(t)>1?"Hours":"Hour";case"days":return parseInt(t)>1?"Days":"Day";case"weeks":return parseInt(t)>1?"Weeks":"Week";case"months":return parseInt(t)>1?"Months":"Month";default:return""}}(t.unit,t.text),b=[];return c&&!Object(o.isEmpty)(f)&&f.map((function(e){xe.hasOwnProperty(e)&&b.push(xe[e])})),a&&s.hasOwnProperty("time")&&!Object(o.isEmpty)(s.time)?(m+=" till "+Object(Oe.format)(bwfcrm_contacts_data.time_format,je()(s.time,"HH:mm:ss")),Object(o.isEmpty)(b)||(m+=" "+b.join("/")),s.hasOwnProperty("in_contact_timezone")&&s.in_contact_timezone&&(m+=" in Contact's Timezone")):Object(o.isEmpty)(b)||(m+=" "+b.join("/")),m+"."}break;case 2:var p=B.date,d=void 0===p?"":p,h=B.time_delay,y=void 0===h?{time:"",in_contact_timezone:!1}:h,v=B.enable_step_skip,O=void 0!==v&&v,w=B.skip_to_step,j=void 0===w?{step:"",name:""}:w;if(!Object(o.isEmpty)(d)&&!Object(o.isEmpty)(y.time)){var g="",E="";return y.hasOwnProperty("in_contact_timezone")&&y.in_contact_timezone?g+=" in Contact's Timezone.":g+=".",O&&!Object(o.isEmpty)(j)&&j.hasOwnProperty("step")&&""!=j.step&&j.hasOwnProperty("name")&&""!=j.name&&(E=" Jump to ".concat(j.name,".")),"Delay till "+Object(Oe.format)(bwfcrm_contacts_data.date_format,je()(d))+" at "+Object(Oe.format)(bwfcrm_contacts_data.time_format,je()(y.time,"HH:mm:ss"))+" "+g+E}break;case 3:var _=B.custom_field,N=B.enable_time_delay,k=void 0!==N&&N,S=B.time_delay,x=B.enable_step_skip,P=void 0!==x&&x,L=B.skip_to_step;if(_.hasOwnProperty("field")&&""!==_.field){var C="Delay";return k?S.hasOwnProperty("duration")&&(C+=" of ".concat(S.duration," ").concat(S.type," ").concat(S.timing," ")):C+=" till",_.hasOwnProperty("custom_field_label")&&""!==_.custom_field_label?C+=" Contacts '".concat(_.custom_field_label,"' field value"):C+=" Contacts ( ".concat(_.field," ) field value"),_.hasOwnProperty("time")&&""!==_.time&&(C+=" till ".concat(Object(Oe.format)(bwfcrm_contacts_data.time_format,je()(_.time,"HH:mm:ss")))),_.hasOwnProperty("in_contact_timezone")&&_.in_contact_timezone?C+=" in Contact's Timezone.":C+=".",P&&!Object(o.isEmpty)(L)&&L.hasOwnProperty("step")&&""!=L.step&&L.hasOwnProperty("name")&&""!=L.name&&(C+=" Jump to ".concat(L.name,".")),C}break;case 4:var A=B.variable_field,T=B.enable_time_delay,I=void 0!==T&&T,D=B.time_delay,F=B.enable_step_skip,M=void 0!==F&&F,G=B.skip_to_step;if(A.hasOwnProperty("variable")&&""!==A.variable){var q="Delay";return I?D.hasOwnProperty("duration")&&(q+=" of ".concat(D.duration," ").concat(D.type," ").concat(D.timing," ")):q+=" till",A.hasOwnProperty("variable")&&""!==A.variable&&(q+=" Orders meta key ".concat(A.variable," value")),A.hasOwnProperty("time")&&""!==A.time&&(q+=" till ".concat(Object(Oe.format)(bwfcrm_contacts_data.time_format,je()(A.time,"HH:mm:ss")))),A.hasOwnProperty("in_contact_timezone")&&A.in_contact_timezone?q+=" in Contact's Timezone.":q+=".",M&&!Object(o.isEmpty)(G)&&G.hasOwnProperty("step")&&""!=G.step&&G.hasOwnProperty("name")&&""!=G.name&&(q+=" Jump to ".concat(G.name,".")),q}break;default:return Object(n.createElement)(n.Fragment,null)}return Object(n.createElement)(n.Fragment,null)},H=S(),$=x(),J=k(e.id),W=J.hasMultiParents,Q=void 0!==W&&W,X=J.stepId,Z=J.step_status,K=void 0===Z?1:Z,ee=R.hasOwnProperty(X)?R[X]:{},te=T({onNodeClick:function(){O("sidebarNodeData",e),w(!0)},onNodeStatClick:function(){Object(b.mb)()?(O("showContactModalId",X),O("showContactModalType","completed")):O("showProModal",!0)},onNodeQueuedStatClick:function(){Object(b.mb)()?(O("showContactModalId",X),O("showContactModalType","queued")):O("showProModal",!0)}});return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper","data-stepid":X},Object(n.createElement)(a.d,{type:"target",position:"top",isConnectable:!1}),Object(n.createElement)("div",{className:"bwf-inner-wrapper "+(i?"bwf-selected-node":"")+(2===parseInt(K)?" bwf-draft-node":""),onClick:te},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon icon-delay"},Object(n.createElement)(s.a,{size:28,icon:"time-left"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},"Step "+c),Object(n.createElement)("div",{className:"bwf-node-content-label"},"Delay")),Object(n.createElement)("div",{className:"bwf-node-action"},Object(n.createElement)(V,{node:e}),Object(n.createElement)(F.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations-crm"),classes:"bwf-event-action",isDisable:!(!H&&!$),renderContent:function(t){var r=t.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){O("enableCopy",!0),O("copyData",{type:"wait",data:e.data}),r()}},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Copy","wp-marketing-automations-crm")))),Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){O("enableMove",!0),O("moveID",e.id),O("copyData",{type:"wait",data:e.data}),r()}},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Move","wp-marketing-automations-crm")))),Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){var t,n;d({status:!0,onConfirm:(t=Ee().mark((function t(){return Ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e).then((function(){return d({status:!1})}));case 2:case"end":return t.stop()}}),t)})),n=function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){_e(o,n,a,i,c,"next",e)}function c(e){_e(o,n,a,i,c,"throw",e)}i(void 0)}))},function(){return n.apply(this,arguments)})}),r()}},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Delete","wp-marketing-automations-crm")))))}}))),Object(o.isEmpty)(t)||!parseInt(z)>0?Object(n.createElement)("div",{className:"bwf-control-event-error"},Object(n.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer"},"Not Configured")):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-step-content"},Object(n.createElement)("div",{className:"bwf-step-content"},Object(n.createElement)("div",{className:"bwf-step-brick"},Object(n.createElement)("div",{className:"bwf-step-content-content"},Se.hasOwnProperty(z)&&Object(n.createElement)("div",{className:"bwf-node-content-type"},Se[z]),Object(n.createElement)("div",{className:"bwf-node-content-label bwf-two-line-ellipse-text",title:U()},U()))))),Object(n.createElement)("div",{className:"bwf-node-status"},Object(n.createElement)("div",{className:"bwf-queued-status-wrap"},Object(n.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Queued","wp-marketing-automations-crm")),Object(n.createElement)("span",{className:"bwf-node-status-count"},Y?Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(n.createElement)(n.Fragment,null,ee.hasOwnProperty("queued")?Object(b.zb)(parseInt(ee.queued)):0))),Object(n.createElement)("div",{className:"bwf-status-wrap"},Object(n.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Completed","wp-marketing-automations-crm")),Object(n.createElement)("span",{className:"bwf-node-status-count"},Y?Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(n.createElement)(n.Fragment,null,ee.hasOwnProperty("completed")?Object(b.zb)(parseInt(ee.completed)):0)))))),Q&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-plus-paste-wrap bwf-pos-top"},H||$?Object(n.createElement)("div",{className:"bwf-drag-area",onClick:function(){return g(e,"before","")}},Object(n.createElement)("div",{className:"bwf-drag-node is-copy-paste"},Object(n.createElement)("div",{className:"bwf-node-add"})),Object(n.createElement)("div",{className:"bwf-paste-label"},"Paste Here")):Object(n.createElement)("div",{className:"bwf-node-add",onClick:function(t){j(e.id,{option:"",position:"before"}),E(!0),_(t.target)}})))),Object(n.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1}),Object(n.createElement)(h.a,{modalTitle:Object(l.__)("Delete Delay Step"),deleteEntityName:Object(l.__)("delay step"),confirmButtonText:Object(l.__)("Delete","wp-marketing-automations-crm"),onConfirm:p.onConfirm,isLoading:!1,onRequestClose:function(){return d({status:!1})},isOpen:p.status,isDelete:!0,deleteDescriptionText:"Once you delete this step, all the queued contacts will move to next step right away."}))},Le=function(e){return Object(n.createElement)("div",{className:e&&e.data&&e.data.direction&&"no"===e.data.direction?"bwf-yes-no-node  bwf-no-node":"bwf-yes-no-node bwf-yes-node"},Object(n.createElement)(a.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(n.createElement)("span",{className:"bwf-yes-no-wrap"},e&&e.data&&e.data.direction&&"no"===e.data.direction?"No":"Yes"),Object(n.createElement)(a.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))};function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(){Ae=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==Ce(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Ce(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function Te(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return De(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return De(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fe=function(e){e.data;var t=e.selected,r=void 0!==t&&t,o=e.id,i=Ie(Object(n.useState)({status:!1,loading:!0}),2),c=i[0],u=i[1],p=Object(f.a)(),d=p.deleteNode,y=p.setAutomationData,v=p.setNodeForAdd,O=p.copyNodeHere,w=p.setOpenStepModal,j=p.setModalAnchorNode,g=Object(m.a)(),E=g.getNodeDataByID,_=g.getEnableCopy,N=g.getEnableMove,k=g.getLastAddedNode,S=g.getStatLoading,x=g.getStatData,P=k(),L=_(),C=N(),A=S(),M=x();Object(n.useEffect)((function(){P==o&&y("lastAddedNode",0)}),[P]);var G=E(e.id),z=G.hasMultiParents,q=void 0!==z&&z,B=G.stepId,Y=M.hasOwnProperty(B)?M[B]:{},R=T({onNodeStatClick:function(){y("showContactModalId",B),y("showContactModalType","completed")}});return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper","data-stepid":B},Object(n.createElement)(a.d,{type:"target",position:"top",isConnectable:!1}),Object(b.mb)()?Object(n.createElement)("div",{className:"bwf-inner-wrapper "+(r?"bwf-selected-node":""),onClick:R},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon icon-exit"},Object(n.createElement)(s.a,{size:26,icon:"exit"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},"Step "+o),Object(n.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Exit Automation","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-node-action"},Object(n.createElement)(F.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations-crm"),classes:"bwf-event-action",isDisable:!(!L&&!C),renderContent:function(t){var r=t.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){var t,n;u({status:!0,onConfirm:(t=Ae().mark((function t(){return Ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(e).then((function(){return u({status:!1})}));case 2:case"end":return t.stop()}}),t)})),n=function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){Te(o,n,a,i,c,"next",e)}function c(e){Te(o,n,a,i,c,"throw",e)}i(void 0)}))},function(){return n.apply(this,arguments)})}),r()}},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Delete","wp-marketing-automations-crm")))))}}))),Object(n.createElement)("div",{className:"bwf-node-status"},Object(n.createElement)("div",{className:"bwf-status-wrap"},Object(n.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Completed","wp-marketing-automations-crm")),Object(n.createElement)("span",{className:"bwf-node-status-count"},A?Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(n.createElement)(n.Fragment,null,Y.hasOwnProperty("completed")?Object(b.zb)(parseInt(Y.completed)):0))))):Object(n.createElement)("div",{className:"bwf-inner-wrapper "+(r?"bwf-selected-node":""),onClick:function(){return y("showProModal",!0)}},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon icon-exit"},Object(n.createElement)(s.a,{size:26,icon:"exit"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},"Step "+o),Object(n.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Exit Automation","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-node-action"})),Object(n.createElement)("div",{className:"bwf-control-event-error"},Object(n.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer bwf-display-flex"},Object(n.createElement)("span",{className:"bwf-mr-5"},Object(n.createElement)(s.a,{icon:"lock",size:15,color:"#D72D1D"})),Object(l.__)("Pro Feature","wp-marketing-automations-crm")))),q&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-plus-paste-wrap bwf-pos-top"},L||C?Object(n.createElement)("div",{className:"bwf-drag-area",onClick:function(){return O(e,"before","")}},Object(n.createElement)("div",{className:"bwf-drag-node is-copy-paste"},Object(n.createElement)("div",{className:"bwf-node-add"}))):Object(n.createElement)("div",{className:"bwf-node-add",onClick:function(t){v(e.id,{option:"",position:"before"}),w(!0),j(t.target)}})))),Object(n.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0}}),Object(n.createElement)(h.a,{modalTitle:Object(l.__)("Delete Exit Step"),deleteEntityName:Object(l.__)("exit step"),confirmButtonText:Object(l.__)("Delete","wp-marketing-automations-crm"),onConfirm:c.onConfirm,isLoading:!1,onRequestClose:function(){return u({status:!1})},isOpen:c.status,isDelete:!0}))};function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(){Ge=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==Me(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Me(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function ze(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function qe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){ze(o,n,a,i,c,"next",e)}function c(e){ze(o,n,a,i,c,"throw",e)}i(void 0)}))}}function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Re=function(e){var t=e.data,r=void 0===t?{}:t,i=e.selected,c=void 0!==i&&i,u=e.id,p=Be(Object(n.useState)({status:!1,loading:!0}),2),d=p[0],y=p[1],v=Object(f.a)(),O=v.deleteNode,w=v.setAutomationData,j=v.setNodeForAdd,g=v.copyNodeHere,E=v.setOpenStepModal,_=v.setModalAnchorNode,N=v.showSidebar,k=Object(m.a)(),S=k.getNodeDataByID,x=k.getEnableCopy,P=k.getEnableMove,L=k.getLastAddedNode,C=k.getStatLoading,A=k.getStatData,M=L(),G=x(),z=P(),q=C(),B=A();Object(n.useEffect)((function(){M==u&&w("lastAddedNode",0)}),[M]);var Y=(!Object(o.isEmpty)(r)&&r.hasOwnProperty("sidebarValues")?r.sidebarValues:{}).jump_to,R=void 0===Y?{}:Y,U=R.name,H=void 0===U?"":U,V=R.step,$=void 0===V?"":V,J=S(e.id),W=J.hasMultiParents,Q=void 0!==W&&W,X=J.stepId,Z=B.hasOwnProperty(X)?B[X]:{},K=T({onNodeClick:function(){w("sidebarNodeData",e),N(!0)},onNodeStatClick:function(){Object(b.mb)()?(w("showContactModalId",X),w("showContactModalType","completed")):w("showProModal",!0)}});return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper","data-stepid":X},Object(n.createElement)(a.d,{type:"target",position:"top",isConnectable:!1}),Object(b.mb)()?Object(n.createElement)("div",{className:"bwf-inner-wrapper "+(c?"bwf-selected-node":""),onClick:K},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon icon-exit"},Object(n.createElement)(s.a,{size:26,icon:"jump"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},"Step "+u),Object(n.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Jump","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-node-action"},Object(n.createElement)(F.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations-crm"),classes:"bwf-event-action",isDisable:!(!G&&!z),renderContent:function(t){var r=t.onToggle;return Object(n.createElement)(n.Fragment,null,""!=$&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){w("enableCopy",!0),w("copyData",{type:"jump",data:e.data}),r()}},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Copy","wp-marketing-automations-crm")))),Object(n.createElement)(I.a,{isClickable:!0,onInvoke:qe(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w("enableMove",!0),w("moveID",e.id),w("copyData",{type:"jump",data:e.data}),r();case 4:case"end":return t.stop()}}),t)})))},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Move","wp-marketing-automations-crm"))))),Object(n.createElement)(I.a,{isClickable:!0,onInvoke:function(){var t;y({status:!0,onConfirm:(t=qe(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e).then((function(){return y({status:!1})}));case 2:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}),r()}},Object(n.createElement)(D.a,{justify:"flex-start"},Object(n.createElement)(D.c,null,Object(l.__)("Delete","wp-marketing-automations-crm")))))}}))),Object(o.isEmpty)(r)||Object(o.isEmpty)(R)||""==$?Object(n.createElement)("div",{className:"bwf-control-event-error no-padding"},Object(n.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer"},"Not Configured")):Object(n.createElement)("div",{className:"bwf-node-step-content"},Object(n.createElement)("div",{className:"bwf-step-content"},Object(n.createElement)("div",{className:"bwf-step-brick"},Object(n.createElement)("div",{className:"bwf-step-content-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},"Jump to"),Object(n.createElement)("div",{className:"bwf-node-content-label bwf-two-line-ellipse-text"},""!==H?H:"step #"+$))))),Object(n.createElement)("div",{className:"bwf-node-status"},Object(n.createElement)("div",{className:"bwf-status-wrap"},Object(n.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Completed","wp-marketing-automations-crm")),Object(n.createElement)("span",{className:"bwf-node-status-count"},q?Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(n.createElement)(n.Fragment,null,Z.hasOwnProperty("completed")?Object(b.zb)(parseInt(Z.completed)):0))))):Object(n.createElement)("div",{className:"bwf-inner-wrapper "+(c?"bwf-selected-node":""),onClick:function(){return w("showProModal",!0)}},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon icon-exit"},Object(n.createElement)(s.a,{size:26,icon:"jump"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},"Step "+u),Object(n.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Jump","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-node-action"})),Object(n.createElement)("div",{className:"bwf-control-event-error"},Object(n.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer bwf-display-flex"},Object(n.createElement)("span",{className:"bwf-mr-5"},Object(n.createElement)(s.a,{icon:"lock",size:15,color:"#D72D1D"})),Object(l.__)("Pro Feature","wp-marketing-automations-crm")))),Q&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-plus-paste-wrap bwf-pos-top"},G||z?Object(n.createElement)("div",{className:"bwf-drag-area",onClick:function(){return g(e,"before","")}},Object(n.createElement)("div",{className:"bwf-drag-node is-copy-paste"},Object(n.createElement)("div",{className:"bwf-node-add"}))):Object(n.createElement)("div",{className:"bwf-node-add",onClick:function(t){j(e.id,{option:"",position:"before"}),E(!0),_(t.target)}})))),Object(n.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0}}),Object(n.createElement)(h.a,{modalTitle:Object(l.__)("Delete Jump Step"),deleteEntityName:Object(l.__)("jump step"),confirmButtonText:Object(l.__)("Delete","wp-marketing-automations-crm"),onConfirm:d.onConfirm,isLoading:!1,onRequestClose:function(){return y({status:!1})},isOpen:d.status,isDelete:!0}))},Ue=(r(1164),r(79)),He=r(105),Ve=r(299),$e=r(28);r(1165);function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?We(Object(r),!0).forEach((function(t){Xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Je(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Je(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var et=function(e){var t=Object(n.useRef)(null),r=e.mergetag,a=e.copyTagToClipBoard,i=e.automationId,l=Ze(Object(n.useState)({}),2),s=l[0],f=l[1],m=Ze(Object(n.useState)({}),2),b=m[0],p=m[1],d=Ze(Object(n.useState)({}),2),h=d[0],y=d[1],v=r.schema,O=void 0===v?[]:v,w=r.tag_name,j=void 0===w?"":w,g=r.default_val,E=void 0===g?[]:g;Object(n.useEffect)((function(){var e={},t={};O.map((function(r){e[r.id]=r.type,t[r.id]=r})),p(e),y(t)}),[O]);var _,N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!1,n=t.fields,a=t.relation,o=void 0===a?"OR":a;o=o.toUpperCase();try{var i=null;if("OR"===o){if(n&&Array.isArray(n))for(var c=0;c<n.length;c++){i=e[n[c].id];var l=void 0===n[c].value||n[c].value;if(""!=l&&i==l||""==l&&""!=i&&null!=i)return!0}}else"AND"==o&&n&&Array.isArray(n)&&(r=n.every((function(t){i=e[t.id];var r=void 0===t.value||t.value;return(""===r||i==r)&&(""!=r||""!=i&&null!=i)})))}catch(e){console.log(e)}return r},k=function(){var e=["{{"+j];if(!Object(o.isEmpty)(s))if("cart_recovery_link"===j){var t=s.coupon_type,r=void 0===t?"":t,n=s.dynamic_coupon,a=void 0===n?"":n,i=s.static_coupon,c=void 0===i?"":i;"static"===r&&""!==c?e.push("coupon='"+c+"'"):"dynamic"===r&&""!==a&&e.push("coupon='"+a+"'")}else Object.entries(s).map((function(t){var r=Ze(t,2),n=r[0],a=r[1];if(!h[n].hasOwnProperty("toggler")||Object(o.isEmpty)(h[n].toggler)||N(s,h[n].toggler,h[n]))if("search"!=b[n]||Object(o.isEmpty)(a))""!==a&&e.push(n+"='"+a+"'");else{var i=[];a.map((function(e){i.push(e.id)})),e.push(n+"='"+i.join(",")+"'")}}));return e.join(" ")+"}}"},S=function(){var e=k();return O.map((function(t){!t.hasOwnProperty("required")||!t.required||s.hasOwnProperty(t.id)&&""!==s[t.id]||(e="")})),""!==e};return Object(n.createElement)("div",{className:"bwf-merge-tag-wrap bwf_w_full"},Object(n.createElement)(Ue.a,{onChange:function(e){!function(e){var t=Qe(Qe({},E),s);t[e.name]=e.value,f(t)}(e)},initialValues:Qe(Qe({},E),s),validate:function(){return!1}},(function(e){var r=e.getInputProps,a=e.values;e.errors,e.handleSubmit;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"wr_content",ref:t},Object(n.createElement)("fieldset",null,O.map((function(e,t){return Object(n.createElement)(n.Fragment,{key:t},(Object(o.isEmpty)(e.toggler)||N(a,e.toggler,e))&&e.wrap_before&&Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_before}}),e.type?Object(n.createElement)(n.Fragment,null,!1!==e.show&&(Object(o.isEmpty)(e.toggler)||N(a,e.toggler,e))&&Object(n.createElement)(He.a,{input:e,formProps:r(e.id),values:a,automationId:i})):e.hint?Object(n.createElement)(n.Fragment,{dangerouslySetInnerHTML:{__html:e.hint},className:c()(e.class)}):null,(Object(o.isEmpty)(e.toggler)||N(a,e.toggler,e))&&e.wrap_after&&Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_after}}))})))))})),(_=k(),Object(n.createElement)("div",{className:"bwf-merge-tag-config-view"},Object(n.createElement)("span",{className:"bwf-merge-tag"},_),Object(n.createElement)(u.Button,{isPrimary:!0,onClick:function(){a(_)},disabled:!S()},"Copy"))))},tt=r(159);function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach((function(t){ot(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ot(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==rt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===rt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ct(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ct(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var lt=function(e){var t=Object(n.useContext)(b.d),r=Object(n.useContext)(tt.a).setSelectedMergeTag,a=e.isOpen,i=e.onRequestClose,f=e.automationID,p=it(Object(n.useState)(""),2),d=p[0],h=p[1],y=it(Object(n.useState)(""),2),v=y[0],O=y[1],w=it(Object(n.useState)({}),2),j=w[0],g=w[1],E=(0,Object(m.a)().getMergeTagList)();Object(n.useEffect)((function(){a||(g({}),h(""),Object(o.isEmpty)(E)||O(Object.keys(E)[0]))}),[a]);var _=function(){i&&i()},N=function(e){r(e);var n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),t(Object(l.__)("Merge tag copied.","wp-marketing-automations")),Object(b.fb)(t,2e3),_()},k=function(){var e,t=(e={},Object.entries(E).map((function(t){var r=it(t,2),n=r[0],a=r[1];""!==v?v==n&&(e=a):""!==d?Object.entries(a).map((function(t){var r=it(t,2),n=r[0],a=r[1];(n.includes(d)||a.hasOwnProperty("tag_name")&&a.tag_name.includes(d))&&(e[n]=a)})):e=at(at({},e),a)})),e);return Object(o.isEmpty)(t)?Object(n.createElement)("tr",null,Object(n.createElement)("td",{className:"bwf-no-merge-tag"},Object(l.__)("No Merge Tag Available","wp-marketing-automations"))):Object(n.createElement)(n.Fragment,null,Object.entries(t).map((function(e,t){var r=it(e,2),a=(r[0],r[1]);return Object(n.createElement)("tr",{key:"row"+t},Object(n.createElement)("td",null,Object(n.createElement)("span",{className:"bwf-tag-label"},a.tag_description)),Object(n.createElement)("td",null,Object(n.createElement)("span",{className:"bwf-tag-slug"},"{{"+a.tag_name+"}}")),Object(n.createElement)("td",null,a.hasOwnProperty("schema")?Object(n.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return g(a)},title:"Configure"},Object(n.createElement)(s.a,{color:"#353030",icon:"settings"})):Object(n.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return N("{{"+a.tag_name+"}}")},title:"Copy"},Object(n.createElement)(s.a,{color:"#353030",icon:"duplicate"}))))})))};return a?Object(n.createElement)(u.Modal,{onRequestClose:_,className:"bwf-admin-modal bwf-event-search-modal bwf-event-search-modal__merge-tag bwf-admin-modal-xl",shouldCloseOnEsc:!0,shouldCloseOnClickOutside:!0},Object(n.createElement)("div",{className:"bwf-modal-search-header"},Object(n.createElement)("div",{className:"bwf-modal-title"},Object(o.isEmpty)(j)?Object(l.__)("Merge Tags"):Object(n.createElement)("div",{className:"bwf-display-flex"},Object(n.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){g({})}},Object(n.createElement)(s.a,{icon:Object(l.isRTL)()?"arrow-right":"arrow-left"})),j.hasOwnProperty("tag_description")?j.tag_description:"")),Object(n.createElement)("div",{className:"bwf-modal-search-wrap"},Object(o.isEmpty)(j)&&Object(n.createElement)("div",{className:"bwf-component-search-control"},Object(n.createElement)(s.a,{icon:"search",size:15}),Object(n.createElement)(u.TextControl,{value:d,onChange:function(e){""===e?Object(o.isEmpty)(E)||O(Object.keys(E)[0]):O(""),h(e)},placeholder:Object(l.__)("Search by name")}))),Object(n.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",onClick:_},Object(n.createElement)(s.a,{icon:"close",size:16}))),Object(n.createElement)("div",{className:"bwf-event-modal-main"},Object(n.createElement)("div",{className:"bwf-event-modal-body bwf-merge-modal-content"+(Object(o.isEmpty)(j)&&!Object(o.isEmpty)(E)?"":" gridfull")},Object(o.isEmpty)(j)?Object(o.isEmpty)(E)?Object(n.createElement)("div",{className:"bwf-modal-content-content"},Object(n.createElement)("div",{className:"bwf-modal-content-brick no-padding set-height"},Object(n.createElement)("div",{className:"modal-brick-wrap bwfan_pb20"},Object(n.createElement)("div",{className:"bwf-brick-content"},Object(n.createElement)("div",{className:"bwf-merge-tag-list"},Object(n.createElement)("div",{className:"bwf-no-merge-tag"},Object(l.__)("No Merge Tag Available","wp-marketing-automations"))))))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-modal-sidebar"},Object(n.createElement)("div",{className:"bwf-modal-filter-wrap"},Object.keys(E).map((function(e){return Object(n.createElement)("div",{key:e,className:c()("bwf-modal-filter",{active:v===e}),onClick:function(){h(""),O(e)}},e)})))),Object(n.createElement)("div",{className:"bwf-modal-content-content"},Object(n.createElement)("div",{className:"bwf-modal-content-brick no-padding set-height"},Object(n.createElement)("div",{className:"modal-brick-wrap bwfan_pb20"},Object(n.createElement)("div",{className:"bwf-brick-content"},Object(n.createElement)("div",{className:"bwf-merge-tag-list"},Object(n.createElement)("table",null,Object(n.createElement)("tbody",null,k())))))))):Object(n.createElement)(et,{mergetag:j,copyTagToClipBoard:N,automationId:f})))):""};function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(){ut=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==st(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(st(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(r),!0).forEach((function(t){bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==st(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==st(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===st(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pt(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function dt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){pt(o,n,a,i,c,"next",e)}function c(e){pt(o,n,a,i,c,"throw",e)}i(void 0)}))}}function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var vt=function(){var e=Object(n.useContext)(b.d),t=Object(m.a)(),r=t.getSidebarNodeData,a=t.getSelectedSidebarData,i=t.getAutomationId,p=t.getNodeDataByID,h=t.getAutomationData,y=Object(f.a)(),v=y.showSidebar,O=y.setNodeDatabyId,w=y.setAutomationData,j=h().event,g=void 0===j?"":j,E=i(),_=Object(n.useRef)(null),N=ht(Object(n.useState)(!1),2),k=N[0],S=N[1],x=ht(Object(n.useState)(!1),2),P=x[0],L=x[1],C=ht(Object(n.useState)(!1),2),A=C[0],T=C[1],I=ht(Object(n.useState)([]),2),D=I[0],F=I[1],M=ht(Object(n.useState)(!1),2),G=M[0],z=M[1],q=ht(Object(n.useState)(!1),2),B=q[0],Y=q[1],R=r(),U=ht(Object(n.useState)(!1),2),H=U[0],V=U[1],$=!Object(o.isEmpty)(R)&&R.hasOwnProperty("data")?R.data:{},J=Object(o.isEmpty)(R)?{}:a(R),W=J.side_header,Q=void 0===W?[]:W,X=!Object(o.isEmpty)($)&&$.hasOwnProperty("sidebarValues")?$.sidebarValues:{},Z=Object(o.isEmpty)(J)?{}:J,K=Z.fields,ee=void 0===K?[]:K,te=Z.default_values,re=void 0===te?{}:te,ne=!Object(o.isEmpty)(R)&&R.hasOwnProperty("id")?p(R.id):{},ae=ne.stepId,oe=void 0===ae?0:ae,ie=ne.data;(void 0===ie?{}:ie).sidebarValues;Object(n.useEffect)((function(){F([]),S(!1)}),[]);var ce=function(e,t,r){var n=!1,a=t.fields,o=t.relation,i=void 0===o?"OR":o;i=i.toUpperCase();try{var c=null;if("OR"===i){if(a&&Array.isArray(a))for(var l=0;l<a.length;l++){c=e[a[l].id];var s=void 0===a[l].value||a[l].value;if(Array.isArray(s)&&s.includes(c))return!0;if(""!=s&&c==s||""==s&&""!=c&&null!=c)return!0}}else"AND"==i&&a&&Array.isArray(a)&&(n=a.every((function(t){c=e[t.id];var r=void 0===t.value||t.value;return!(!Array.isArray(r)||!r.includes(c))||(""===r||c==r)&&(""!=r||""!=c&&null!=c)})))}catch(e){console.log(e)}return n},le=[];Object(o.isEmpty)(ee)||ee.forEach((function(e){e.hasOwnProperty("required")&&e.required&&le.push(e)}));var se=function(e){var t={};return le.map((function(r){if(r.hasOwnProperty("toggler")&&!Object(o.isEmpty)(r.toggler)&&!ce(e,r.toggler))return!1;(Array.isArray(e[r.id])&&0===e[r.id].length||""===e[r.id]||void 0===e[r.id])&&(t[r.id]=r.hasOwnProperty("errorMsg")?r.errorMsg:Object(l.__)("This is required field.","wp-marketing-automations")),"custom_fields"===r.id&&e[r.id].map((function(e,n){var a,i;!e.hasOwnProperty("field_value")||""==e.field_value||(a=e.field_value,i=!1,Object(o.isObject)(a)?Object.keys(a).map((function(e){["",void 0,null].includes(a[e])&&(i=!0)})):["",void 0,null].includes(a)&&(i=!0),i)?t["field_value_"+n]=r.hasOwnProperty("errorMsg")?r.errorMsg:Object(l.__)("This is required field.","wp-marketing-automations"):t.hasOwnProperty(r.id)&&delete t[r.id]})),"bwfan_email_data"===r.id&&(!e.hasOwnProperty("bwfan_email_data")||e.bwfan_email_data.hasOwnProperty("subject")&&Object(o.isEmpty)(e.bwfan_email_data.subject)?t[r.id]="error":t={})})),F(t),t},ue=function(){var t=dt(ut().mark((function t(r){var n,a,i=arguments;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!(i.length>1&&void 0!==i[1])||i[1],a=[],a=n?se(r):[],!Object(o.isEmpty)(a)){t.next=19;break}return $.sidebarValues=r,z(!0),t.prev=6,t.next=9,d()({path:Object(b.m)("/automation/".concat(E,"/step/").concat(oe)),method:"POST",data:{data:{data:{sidebarData:r}}}}).then((function(t){if(200!==t.code)throw Error(Object(b.j)(null==t?void 0:t.message));var r="";t.hasOwnProperty("result")&&t.result.hasOwnProperty("desc_text")&&!Object(o.isEmpty)(t.result.desc_text)&&(r=t.result.desc_text),O(R.id,mt(mt({},$),{},{desc_text:r}),{step_status:1}),n&&(e(t.message),B||setTimeout((function(){v(!1)}),100)),z(!1),T(!1)})).catch((function(e){throw Error(Object(b.j)(null==e?void 0:e.message))}));case 9:t.next=16;break;case 11:t.prev=11,t.t0=t.catch(6),w("modalData",{status:!0,modalTitle:"Update Action",error:null===t.t0||void 0===t.t0?void 0:t.t0.message}),z(!1),T(!1);case 16:Object(b.fb)(e,1e3),t.next=20;break;case 19:T(!1);case 20:case"end":return t.stop()}}),t,null,[[6,11]])})));return function(e){return t.apply(this,arguments)}}();return Object(n.createElement)(b.b.Provider,{value:{errorList:D,setErrorList:F,stepId:oe}},Object(n.createElement)(b.a.Provider,{value:{isOpenTags:k,setOpenTags:S}},Object(n.createElement)("div",{className:"wr_header"},Object(n.createElement)("div",{className:"bwf-node-icon icon-action"},Object(n.createElement)(s.a,{size:22,icon:"charge"})),Object(n.createElement)("div",{className:"wr_event_title"},J.hasOwnProperty("action_name")?J.action_name:""),Object(n.createElement)("div",{className:"wr_event_variant"},Q.includes("link-trigger")&&Object(n.createElement)(Ve.a,{canCreate:!0,isLinkTriggerOpen:H,setLinkTriggerOpen:V,hideButton:!1}),Q.includes("merge-tag")&&Object(n.createElement)("span",{onClick:function(){S(!0)},className:"bwf-cursor-pointer bwf-modal-icon-link-trigger",key:"merge-tag"},Object(n.createElement)($e.a,{icon:"merge-tag",iconSize:28,size:100,toolTipText:Object(n.createElement)("span",{className:"bwfan_tooltip_text bwf-w-120","data-position":"top"},Object(l.__)("Merge tags","wp-marketing-automations-crm"))}))),Object(n.createElement)("div",{className:"wr_close bwf-cursor-pointer",onClick:function(){return v(!1)}},Object(n.createElement)(s.a,{icon:"close"}))),Object(n.createElement)(Ue.a,{onSubmit:function(){var e=dt(ut().mark((function e(t){var r,n=arguments;return ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(n.length>1&&void 0!==n[1])||n[1],e.next=3,ue(t,r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),initialValues:mt(mt({},re),X),validate:function(){return!1}},(function(e){var t,r=e.getInputProps,a=e.values,i=e.errors,s=e.handleSubmit;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:(t="wr_content",J.hasOwnProperty("slug")&&(t=t+" wr_action_"+J.slug),t),ref:_},Object(n.createElement)("fieldset",null,ee.map((function(e,t){return Object(n.createElement)(n.Fragment,{key:t},(Object(o.isEmpty)(e.toggler)||ce(a,e.toggler))&&e.wrap_before&&Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_before}}),e.type?Object(n.createElement)(n.Fragment,null,!1!==e.show&&(Object(o.isEmpty)(e.toggler)||ce(a,e.toggler))&&Object(n.createElement)(He.a,{input:e,formProps:r(e.id),values:a,isOpenTemplate:P,setOpenTemplate:function(){Object(b.mb)()?L(!P):w("showProModal",!0)},automationId:E,automationEvent:g,setMergeTagModal:S,saveNodeDataOnSubmit:s})):e.hint?Object(n.createElement)(n.Fragment,{dangerouslySetInnerHTML:{__html:e.hint},className:c()(e.class)}):null,(Object(o.isEmpty)(e.toggler)||ce(a,e.toggler))&&e.wrap_after&&Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_after}}))})))),Object(n.createElement)("div",{className:"wr_footer"},Object(n.createElement)(u.Button,{isTertiary:!0,onClick:function(){return v(!1)}},Object(l.__)("Cancel")),!Object(o.isEmpty)(J)&&J.hasOwnProperty("slug")&&"wp_sendemail"===J.slug&&Object(n.createElement)(u.Button,{isSecondary:!0,onClick:function(){Y(!1),T(!0),setTimeout((function(){return s()}),100)},isBusy:A,disabled:Object.keys(i).length},Object(l.__)("Save & Close")),Object(n.createElement)(u.Button,{isPrimary:!0,onClick:function(){!Object(o.isEmpty)(J)&&J.hasOwnProperty("slug")&&"wp_sendemail"===J.slug&&Y(!0),setTimeout((function(){return s()}),100)},isBusy:G&&!A},Object(l.__)("Save"))))})),Object(n.createElement)(lt,{isOpen:k,onRequestClose:S,automationID:E})))};r(1166);function Ot(e){return function(e){if(Array.isArray(e))return gt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||jt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||jt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){if(e){if("string"==typeof e)return gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gt(e,t):void 0}}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Et=function(e){var t=e.options,r=e.selected,a=e.setSelected,i=e.selectedContent,c=void 0===i?"":i,l=e.liteDummyData,u=void 0===l?[]:l,f=wt(Object(n.useState)([]),2),m=f[0],p=f[1];return Object(o.isEmpty)(t)?Object(n.createElement)(n.Fragment,null):Object(n.createElement)(n.Fragment,null,t.map((function(e,t){if(Object(o.isEmpty)(e)||!e.hasOwnProperty("value"))return!1;var i=e.value==r?"selected":"";return Object(n.createElement)("div",{className:"bwf-custom-radio-control",key:t},Object(n.createElement)("div",{className:"bwf-custom-radio-option",key:e.value,onClick:function(){return a(e.value)}},Object(n.createElement)("div",{className:"bwf-select-option-indicator "+i},e.hasOwnProperty("isProFeature")&&e.isProFeature&&!Object(b.mb)()?Object(n.createElement)(s.a,{icon:"lock"}):Object(n.createElement)("div",{className:"bwf-option-mark-outer"},Object(n.createElement)("div",{className:"bwf-option-mark-inner"}))),Object(n.createElement)("div",{className:"bwf-select-option-info"},Object(n.createElement)("div",{className:"bwf-bold"},e.hasOwnProperty("label")?e.label:""),Object(n.createElement)("div",{className:"bwf-desc"},e.hasOwnProperty("desc")?e.desc:"")),e.hasOwnProperty("isProFeature")&&e.isProFeature&&!Object(b.mb)()&&Object(n.createElement)("a",{onClick:function(t){t.stopPropagation();var r=Ot(m);r.includes(e.value)?r.pop(e.value):r.push(e.value),p(r)},className:"bwf-no-underline bwf-cursor-pointer"},"Explore")),m.includes(e.value)&&u.hasOwnProperty(e.value)&&Object(n.createElement)(n.Fragment,null,u[e.value]),i&&Object(n.createElement)("div",{className:"bwf-option-content"},c))})))},_t=r(303),Nt=r(154);r(1167);function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?St(Object(r),!0).forEach((function(t){Pt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==kt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===kt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ct(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ct(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var At=function(e){var t=Object(n.useRef)(null),r=e.mergetag,a=e.copyTagToClipBoard,i=e.automationId,l=Lt(Object(n.useState)({}),2),s=l[0],f=l[1],m=Lt(Object(n.useState)({}),2),b=m[0],p=m[1],d=r.schema,h=void 0===d?[]:d,y=r.tag_name,v=void 0===y?"":y,O=r.default_val,w=void 0===O?[]:O;Object(n.useEffect)((function(){var e=[];h.map((function(t){e[t.id]=t.type})),p(e)}),[h]);var j,g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!1,n=t.fields,a=t.relation,o=void 0===a?"OR":a;o=o.toUpperCase();try{var i=null;if("OR"===o){if(n&&Array.isArray(n))for(var c=0;c<n.length;c++){i=e[n[c].id];var l=void 0===n[c].value||n[c].value;if(""!=l&&i==l||""==l&&""!=i&&null!=i)return!0}}else"AND"==o&&n&&Array.isArray(n)&&(r=n.every((function(t){i=e[t.id];var r=void 0===t.value||t.value;return(""===r||i==r)&&(""!=r||""!=i&&null!=i)})))}catch(e){console.log(e)}return r},E=function(){var e=["{{"+v];if(!Object(o.isEmpty)(s))if("cart_recovery_link"===v){var t=s.coupon_type,r=void 0===t?"":t,n=s.dynamic_coupon,a=void 0===n?"":n,i=s.static_coupon,c=void 0===i?"":i;"static"===r&&""!==c?e.push("coupon='"+c+"'"):"dynamic"===r&&""!==a&&e.push("coupon='"+a+"'")}else Object.entries(s).map((function(t){var r=Lt(t,2),n=r[0],a=r[1];if("search"!=b[n]||Object(o.isEmpty)(a))""!==a&&e.push(n+"='"+a+"'");else{var i=[];a.map((function(e){i.push(e.id)})),e.push(n+"='"+i.join(",")+"'")}}));return e.join(" ")+"}}"},_=function(){var e=E();return h.map((function(t){!t.hasOwnProperty("required")||!t.required||s.hasOwnProperty(t.id)&&""!==s[t.id]||(e="")})),""!==e};return Object(n.createElement)("div",{className:"bwf-merge-tag-wrap bwf_w_full"},Object(n.createElement)(Ue.a,{onChange:function(e){!function(e){var t=xt({},s);t[e.name]=e.value,f(t)}(e)},initialValues:xt(xt({},w),s),validate:function(){return!1}},(function(e){var r=e.getInputProps,a=e.values;e.errors,e.handleSubmit;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"wr_content",ref:t},Object(n.createElement)("fieldset",null,h.map((function(e,t){return Object(n.createElement)(n.Fragment,{key:t},(Object(o.isEmpty)(e.toggler)||g(a,e.toggler,e))&&e.wrap_before&&Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_before}}),e.type?Object(n.createElement)(n.Fragment,null,!1!==e.show&&(Object(o.isEmpty)(e.toggler)||g(a,e.toggler,e))&&Object(n.createElement)(He.a,{input:e,formProps:r(e.id),values:a,automationId:i})):e.hint?Object(n.createElement)(n.Fragment,{dangerouslySetInnerHTML:{__html:e.hint},className:c()(e.class)}):null,(Object(o.isEmpty)(e.toggler)||g(a,e.toggler,e))&&e.wrap_after&&Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_after}}))})))))})),(j=E(),Object(n.createElement)("div",{className:"bwf-merge-tag-config-view"},Object(n.createElement)("span",{className:"bwf-merge-tag"},j),Object(n.createElement)(u.Button,{isPrimary:!0,onClick:function(){a(j)},disabled:!_()},"Select"))))};function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function It(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?It(Object(r),!0).forEach((function(t){Ft(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ft(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Tt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Tt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zt=function(e){Object(n.useContext)(b.d);var t=Object(n.useContext)(tt.a).setSelectedMergeTag,r=e.isOpen,a=e.onRequestClose,i=e.automationID,f=e.onSelect,p=Mt(Object(n.useState)(""),2),d=p[0],h=p[1],y=Mt(Object(n.useState)(""),2),v=y[0],O=y[1],w=Mt(Object(n.useState)({}),2),j=w[0],g=w[1],E=(0,Object(m.a)().getDelayTagList)();Object(n.useEffect)((function(){r||(g({}),h(""),Object(o.isEmpty)(E)||O(Object.keys(E)[0]))}),[r]);var _=function(){a&&a()},N=function(e){t(e),f(e),_()},k=function(){var e,t=(e={},Object.entries(E).map((function(t){var r=Mt(t,2),n=r[0],a=r[1];""!==v?v==n&&(e=a):""!==d?Object.entries(a).map((function(t){var r=Mt(t,2),n=r[0],a=r[1];(n.includes(d)||a.hasOwnProperty("tag_name")&&a.tag_name.includes(d))&&(e[n]=a)})):e=Dt(Dt({},e),a)})),e);return Object(o.isEmpty)(t)?Object(n.createElement)("tr",null,Object(n.createElement)("td",{className:"bwf-no-merge-tag"},Object(l.__)("No Delay Tag Available","wp-marketing-automations"))):Object(n.createElement)(n.Fragment,null,Object.entries(t).map((function(e,t){var r=Mt(e,2),a=(r[0],r[1]);return Object(n.createElement)("tr",{key:"row"+t},Object(n.createElement)("td",null,Object(n.createElement)("span",{className:"bwf-tag-label"},a.tag_description)),Object(n.createElement)("td",null,Object(n.createElement)("span",{className:"bwf-tag-slug"},"{{"+a.tag_name+"}}")),Object(n.createElement)("td",null,a.hasOwnProperty("schema")?Object(n.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return g(a)},title:"Configure"},Object(n.createElement)(s.a,{color:"#353030",icon:"settings"})):Object(n.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return N("{{"+a.tag_name+"}}")},title:"Copy"},Object(n.createElement)(s.a,{color:"#353030",icon:"duplicate"}))))})))};return r?Object(n.createElement)(u.Modal,{onRequestClose:_,className:"bwf-admin-modal bwf-event-search-modal bwf-event-search-delay-tag bwf-admin-modal-xl bwf-overflow-remove",shouldCloseOnEsc:!0,shouldCloseOnClickOutside:!0},Object(n.createElement)("div",{className:"bwf-modal-search-header"},Object(n.createElement)("div",{className:"bwf-modal-title"},Object(o.isEmpty)(j)?Object(l.__)("Delay Tags"):Object(n.createElement)("div",{className:"bwf-display-flex"},Object(n.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){g({})}},Object(n.createElement)(s.a,{icon:Object(l.isRTL)()?"arrow-right":"arrow-left"})),j.hasOwnProperty("tag_description")?j.tag_description:"")),Object(n.createElement)("div",{className:"bwf-modal-search-wrap"},Object(o.isEmpty)(j)&&Object(n.createElement)("div",{className:"bwf-component-search-control"},Object(n.createElement)(s.a,{icon:"search",size:15}),Object(n.createElement)(u.TextControl,{value:d,onChange:function(e){""===e?Object(o.isEmpty)(E)||O(Object.keys(E)[0]):O(""),h(e)},placeholder:Object(l.__)("Search by name")}))),Object(n.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",onClick:_},Object(n.createElement)(s.a,{icon:"close",size:16}))),Object(n.createElement)("div",{className:"bwf-event-modal-main"},Object(n.createElement)("div",{className:"bwf-event-modal-body bwf-merge-modal-content"+(Object(o.isEmpty)(j)&&!Object(o.isEmpty)(E)?"":" gridfull")},Object(o.isEmpty)(j)?Object(o.isEmpty)(E)?Object(n.createElement)("div",{className:"bwf-modal-content-content"},Object(n.createElement)("div",{className:"bwf-modal-content-brick no-padding set-height"},Object(n.createElement)("div",{className:"modal-brick-wrap bwfan_pb20"},Object(n.createElement)("div",{className:"bwf-brick-content"},Object(n.createElement)("div",{className:"bwf-merge-tag-list"},Object(n.createElement)("div",{className:"bwf-no-merge-tag"},Object(l.__)("No Delay Tag Available","wp-marketing-automations"))))))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-modal-sidebar"},Object(n.createElement)("div",{className:"bwf-modal-filter-wrap"},Object.keys(E).map((function(e){return Object(n.createElement)("div",{key:e,className:c()("bwf-modal-filter",{active:v===e}),onClick:function(){h(""),O(e)}},e)})))),Object(n.createElement)("div",{className:"bwf-modal-content-content"},Object(n.createElement)("div",{className:"bwf-modal-content-brick no-padding set-height"},Object(n.createElement)("div",{className:"modal-brick-wrap bwfan_pb20"},Object(n.createElement)("div",{className:"bwf-brick-content"},Object(n.createElement)("div",{className:"bwf-merge-tag-list"},Object(n.createElement)("table",null,Object(n.createElement)("tbody",null,k())))))))):Object(n.createElement)(At,{mergetag:j,copyTagToClipBoard:N,automationId:i})))):""};function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(e){return function(e){if(Array.isArray(e))return Qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Wt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(r),!0).forEach((function(t){Ut(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ut(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==qt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===qt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ht(){Ht=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==qt(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(qt(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function Vt(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function $t(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Vt(o,n,a,i,c,"next",e)}function c(e){Vt(o,n,a,i,c,"throw",e)}i(void 0)}))}}function Jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||Wt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(e,t){if(e){if("string"==typeof e)return Qt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qt(e,t):void 0}}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Xt=function(){var e=Jt(Object(n.useState)({}),2),t=e[0],r=e[1],a=Jt(Object(n.useState)({}),2),i=a[0],c=a[1],p=Jt(Object(n.useState)(!0),2),h=p[0],y=p[1],v=Jt(Object(n.useState)(!1),2),O=v[0],w=v[1],j=Jt(Object(n.useState)(!1),2),g=j[0],E=j[1],_=Object(n.useContext)(b.d),N=Object(f.a)(),k=N.showSidebar,S=N.setNodeDatabyId,x=N.setAutomationData,P=N.getElementsAfterStep,L=Jt(Object(n.useState)(!1),2),C=L[0],A=L[1],T=Object(m.a)(),I=T.getSidebarNodeData,D=T.getNodeDataByID,F=T.getAutomationId,M=T.getAutomationLinks,G=T.getAutomationSteps,z=T.getCount,q=T.getActionsList,B=T.getGoals,Y=T.getDelayTagList,R=I(),U=F(),H=Y(),V=G(),$=M(),J=z(),W=q(),Q=B(),X=!Object(o.isEmpty)(R)&&R.hasOwnProperty("id")?D(R.id):{},Z=X.id,K=void 0===Z?0:Z,ee=X.stepId,te=void 0===ee?0:ee,re=X.data,ne=(void 0===re?{}:re).sidebarValues,ae=function(){var e=$t(Ht().mark((function e(){return Ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d()({path:Object(b.m)("/fields/?type=7&all=true"),method:"GET"}).then((function(e){200===e.code&&(Object(o.isEmpty)(e.result)||c(e.result),y(!1))}));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){Object(b.mb)()&&ae(),r({})}),[]);var oe=!Object(o.isEmpty)(R)&&R.hasOwnProperty("data")?R.data:{},ie=!Object(o.isEmpty)(oe)&&oe.hasOwnProperty("sidebarValues")?oe.sidebarValues:{},ce=Jt(Object(n.useState)(1),2),le=ce[0],se=ce[1],ue=Jt(Object(n.useState)({day_delay:{unit:"min",text:"0"}}),2),fe=ue[0],me=ue[1];Object(n.useEffect)((function(){ie.hasOwnProperty("type")&&[1,2,3,4].includes(parseInt(ie.type))&&se(parseInt(ie.type)),ie.hasOwnProperty("data")&&!Object(o.isEmpty)(ie.data)&&me(ie.data)}),[ie]),Object(n.useEffect)((function(){if(!h){var e=Rt(Rt({},ie),{},{type:le,data:fe});Object(o.isEqual)(ne,e)||Object(o.isEmpty)(ne)?w(!1):w(!0)}}),[le,fe]);var be=function(e){var t=e.type,n=void 0===t?0:t,a=e.data,i=void 0===a?{}:a,c={};switch(parseInt(n)){case 1:var l=i.day_delay,s=void 0===l?{}:l,u=i.enable_time_delay,f=void 0!==u&&u,m=i.time_delay,b=void 0===m?{}:m,p=i.enable_week_delay,d=void 0!==p&&p,h=i.week_delay,y=void 0===h?[]:h;(Object(o.isEmpty)(s)||s.hasOwnProperty("text")&&""==s.text)&&(c.day_delay="Select a specific period."),f?(Object(o.isEmpty)(b)||b.hasOwnProperty("time")&&Object(o.isEmpty)(b.time))&&(c.time_delay="Select a specific time of day."):i.time_delay={},d?Object(o.isEmpty)(y)&&(c.week_delay="Select a specific day of the week."):i.week_delay=[];break;case 2:var v=i.date,O=void 0===v?"":v,w=i.time_delay,j=void 0===w?{time:""}:w,g=i.enable_step_skip,E=void 0!==g&&g,_=i.skip_to_step,N=void 0===_?{}:_;Object(o.isEmpty)(O)&&(c.specific_date="Select a specific date."),Object(o.isEmpty)(j.time)&&(c.specific_time="Select a specific time."),!E||N.hasOwnProperty("step")&&""!=N.step||(c.specific_date_time_step="Please choose the target step if time passes.");break;case 3:var k=i.custom_field,S=void 0===k?{}:k,x=i.enable_step_skip,P=void 0!==x&&x,L=i.skip_to_step,C=void 0===L?{}:L;if(!S.hasOwnProperty("field")||0==parseInt(S.field)||isNaN(parseInt(S.field))){c.custom_field="Please select custom field.";break}!P||C.hasOwnProperty("step")&&""!=C.step||(c.custom_field="Please choose the target step if time passes.");break;case 4:var A=i.variable_field,T=void 0===A?{}:A,I=i.enable_step_skip,D=void 0!==I&&I,F=i.skip_to_step,M=void 0===F?{}:F;if(!T.hasOwnProperty("variable")||""==T.variable){c.variable="Please select a delay variable.";break}!D||M.hasOwnProperty("step")&&""!=M.step||(c.variable="Please choose the target step if time passes.")}return!!Object(o.isEmpty)(c)||(r(c),!1)},pe=function(){var e=$t(Ht().mark((function e(){var t,r,n;return Ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,r=Rt(Rt({},ie),{},{type:le,data:fe}),be(r)){e.next=4;break}return e.abrupt("return");case 4:if(!Object(o.isEqual)(ne,r)){e.next=7;break}return k(!1),e.abrupt("return");case 7:return Object(o.isEmpty)(ne)||(t=!0),A(!0),n={data:{data:{sidebarData:r}},steps:Object(o.cloneDeep)(V).map((function(e){return e.hasOwnProperty("data")&&e.data.hasOwnProperty("sidebarValues")&&(e.data.sidebarValues={}),e})),links:$,count:J,optionUpdated:t,actionType:1},e.prev=10,e.next=13,d()({path:Object(b.m)("/automation/".concat(U,"/step/").concat(te)),method:"POST",data:n}).then((function(e){if(200!==e.code)throw Error(Object(b.j)(null==e?void 0:e.message));_(e.message),S(R.id,Rt(Rt({},oe),{},{sidebarValues:r}),{step_status:1}),setTimeout((function(){k(!1)}),100),A(!1)})).catch((function(e){throw Error(Object(b.j)(null==e?void 0:e.message))}));case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(10),x("modalData",{status:!0,modalTitle:"Update Delay",error:null===e.t0||void 0===e.t0?void 0:e.t0.message}),A(!1);case 19:Object(b.fb)(_,1e3);case 20:case"end":return e.stop()}}),e,null,[[10,15]])})));return function(){return e.apply(this,arguments)}}(),de=[{value:1,label:Object(l.__)("Delay for a specific period","wp-marketing-automations"),desc:Object(l.__)("Wait for a specified number of hours, days, or week before continuing","wp-marketing-automations"),isProFeature:!1},{value:2,label:Object(l.__)("Delay until a specific date and time","wp-marketing-automations"),desc:Object(l.__)("Set a specific date and time","wp-marketing-automations"),isProFeature:!0},{value:3,label:Object(l.__)("Delay until a custom field date","wp-marketing-automations"),desc:Object(l.__)("Choose from contacts custom field","wp-marketing-automations"),isProFeature:!0}];Object(o.isEmpty)(H)||de.push({value:4,label:Object(l.__)("Delay with events variable","wp-marketing-automations"),desc:Object(l.__)("Choose from event field value","wp-marketing-automations"),isProFeature:!0});var he=[{value:"1",label:"S"},{value:"2",label:"M"},{value:"3",label:"T"},{value:"4",label:"W"},{value:"5",label:"TH"},{value:"6",label:"F"},{value:"7",label:"SA"}],ye=function(e){return t.hasOwnProperty(e)},ve={1:"Sun",2:"Mon",3:"Tue",4:"Wed",5:"Thu",6:"Fri",7:"Sat"},we=function(){var e=fe.day_delay,t=void 0===e?{}:e,r=fe.enable_time_delay,n=void 0!==r&&r,a=fe.enable_week_delay,i=void 0!==a&&a,c=fe.time_delay,l=void 0===c?{time:""}:c,s=fe.week_delay,u=void 0===s?[]:s;if(!Object(o.isEmpty)(t)&&t.hasOwnProperty("unit")&&t.hasOwnProperty("text")&&!Object(o.isEmpty)(t.unit)&&!Object(o.isEmpty)(t.text)){var f=t.text+" "+function(e,t){switch(e){case"min":return parseInt(t)>1?"Minutes":"Minute";case"hours":return parseInt(t)>1?"Hours":"Hour";case"days":return parseInt(t)>1?"Days":"Day";case"weeks":return parseInt(t)>1?"Weeks":"Week";case"months":return parseInt(t)>1?"Months":"Month";default:return""}}(t.unit,t.text),m=[];return i&&!Object(o.isEmpty)(u)&&u.map((function(e){ve.hasOwnProperty(e)&&m.push(ve[e])})),n&&l.hasOwnProperty("time")&&!Object(o.isEmpty)(l.time)?(f+=" till "+Object(Oe.format)(bwfcrm_contacts_data.time_format,je()(l.time,"HH:mm:ss")),Object(o.isEmpty)(m)||(f+="  "+m.join("/")),l.hasOwnProperty("in_contact_timezone")&&l.in_contact_timezone?f+=" in Contact's Timezone.":f+="."):Object(o.isEmpty)(m)||(f+="  "+m.join("/")),"Delay of "+f+"."}return""},ge=function(){var e=fe.custom_field,t=void 0===e?{field:"",time:"",in_contact_timezone:!1,custom_field_label:""}:e,r=fe.enable_time_delay,n=void 0!==r&&r,a=fe.time_delay,i=void 0===a?{duration:0,type:"days",timing:"after"}:a,c=fe.enable_step_skip,l=void 0!==c&&c,s=fe.skip_to_step,u=void 0===s?{step:0,name:""}:s;if(t.hasOwnProperty("field")&&""!==t.field){var f="Delay ";return n?i.hasOwnProperty("duration")&&(f+="of ".concat(i.duration," ").concat(i.type," ").concat(i.timing," ")):f+="till ",t.hasOwnProperty("custom_field_label")&&""!==t.custom_field_label?f+="'".concat(t.custom_field_label,"' field "):f+="Custom Field ( ".concat(t.field," )"),t.hasOwnProperty("time")&&""!==t.time&&(f+=" till ".concat(Object(Oe.format)(bwfcrm_contacts_data.time_format,je()(t.time,"HH:mm:ss")))),t.hasOwnProperty("in_contact_timezone")&&t.in_contact_timezone?f+=" in Contact's Timezone. ":f+=". ",l&&!Object(o.isEmpty)(u)&&u.hasOwnProperty("step")&&""!=u.step&&u.hasOwnProperty("name")&&""!=u.name&&(f+=" Jump to ".concat(u.name,".")),f}return""},Ee=function(){var e=fe.date,t=void 0===e?"":e,r=fe.time_delay,n=void 0===r?{time:"",in_contact_timezone:!1}:r,a=fe.enable_step_skip,i=void 0!==a&&a,c=fe.skip_to_step,l=void 0===c?{step:0,name:""}:c;if(!Object(o.isEmpty)(t)&&n.hasOwnProperty("time")&&!Object(o.isEmpty)(n.time)){var s="Delay till ";return s+=Object(b.M)(t,!0,!1)+" ",n.hasOwnProperty("time")&&""!==n.time&&(s+="at ".concat(Object(Oe.format)(bwfcrm_contacts_data.time_format,je()(n.time,"HH:mm:ss"))," ")),n.hasOwnProperty("in_contact_timezone")&&n.in_contact_timezone?s+="in Contact's Timezone. ":s+=". ",i&&!Object(o.isEmpty)(l)&&l.hasOwnProperty("step")&&""!=l.step&&l.hasOwnProperty("name")&&""!=l.name&&(s+="Jump to ".concat(l.name)),s}return""},_e={action:"Action",wait:"Delay",conditional:"Conditional",exit:"Exit",benchmark:"Goal"},Ne=function(){var e=P(K);e=e.filter((function(e,t,r){return r.indexOf(e)===t}));var t={stepsOptArr:[],stepsOptions:[{value:"",label:Object(l.__)("Select Step","wp-marketing-automations")}]};return Object(o.isEmpty)(e)||(e.map((function(e){var r=D(e),n=r.stepId,a=void 0===n?0:n,o=r.id,i=void 0===o?0:o;if(!["yesNoNode","end","jump"].includes(r.type)&&!t.stepsOptArr.hasOwnProperty(e)){var c=["Step"];c.push(i),_e.hasOwnProperty(r.type)&&c.push(" : "+_e[r.type]),"action"==r.type&&r.hasOwnProperty("data")&&W.list.hasOwnProperty(r.data.selected)&&W.list[r.data.selected].hasOwnProperty("action_name")&&(W.list[r.data.selected].hasOwnProperty("integration_nicename")?c.push(" - "+W.list[r.data.selected].integration_nicename+" : "):c.push(" - "),c.push(W.list[r.data.selected].action_name)),"benchmark"==r.type&&r.hasOwnProperty("data")&&Q.list.hasOwnProperty(r.data.benchmark)&&Q.list[r.data.benchmark].hasOwnProperty("event_name")&&(Q.list[r.data.benchmark].hasOwnProperty("source_label")&&c.push(Q.list[r.data.benchmark].source_label+" : "),c.push(Q.list[r.data.benchmark].event_name)),t.stepsOptArr[a]=c.join(" "),t.stepsOptions.push({value:a,label:c.join(" ")})}})),t.stepsOptArr.end="End Automation",t.stepsOptions.push({value:"end",label:"End Automation"})),t},ke=Jt(Object(n.useState)(!1),2),Se=ke[0],xe=ke[1],Pe=Jt(Object(n.useState)(!1),2),Le=Pe[0],Ce=Pe[1],Ae=function(){var e=fe.day_delay,r=void 0===e?{unit:"min",text:"0"}:e,a=fe.enable_time_delay,i=void 0!==a&&a,c=fe.time_delay,f=void 0===c?{time:"",in_contact_timezone:!1}:c,m=fe.enable_week_delay,p=void 0!==m&&m,d=fe.week_delay,h=void 0===d?["sunday"]:d;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-delay-field "+(ye("day_delay")?"has-error":"")},Object(n.createElement)(_t.a,{units:[{value:"min",label:Object(l.__)("Minutes","wp-marketing-automations")},{value:"hours",label:Object(l.__)("Hours","wp-marketing-automations")},{value:"days",label:Object(l.__)("Days","wp-marketing-automations")},{value:"weeks",label:Object(l.__)("Weeks","wp-marketing-automations")},{value:"months",label:Object(l.__)("Months","wp-marketing-automations")}],onChange:function(e){me(Rt(Rt({},fe),{},{day_delay:e}))},value:r}),ye("day_delay")&&Object(n.createElement)("div",{className:"has-bwfan-error"},t.day_delay)),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(b.mb)()?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(u.CheckboxControl,{checked:i,label:Object(l.__)("Delay until a specific time of day","wp-marketing-automations"),onChange:function(e){return me(Rt(Rt({},fe),{},{enable_time_delay:e}))}}),i&&Object(n.createElement)("div",{className:"bwf-delay-field "+(ye("time_delay")?"has-error":"")},Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p-20 bwf-pt-0 bwf-pb-0"},Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full"},Object(n.createElement)("input",{type:"time",value:f.time,className:"bwf-w-150 bwf-h-36",onChange:function(e){me(Rt(Rt({},fe),{},{time_delay:Rt(Rt({},fe.time_delay),{},{time:e.target.value})}))}}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-display-flex "+(Object(b.mb)()?"":"bwf-delay-no-pro")},Object(b.mb)()?Object(n.createElement)(u.CheckboxControl,{checked:f.in_contact_timezone,label:Object(l.__)("In Contact Timezone","wp-marketing-automations"),onChange:function(e){me(Rt(Rt({},fe),{},{time_delay:Rt(Rt({},fe.time_delay),{},{in_contact_timezone:e})}))}}):Object(n.createElement)("div",{className:"bwf-cursor-pointer no-color",onClick:function(){return x("showProModal",!0)}},"In Contact Timezone"),!Object(b.mb)()&&Object(n.createElement)(s.a,{icon:"lock",size:16})))),ye("time_delay")&&Object(n.createElement)("div",{className:"has-bwfan-error"},t.time_delay))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start"},Object(n.createElement)(s.a,{icon:"lock"}),Object(l.__)("Delay until a specific time of day","wp-marketing-automations"),Object(n.createElement)("a",{onClick:function(){return xe(!Se)},className:"bwf-no-underline bwf-cursor-pointer"},"Explore")),Se&&Object(n.createElement)("div",{className:"bwf-p-15 bwf-mtb-10 bwf-lite-restrict-section"},Object(n.createElement)(u.CheckboxControl,{checked:!1,disabled:!0,label:Object(l.__)("Delay until a specific time of day","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf-delay-field "},Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p-20 bwf-pt-0 bwf-pb-0"},Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full"},Object(n.createElement)("input",{type:"time",value:"",disabled:!0,className:"bwf-w-150 bwf-h-36",onChange:function(){}}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-display-flex "},Object(n.createElement)(u.CheckboxControl,{checked:!1,disabled:!0,label:Object(l.__)("In Contact Timezone","wp-marketing-automations"),onChange:function(){}}))))),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-single-automation-notice is-info no-icon"},Object(n.createElement)("b",null,"This feature is only for licensed Pro users.")," ",Object(n.createElement)("a",{target:"__blank",className:"bwf-a-no-underline",href:"https://funnelkit.com/autonami-lite-upgrade/?utm_source=WordPress&utm_medium=Get+PRO+Delay+Step&utm_campaign=Lite+Plugin"},"Learn More")))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(b.mb)()?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(u.CheckboxControl,{checked:p,label:Object(l.__)("Delay until a specific day(s) of the week","wp-marketing-automations"),onChange:function(e){return me(Rt(Rt({},fe),{},{enable_week_delay:e}))}}),p&&Object(n.createElement)("div",{className:"bwf-delay-field "+(ye("week_delay")?"has-error":"")},Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(u.ButtonGroup,null,he.map((function(e,t){return Object(n.createElement)(u.Button,{key:t,isPrimary:h.includes(e.value),isSecondary:!h.includes(e.value),onClick:function(){var t=Bt(h);t.includes(e.value)?t=t.filter((function(t){return t!==e.value})):t.push(e.value),me(Rt(Rt({},fe),{},{week_delay:t}))}},e.label)}))),ye("week_delay")&&Object(n.createElement)("div",{className:"has-bwfan-error"},t.week_delay),Object(n.createElement)("div",{className:"bwf_clear_10"}))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start"},Object(n.createElement)(s.a,{icon:"lock"}),Object(l.__)("Delay until a specific day(s) of the week","wp-marketing-automations"),Object(n.createElement)("a",{onClick:function(){return Ce(!Le)},className:"bwf-no-underline bwf-cursor-pointer"},"Explore")),Le&&Object(n.createElement)("div",{className:"bwf-p-15 bwf-mtb-10 bwf-lite-restrict-section"},Object(n.createElement)(u.CheckboxControl,{checked:!1,disabled:!0,label:Object(l.__)("Delay until a specific day(s) of the week","wp-marketing-automations"),onChange:function(){}}),Object(n.createElement)("div",{className:"bwf-delay-field "},Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(u.ButtonGroup,null,he.map((function(e,t){return Object(n.createElement)(u.Button,{key:t,isPrimary:!1,isSecondary:!0,onClick:function(){},disabled:!0},e.label)})))),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-single-automation-notice is-info no-icon"},Object(n.createElement)("b",null,"This feature is only for licensed Pro users.")," ",Object(n.createElement)("a",{target:"__blank",className:"bwf-a-no-underline",href:"https://funnelkit.com/autonami-lite-upgrade/?utm_source=WordPress&utm_medium=Get+PRO+Delay+Step&utm_campaign=Lite+Plugin"},"Learn More")))),!Object(o.isEmpty)(we())&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-single-automation-notice is-info"},we())))},Te=function(){return Object(n.createElement)("div",{className:"bwf-custom-date-delay"},Object(n.createElement)("div",{className:"bwf-delay-field "},h?Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf_w_full bwf-h-15"}):function(){var e=fe.custom_field,t=void 0===e?{field:0,time:"",in_contact_timezone:!1,custom_field_label:""}:e,r=fe.enable_time_delay,a=void 0!==r&&r,c=fe.time_delay,s=void 0===c?{duration:0,type:"days",timing:"after"}:c,f=fe.occurrence,m=void 0===f?"daymonth":f,p=fe.enable_step_skip,d=void 0!==p&&p,h=fe.skip_to_step,y=void 0===h?{step:0,name:""}:h,v=Ne(),O=v.stepsOptArr,w=v.stepsOptions;if(Object(o.isEmpty)(i))return Object(n.createElement)(n.Fragment,null,Object(l.__)("No Custom Field with type Date found","wp-marketing-automations"));var j=[{value:"",label:Object(l.__)("Select Type","wp-marketing-automations")}];Object.keys(i).map((function(e){j.push({label:i[e].hasOwnProperty("name")?i[e].name:"",value:e})}));var g=ge();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-delay-field bwf-delay-select-field-wrap"},Object(n.createElement)("div",{className:"bwf-pt-0 bwf-pb-0"},Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full align-start"},Object(n.createElement)("div",{className:"bwf-delay-field-select bwf-w-210 "+(ye("custom_field")&&""==t.field?"has-error":"")},Object(n.createElement)(u.SelectControl,{value:t.field,className:"bwf_W_full",options:j,onChange:function(e){return me(Rt(Rt({},fe),{},{custom_field:Rt(Rt({},fe.custom_field),{},{field:e,custom_field_label:i[e].name})}))}}),ye("custom_field")&&""==t.field&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"has-bwfan-error"},"Please select a custom field."))),Object(n.createElement)("div",{className:"bwf-delay-occurrence bwf-delay-field "+(ye("custom_field")&&""==m?"has-error":"")},Object(n.createElement)(u.SelectControl,{value:m,className:"bwf_w_full",options:[{value:"daymonth",label:"Use Day & Month"},{value:"daymonthyear",label:"Use Full Date"}],onChange:function(e){return me(Rt(Rt({},fe),{},{occurrence:e}))}}))),Object(n.createElement)("div",{className:"bwf-sidebar-hint"},Object(l.__)("Note: Contact would not pass this step if the value of custom field is blank.","wp-marketing-automations"),"daymonth"===m&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("br",null),Object(l.__)("It will pick the day and month from the selected field value and if the time is older than the current time it will increase by one year.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full"},Object(n.createElement)("div",{className:"bwf-delay-select-field-time bwf-w-210"},Object(n.createElement)("input",{type:"time",value:t.time,className:"bwf-w-210 bwf-h-36",onChange:function(e){me(Rt(Rt({},fe),{},{custom_field:Rt(Rt({},fe.custom_field),{},{time:e.target.value})}))}})),Object(n.createElement)("div",{className:"bwf-delay-select-field-timezone bwf-w-210"},Object(n.createElement)(u.CheckboxControl,{checked:t.in_contact_timezone,label:Object(l.__)("In Contact Timezone","wp-marketing-automations"),onChange:function(e){me(Rt(Rt({},fe),{},{custom_field:Rt(Rt({},fe.custom_field),{},{in_contact_timezone:e})}))}}))))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-delay-field bwf-delay-sidebar-custom-field"},Object(n.createElement)("div",{className:"bwf-delay-skip-step bwf-specific-date"},Object(n.createElement)("div",{className:"bwf-specific-date "+(Object(b.mb)()?"":"bwf-delay-no-pro")},Object(n.createElement)(u.CheckboxControl,{checked:a,label:Object(l.__)("Delay for certain days from field date","wp-marketing-automations"),onChange:function(e){Object(b.mb)()?me(Rt(Rt({},fe),{},{enable_time_delay:e})):x("showProModal",!0)}}))),a&&Object(n.createElement)("div",{className:"bwf-pt-0 bwf-pb-0 bwf-delay-sidebar-custom-delay-wrap"},Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full"},Object(n.createElement)("div",{className:"bwf-delay-duration bwf-w-210 "+(ye("custom_field")&&parseInt(s.duration)<0?"has-error":"")},Object(n.createElement)(u.TextControl,{className:"bwf-h-36",type:"number",value:s.duration,onChange:function(e){return me(Rt(Rt({},fe),{},{time_delay:Rt(Rt({},fe.time_delay),{},{duration:e})}))},min:1,placeholder:Object(l.__)("2","wp-marketing-automations")})),Object(n.createElement)("div",{className:"bwf-delay-type bwf-w-210"},Object(n.createElement)(u.SelectControl,{value:s.type,className:"bwf_w_full",options:[{value:"days",label:"Days"},{value:"weeks",label:"Weeks"}],onChange:function(e){return me(Rt(Rt({},fe),{},{time_delay:Rt(Rt({},fe.time_delay),{},{type:e})}))}})),Object(n.createElement)("div",{className:"bwf-delay-timing bwf-w-170"},Object(n.createElement)(u.SelectControl,{value:s.timing,className:"bwf_w_full",options:[{value:"before",label:"Before"},{value:"after",label:"After"}],onChange:function(e){return me(Rt(Rt({},fe),{},{time_delay:Rt(Rt({},fe.time_delay),{},{timing:e})}))}}))))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-delay-skip-step bwf-specific-date"},Object(n.createElement)("div",{className:"bwf-specific-date "+(Object(b.mb)()?"":"bwf-delay-no-pro")},Object(n.createElement)(u.CheckboxControl,{checked:d,label:Object(l.__)("Jump to step if time has passed","wp-marketing-automations"),onChange:function(e){Object(b.mb)()?me(Rt(Rt({},fe),{},{enable_step_skip:e})):x("showProModal",!0)}}))),d&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-delay-skip-step-select bwf-specific-date "+(ye("custom_field")&&""==y.step?"has-error":"")},Object(n.createElement)(u.SelectControl,{value:y.step,className:"bwf_w_full",options:w,onChange:function(e){return me(Rt(Rt({},fe),{},{skip_to_step:Rt(Rt({},fe.skip_to_step),{},{step:e,name:O[e]})}))}}),ye("custom_field")&&""==y.step&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"has-bwfan-error"},"Please choose the target step if time passes.")))),""!==g&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-single-automation-notice is-info"},g)))}()))},Ie=function(){var e=fe.date,r=void 0===e?"":e,a=fe.time_delay,i=void 0===a?{time:"",in_contact_timezone:!1}:a,c=fe.enable_step_skip,f=void 0!==c&&c,m=fe.skip_to_step,p=void 0===m?{step:0,name:""}:m,d=Ne(),h=d.stepsOptArr,y=d.stepsOptions;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-specific-date-time-delay"},Object(n.createElement)("div",{className:"bwf-specific-date bwf_w_full bwf-h-36 bwf-mt-10"},Object(n.createElement)("div",{className:"bwf-delay-field "+(ye("specific_date")?"has-error":"")},Object(n.createElement)(Nt.a,{date:Object(o.isEmpty)(r)?null:je()(r),dateFormat:"MM/DD/YYYY",onUpdate:function(e){var t,r;t=e.text,r=je()().format("MM/DD/YYYY"),je()(r).isSameOrBefore(je()(t))?me(Rt(Rt({},fe),{},{date:e.text})):(_(Object(l.__)("Invalid Date selected","wp-marketing-automations")),Object(b.fb)(_,1e3))},text:r,iconRight:!0}),ye("specific_date")&&Object(n.createElement)("div",{className:"has-bwfan-error"},t.specific_date))),Object(n.createElement)("div",{className:"bwf-specific-time bwf_w_full"},Object(n.createElement)("div",{className:"bwf-delay-field "+(ye("specific_time")?"has-error":"")},Object(n.createElement)("input",{type:"time",value:i.time,onChange:function(e){me(Rt(Rt({},fe),{},{time_delay:Rt(Rt({},fe.time_delay),{},{time:e.target.value})}))},className:"bwf-h-36"}),ye("specific_time")&&Object(n.createElement)("div",{className:"has-bwfan-error"},t.specific_time))),Object(n.createElement)("div",{className:"bwf-specific-date bwf-w-210 "+(Object(b.mb)()?"":"bwf-delay-no-pro")},Object(b.mb)()?Object(n.createElement)(u.CheckboxControl,{checked:i.in_contact_timezone,label:Object(l.__)("In Contact Timezone","wp-marketing-automations"),onChange:function(e){me(Rt(Rt({},fe),{},{time_delay:Rt(Rt({},fe.time_delay),{},{in_contact_timezone:e})}))}}):Object(n.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return x("showProModal",!0)}},"In Contact TimeZone"),!Object(b.mb)()&&Object(n.createElement)(s.a,{icon:"lock",size:16}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-specific-date"},Object(n.createElement)("div",{className:"bwf-specific-date "+(Object(b.mb)()?"":"bwf-delay-no-pro")},Object(n.createElement)(u.CheckboxControl,{checked:f,label:Object(l.__)("Jump to step if time has passed","wp-marketing-automations"),onChange:function(e){Object(b.mb)()?me(Rt(Rt({},fe),{},{enable_step_skip:e})):x("showProModal",!0)}}))),f&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-specific-date "+(ye("specific_date_time_step")?"has-error":"")},Object(n.createElement)(u.SelectControl,{value:p.step,className:"bwf_w_full",options:y,onChange:function(e){return me(Rt(Rt({},fe),{},{skip_to_step:Rt(Rt({},fe.skip_to_step),{},{step:e,name:h[e]})}))}}),ye("specific_date_time_step")&&Object(n.createElement)("div",{className:"has-bwfan-error"},t.specific_date_time_step))),!Object(o.isEmpty)(Ee())&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-single-automation-notice is-info"},Ee())))};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"wr_header"},Object(n.createElement)("div",{className:"bwf-node-icon icon-delay"},Object(n.createElement)(s.a,{size:28,icon:"time-left"})),Object(n.createElement)("div",{className:"wr_event_title"},Object(n.createElement)("span",null,Object(l.__)("Delay","wp-marketing-automations"))),Object(n.createElement)("div",{className:"wr_event_variant"}),Object(n.createElement)("div",{className:"wr_close bwf-cursor-pointer",onClick:function(){k(!1)}},Object(n.createElement)(s.a,{icon:"close"}))),Object(n.createElement)("div",{className:"wr_content"},Object(n.createElement)("div",{className:"bwf-delay-wrap"},Object(n.createElement)(Et,{selected:le,setSelected:function(e){Object(b.mb)()||![2,3].includes(parseInt(e))?(me(function(e){switch(e){case 1:return{day_delay:{unit:"min",text:""},enable_time_delay:!1,time_delay:{time:"",in_contact_timezone:!1},enable_week_delay:!1,week_delay:[]};case 2:return{date:"",time_delay:{time:"",in_contact_timezone:!1},enable_step_skip:!1,skip_to_step:{step:0,name:""}};case 3:return{custom_field:{field:"",time:"",in_contact_timezone:!1,custom_field_label:""},time_delay:{duration:0,type:"days",timing:"before"},occurrence:"daymonth",enable_step_skip:!1,skip_to_step:{step:0,name:""}};case 4:return{variable_field:{variable:"",time:"",in_contact_timezone:!1},time_delay:{duration:0,type:"days",timing:"before"},occurrence:"daymonthyear",enable_step_skip:!1,skip_to_step:{step:0,name:""}};default:return{}}}(parseInt(e))),se(e)):x("showProModal",!0)},options:de,selectedContent:function(){switch(parseInt(le)){case 1:return Object(n.createElement)(n.Fragment,null,Ae());case 2:return Object(n.createElement)(n.Fragment,null,Object(b.mb)()?Ie():Object(n.createElement)(n.Fragment,null));case 3:return Object(n.createElement)(n.Fragment,null,Object(b.mb)()?Te():Object(n.createElement)(n.Fragment,null));case 4:return Object(n.createElement)(n.Fragment,null,Object(b.mb)()?(e=fe.variable_field,t=void 0===e?{variable:"",time:"",in_contact_timezone:!1}:e,r=fe.enable_time_delay,a=void 0!==r&&r,o=fe.time_delay,i=void 0===o?{duration:0,type:"days",timing:"after"}:o,c=fe.occurrence,s=void 0===c?"daymonthyear":c,f=fe.enable_step_skip,m=void 0!==f&&f,p=fe.skip_to_step,d=void 0===p?{step:0,name:""}:p,h=Ne(),y=h.stepsOptArr,v=h.stepsOptions,O=ge(),Object(n.createElement)(n.Fragment,null,Object(n.createElement)(zt,{isOpen:g,onRequestClose:E,automationID:U,onSelect:function(e){me(Rt(Rt({},fe),{},{variable_field:Rt(Rt({},fe.variable_field),{},{variable:e})}))}}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-delay-field bwf-delay-select-field-wrap"},Object(n.createElement)("div",{className:"bwf-pt-0 bwf-pb-0"},Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full align-start"},Object(n.createElement)("div",{className:"bwf-delay-field-select bwf-w-300 "+(ye("variable")&&""==t.variable?"has-error":""),onClick:function(){return E(!0)}},Object(n.createElement)(u.TextControl,{value:t.variable,disabled:!0}),ye("variable")&&""==t.variable&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"has-bwfan-error"},"Please select a variable."))),Object(n.createElement)("div",{className:"bwf-delay-occurrence bwf-delay-field ",onClick:function(){return E(!0)}},Object(n.createElement)(u.Button,{isSecondary:!0},"Select")),Object(n.createElement)("div",{className:"bwf-delay-occurrence bwf-delay-field "},Object(n.createElement)("div",{className:"bwf-delay-occurrence bwf-delay-field "+(ye("variable")&&""==s?"has-error":"")},Object(n.createElement)(u.SelectControl,{value:s,className:"bwf_w_full",options:[{value:"daymonth",label:"Use Day & Month"},{value:"daymonthyear",label:"Use Full Date"}],onChange:function(e){return me(Rt(Rt({},fe),{},{occurrence:e}))}})))),Object(n.createElement)("div",{className:"bwf-sidebar-hint"},Object(l.__)("Note: If key value is not present it will run immediately.","wp-marketing-automations"),"daymonth"===s&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("br",null),Object(l.__)("It will pick the day and month from the selected field value and if the time is older than the current time it will increase by one year.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full"},Object(n.createElement)("div",{className:"bwf-delay-select-field-time bwf-w-210"},Object(n.createElement)("input",{type:"time",value:t.time,className:"bwf-w-210 bwf-h-36",onChange:function(e){me(Rt(Rt({},fe),{},{variable_field:Rt(Rt({},fe.variable_field),{},{time:e.target.value})}))}})),Object(n.createElement)("div",{className:"bwf-delay-select-field-timezone bwf-w-210"},Object(n.createElement)(u.CheckboxControl,{checked:t.in_contact_timezone,label:Object(l.__)("In Contact Timezone","wp-marketing-automations"),onChange:function(e){me(Rt(Rt({},fe),{},{variable_field:Rt(Rt({},fe.variable_field),{},{in_contact_timezone:e})}))}}))))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-delay-field bwf-delay-sidebar-custom-field"},Object(n.createElement)("div",{className:"bwf-delay-skip-step bwf-specific-date"},Object(n.createElement)("div",{className:"bwf-specific-date "+(Object(b.mb)()?"":"bwf-delay-no-pro")},Object(n.createElement)(u.CheckboxControl,{checked:a,label:Object(l.__)("Delay for certain days from field date","wp-marketing-automations"),onChange:function(e){Object(b.mb)()?me(Rt(Rt({},fe),{},{enable_time_delay:e})):x("showProModal",!0)}}))),a&&Object(n.createElement)("div",{className:"bwf-pt-0 bwf-pb-0 bwf-delay-sidebar-custom-delay-wrap"},Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full"},Object(n.createElement)("div",{className:"bwf-delay-duration bwf-w-210 "+(ye("custom_field")&&parseInt(i.duration)<0?"has-error":"")},Object(n.createElement)(u.TextControl,{className:"bwf-h-36",type:"number",value:i.duration,onChange:function(e){return me(Rt(Rt({},fe),{},{time_delay:Rt(Rt({},fe.time_delay),{},{duration:e})}))},min:1,placeholder:Object(l.__)("2","wp-marketing-automations")})),Object(n.createElement)("div",{className:"bwf-delay-type bwf-w-210"},Object(n.createElement)(u.SelectControl,{value:i.type,className:"bwf_w_full",options:[{value:"days",label:"Days"},{value:"weeks",label:"Weeks"}],onChange:function(e){return me(Rt(Rt({},fe),{},{time_delay:Rt(Rt({},fe.time_delay),{},{type:e})}))}})),Object(n.createElement)("div",{className:"bwf-delay-timing bwf-w-170"},Object(n.createElement)(u.SelectControl,{value:i.timing,className:"bwf_w_full",options:[{value:"before",label:"Before"},{value:"after",label:"After"}],onChange:function(e){return me(Rt(Rt({},fe),{},{time_delay:Rt(Rt({},fe.time_delay),{},{timing:e})}))}}))))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-delay-skip-step bwf-specific-date"},Object(n.createElement)("div",{className:"bwf-specific-date "+(Object(b.mb)()?"":"bwf-delay-no-pro")},Object(n.createElement)(u.CheckboxControl,{checked:m,label:Object(l.__)("Jump to step if time has passed","wp-marketing-automations"),onChange:function(e){Object(b.mb)()?me(Rt(Rt({},fe),{},{enable_step_skip:e})):x("showProModal",!0)}}))),m&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-delay-skip-step-select bwf-delay-field "+(ye("variable")&&""==d.step?"has-error":"")},Object(n.createElement)(u.SelectControl,{value:d.step,className:"bwf_w_full",options:v,onChange:function(e){return me(Rt(Rt({},fe),{},{skip_to_step:Rt(Rt({},fe.skip_to_step),{},{step:e,name:y[e]})}))}}),ye("variable")&&""==d.step&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"has-bwfan-error"},"Please choose the target step if time passes.")))),""!==O&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-single-automation-notice is-info"},O)))):Object(n.createElement)(n.Fragment,null));default:return Object(n.createElement)(n.Fragment,null)}var e,t,r,a,o,i,c,s,f,m,p,d,h,y,v,O}(),liteDummyData:{2:Object(n.createElement)("div",{className:"bwf-pl-30 bwf-lite-restrict-section"},Object(n.createElement)("div",{className:"bwf-specific-date-time-delay"},Object(n.createElement)("div",{className:"bwf-specific-date bwf_w_full bwf-h-36 bwf-mt-10"},Object(n.createElement)("div",{className:"bwf-delay-field ",style:{pointerEvents:"none"}},Object(n.createElement)(Nt.a,{date:null,dateFormat:"MM/DD/YYYY",onUpdate:function(){},text:"",iconRight:!0,disabled:!0}))),Object(n.createElement)("div",{className:"bwf-specific-time bwf_w_full"},Object(n.createElement)("div",{className:"bwf-delay-field "},Object(n.createElement)("input",{type:"time",value:"",disabled:!0,onChange:function(){},className:"bwf-h-36"}))),Object(n.createElement)("div",{className:"bwf-specific-date bwf-w-210 "},Object(n.createElement)(u.CheckboxControl,{checked:!1,disabled:!0,label:Object(l.__)("In Contact Timezone","wp-marketing-automations"),onChange:function(){}}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-specific-date"},Object(n.createElement)("div",{className:"bwf-specific-date "},Object(n.createElement)(u.CheckboxControl,{checked:!1,disabled:!0,label:Object(l.__)("Jump to step if time has passed","wp-marketing-automations"),onChange:function(){}}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-specific-date "},Object(n.createElement)(u.SelectControl,{value:"",disabled:!0,className:"bwf_w_full",options:[],onChange:function(){}})),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-single-automation-notice is-info no-icon"},Object(n.createElement)("b",null,"This feature is only for licensed Pro users.")," ",Object(n.createElement)("a",{target:"__blank",className:"bwf-a-no-underline",href:"https://funnelkit.com/autonami-lite-upgrade/?utm_source=WordPress&utm_medium=Get+PRO+Delay+Step&utm_campaign=Lite+Plugin"},"Learn More"))),3:Object(n.createElement)("div",{className:"bwf-pl-30 bwf-lite-restrict-section"},Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-delay-field bwf-delay-select-field-wrap"},Object(n.createElement)("div",{className:"bwf-pt-0 bwf-pb-0"},Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full align-start"},Object(n.createElement)("div",{className:"bwf-delay-field-select bwf-w-210 "},Object(n.createElement)(u.SelectControl,{value:"",className:"bwf_W_full",options:[{label:"Select",value:""}],onChange:function(){},disabled:!0})),Object(n.createElement)("div",{className:"bwf-delay-occurrence bwf-delay-field bwf-w-210 "},Object(n.createElement)(u.SelectControl,{value:"",className:"bwf_w_full",options:[{label:"Select",value:""}],onChange:function(){},disabled:!0}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full"},Object(n.createElement)("div",{className:"bwf-delay-select-field-time bwf-w-210"},Object(n.createElement)("input",{type:"time",value:"",disabled:!0,className:"bwf-w-210 bwf-h-36",onChange:function(){}})),Object(n.createElement)("div",{className:"bwf-delay-select-field-timezone bwf-w-210"},Object(n.createElement)(u.CheckboxControl,{checked:!1,disabled:!0,label:Object(l.__)("In Contact Timezone","wp-marketing-automations"),onChange:function(){}}))))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-delay-field bwf-delay-sidebar-custom-field"},Object(n.createElement)("div",{className:"bwf-delay-skip-step bwf-specific-date"},Object(n.createElement)("div",{className:"bwf-specific-date "},Object(n.createElement)(u.CheckboxControl,{checked:!1,label:Object(l.__)("Delay for certain days from field date","wp-marketing-automations"),onChange:function(){},disabled:!0}))),Object(n.createElement)("div",{className:"bwf-pt-0 bwf-pb-0 bwf-delay-sidebar-custom-delay-wrap"},Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full"},Object(n.createElement)("div",{className:"bwf-delay-duration bwf-w-210 "},Object(n.createElement)(u.TextControl,{className:"bwf-h-36",type:"number",disabled:!0,value:"",onChange:function(){},min:1,placeholder:Object(l.__)("Enter","wp-marketing-automations")})),Object(n.createElement)("div",{className:"bwf-delay-type bwf-w-210"},Object(n.createElement)(u.SelectControl,{value:"",className:"bwf_w_full",options:[{label:"Select",value:""}],onChange:function(){},disabled:!0})),Object(n.createElement)("div",{className:"bwf-delay-timing bwf-w-170"},Object(n.createElement)(u.SelectControl,{value:"",disabled:!0,className:"bwf_w_full",options:[],onChange:function(){}}))))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-delay-skip-step bwf-specific-date"},Object(n.createElement)("div",{className:"bwf-specific-date "},Object(n.createElement)(u.CheckboxControl,{checked:!1,label:Object(l.__)("Jump to step if time has passed","wp-marketing-automations"),disabled:!0,onChange:function(){}}))),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-single-automation-notice is-info no-icon"},Object(n.createElement)("b",null,"This feature is only for licensed Pro users.")," ",Object(n.createElement)("a",{target:"__blank",className:"bwf-a-no-underline",href:"https://funnelkit.com/autonami-lite-upgrade/?utm_source=WordPress&utm_medium=Get+PRO+Delay+Step&utm_campaign=Lite+Plugin"},"Learn More")))}}),O&&Object(n.createElement)("div",{className:"bwf-single-automation-notice"},"There can be contacts queued at this step, new settings will apply to all of them."))),Object(n.createElement)("div",{className:"wr_footer"},Object(n.createElement)(u.Button,{isTertiary:!0,onClick:function(){return k(!1)}},Object(l.__)("Cancel")),Object(n.createElement)(u.Button,{isPrimary:!0,onClick:pe,isBusy:C},Object(l.__)("Save"))))};r(1168);function Zt(){return(Zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Kt=function(e){var t=e.type,r=void 0===t?"text":t,a=e.value,o=e.onFilterChange,i=e.extraProps,c=void 0===i?{}:i,l=Object(n.useContext)(b.b),s=function(){return!!(l&&l.hasOwnProperty("errorList")&&l.errorList&&""==a)};return Object(n.createElement)("div",{className:"bwf-filters-type bwf-filters-type-text "+(s()?"has-error ":"")},Object(n.createElement)(u.TextControl,Zt({type:r,className:"bwf-filters-text-input",onChange:o,value:a},c)),s()&&Object(n.createElement)("div",{className:"has-bwfan-error"},"This is a required field"))},er=function(e){var t=e.value,r=e.onFilterChange,a=e.options,o=Object(n.useContext)(b.b),i=function(){return!!(o&&o.hasOwnProperty("errorList")&&o.errorList&&""==t)};return Object(n.createElement)("div",{className:"bwf-filters-type bwf-filters-type-text "+(i()?"has-error ":"")},Object(n.createElement)(u.SelectControl,{classname:"bwf-filters-select-input",onChange:r,options:a,value:t}),i()&&Object(n.createElement)("div",{className:"has-bwfan-error"},"This is a required field"))};function tr(e){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(r),!0).forEach((function(t){ar(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ar(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==tr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===tr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ir(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ir(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cr=function(e){var t=e.value,r=e.onFilterChange,a=e.rule,i=Object(n.useContext)(b.b),c=or(Object(n.useState)(!1),2),l=c[0],s=c[1],u=function(e){r(e)};Object(n.useEffect)((function(){s(!0)}),[]),Object(n.useEffect)((function(){l&&r("between"===a?{to:"",from:""}:"")}),[a]);var f=function(){return!!(i&&i.hasOwnProperty("errorList")&&i.errorList&&("between"!==a&&""==t||"between"===a&&(""==t.to||""==t.from)))};return Object(n.createElement)("div",{className:"bwf-filters-type bwf-filters-type-date bwf-rule-"+a+"  "+("between"!==a&&f()?"has-error ":"")},"between"==a?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:f()&&""==t.from?"has-error ":""},Object(n.createElement)(Nt.a,{className:"bwf-filters-date-input",date:Object(o.isEmpty)(t)||!t.hasOwnProperty("from")||Object(o.isEmpty)(t.from)?"":je()(t.from),dateFormat:"MM/DD/YYYY",onUpdate:function(e){return u(nr(nr({},t),{},{from:e.text}))},text:t.hasOwnProperty("from")?t.from:"",iconRight:!0}),f()&&""==t.from&&Object(n.createElement)("div",{className:"has-bwfan-error"},"This is a required field")),Object(n.createElement)("span",null,"and"),Object(n.createElement)("div",{className:f()&&""==t.to?"has-error ":""},Object(n.createElement)(Nt.a,{className:"bwf-filters-date-input",date:Object(o.isEmpty)(t)||!t.hasOwnProperty("to")||Object(o.isEmpty)(t.to)?"":je()(t.to),dateFormat:"MM/DD/YYYY",onUpdate:function(e){return u(nr(nr({},t),{},{to:e.text}))},text:t.hasOwnProperty("to")?t.to:"",iconRight:!0}),f()&&""==t.to&&Object(n.createElement)("div",{className:"has-bwfan-error"},"This is a required field"))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(Nt.a,{className:"bwf-filters-date-input",date:Object(o.isEmpty)(t)?"":je()(t),dateFormat:"MM/DD/YYYY",onUpdate:function(e){return u(e.text)},text:t,iconRight:!0}),f()&&Object(n.createElement)("div",{className:"has-bwfan-error"},"This is a required field")))},lr=r(27);function sr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ur(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ur(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fr=function(e){var t=e.type,r=e.value,a=void 0===r?[]:r,i=e.onFilterChange,c=e.emptySearch,l=void 0!==c&&c,s=e.rule,u=void 0===s?"":s,f=Object(n.useContext)(b.b),m=sr(Object(n.useState)(u),2),p=m[0],d=m[1];Object(n.useEffect)((function(){["contains","not_contains"].includes(u)!==["contains","not_contains"].includes(p)&&i([]),d(u)}),[u]);var h=function(){return!!(f&&f.hasOwnProperty("errorList")&&f.errorList&&(""==a||Array.isArray(a)&&Object(o.isEmpty)(a)))};return Object(n.createElement)("div",{className:"bwf-filters-type "+(h()?"has-error ":"")},Object(n.createElement)(lr.a,{className:"bwf-filters-search-input",onChange:i,autocompleter:t,placeholder:"Search",onRemoveTag:function(e,t){var r=a.filter((function(r){return!(r.key==e&&r.label==t)}));i(r)},selected:a,inlineTags:!1,showClearButton:!0,bwfEnableEmptySearch:l,allowFreeTextSearch:["contains","not_contains"].includes(u)}),h()&&Object(n.createElement)("div",{className:"has-bwfan-error"},"This is a required field"))};function mr(e){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?br(Object(r),!0).forEach((function(t){dr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):br(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==mr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===mr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hr=function(e){var t=e.type,r=e.value,a=void 0===r?{}:r,i=e.value,c=e.onFilterChange,l=a.search,s=void 0===l?[]:l,f=a.qty,m=void 0===f?0:f,p=Object(n.useContext)(b.b);Object(n.useEffect)((function(){c(i)}),[]);var d=function(e){if(p&&p.hasOwnProperty("errorList")&&p.errorList)switch(e){case"qty":if(!i.hasOwnProperty(e)||!parseInt(i.qty)>0)return!0;break;case"search":if(!i.hasOwnProperty(e)||""==i[e]||Array.isArray(i[e])&&Object(o.isEmpty)(i[e])||null==i[e]||Object(o.isEmpty)(i[e]))return!0}return!1};return Object(n.createElement)("div",{className:"bwf-product-qty-wrapper"},Object(n.createElement)("div",{className:"bwf-filters-type "+(d("qty")?"has-error ":"")},Object(n.createElement)(u.TextControl,{type:"number",value:m,onChange:function(e){return c(pr(pr({},i),{},{qty:e}))},className:"bwf-product-qty-text",min:1}),d("qty")&&Object(n.createElement)("div",{className:"has-bwfan-error"},"This is a required field")),Object(n.createElement)("div",{className:"bwf-filters-type "+(d("search")?"has-error ":"")},Object(n.createElement)(lr.a,{className:"bwf-filters-search-input",onChange:function(e){return c(pr(pr({},i),{},{search:e}))},autocompleter:t,placeholder:"Search",onRemoveTag:function(e){var t=i.search.filter((function(t){return t.key!=e}));c(pr(pr({},i),{},{search:t}))},selected:s,inlineTags:!0,showClearButton:!0,bwfMaintainSingleTerm:!0}),!d("qty")&&d("search")&&Object(n.createElement)("div",{className:"has-bwfan-error"},"This is a required field")))};function yr(e){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(r),!0).forEach((function(t){wr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==yr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===yr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jr=function(e){var t=e.value,r=void 0===t?[]:t,a=e.onFilterChange,i=e.options,c=void 0===i?[]:i,l=e.rule,s=e.rules,f=e.setFilterData,m=e.label,p=e.fieldData,d=Object(n.useContext)(b.b),h=function(e){return!!(d&&d.hasOwnProperty("errorList")&&d.errorList&&(!r.hasOwnProperty(e)||""==r[e]||Array.isArray(r[e])&&Object(o.isEmpty)(r[e])||null==r[e]||Object(o.isEmpty)(r[e])))};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-custom-filter-rules"},Object(n.createElement)("div",{className:"bwf-custom-filter-label"},Object(n.createElement)("b",null," ",m," ")),Object(n.createElement)("div",{className:"bwf-filters-type "+(h(0)?"has-error ":"")},Array.isArray(c)&&c.length>0?Object(n.createElement)(u.SelectControl,{className:"bwf-key-value-key-select",options:c,onChange:function(e){return a([e,r[1]])},value:r.length?r[0]:""}):Object(n.createElement)(u.TextControl,{type:"text",onChange:function(e){return a([e,r[1]])},className:"bwf-key-value-key-text",value:r.length?r[0]:""}),h(0)&&Object(n.createElement)("div",{className:"has-bwfan-error"},"This is a required field"))),Object(n.createElement)("div",{className:"bwf-custom-filter-input"},Object(n.createElement)("div",{className:"bwf-custom-filter-label"},Object(n.createElement)("b",null,"Operator"),!["is_blank","is_not_blank"].includes(l)&&Object(n.createElement)("b",null,"Value")),Object(n.createElement)("div",{className:"bwf-product-qty-wrapper "},Object(n.createElement)(u.SelectControl,{className:"bwf-custom-filter-rule-select",options:s,value:l||"",onChange:function(e){f(Or(Or({},p),{},{rule:e}))}}),["is_blank","is_not_blank"].includes(l)?Object(n.createElement)("div",null):Object(n.createElement)("div",{className:"bwf-filters-type "+(h(1)?"has-error ":"")},Object(n.createElement)(u.TextControl,{type:"text",onChange:function(e){return a([r[0],e])},className:"bwf-key-value-value-text",value:r.length&&r.length>1?r[1]:""}),!h(0)&&h(1)&&Object(n.createElement)("div",{className:"has-bwfan-error"},"This is a required field")))))},gr=r(56);function Er(e){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(r),!0).forEach((function(t){kr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Er(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Er(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pr=function(e){var t=e.value,r=e.onFilterChange,a=e.rule,i=Object(n.useContext)(b.b),c=Sr(Object(n.useState)(!1),2),l=c[0],s=c[1],u=function(e){r(e)};Object(n.useEffect)((function(){s(!0)}),[]),Object(n.useEffect)((function(){l&&r("between"===a?{to:"",from:""}:"")}),[a]);var f=function(){return!!(i&&i.hasOwnProperty("errorList")&&i.errorList&&("between"!==a&&""==t||"between"===a&&(""==t.to||""==t.from)))};return Object(n.createElement)("div",{className:"bwf-filters-type bwf-filters-type-days bwf-rule-"+a+"  "+("between"!==a&&f()?"has-error ":"")},"between"==a?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:f()&&""==t.from?"has-error ":""},Object(n.createElement)(gr.a,{className:"bwf-filters-day-input",value:Object(o.isEmpty)(t)||!t.hasOwnProperty("from")||Object(o.isEmpty)(t.from)?"":t.from,type:"number",suffix:"days",onChange:function(e){return u(Nr(Nr({},t),{},{from:e}))}}),f()&&""==t.from&&Object(n.createElement)("div",{className:"has-bwfan-error"},"This is a required field")),Object(n.createElement)("span",null,"to"),Object(n.createElement)("div",{className:f()&&""==t.to?"has-error ":""},Object(n.createElement)(gr.a,{className:"bwf-filters-day-input",value:Object(o.isEmpty)(t)||!t.hasOwnProperty("to")||Object(o.isEmpty)(t.to)?"":t.to,type:"number",suffix:"days",onChange:function(e){return u(Nr(Nr({},t),{},{to:e}))}}),f()&&""==t.to&&Object(n.createElement)("div",{className:"has-bwfan-error"},"This is a required field"))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(gr.a,{className:"bwf-filters-day-input",value:Object(o.isEmpty)(t)?"":t,type:"number",suffix:"days",onChange:function(e){return u(e)}}),f()&&Object(n.createElement)("div",{className:"has-bwfan-error"},"This is a required field")))},Lr=r(19),Cr=(r(1169),r(50)),Ar=r(58),Tr=["label","className","selected","options","multiple","onBlur","onChange","onSearch","onFocus","optionKey","isLoading","optionLabel","placeholder","searchPlaceholder"];function Ir(e){return function(e){if(Array.isArray(e))return Mr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Fr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||Fr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fr(e,t){if(e){if("string"==typeof e)return Mr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mr(e,t):void 0}}function Mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Gr(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var zr=null,qr=Object(Lr.compose)([Lr.withInstanceId])((function(e){e.label;var t=e.className,r=e.selected,a=void 0===r?[]:r,i=e.options,f=void 0===i?[]:i,m=e.multiple,p=void 0!==m&&m,d=e.onBlur,h=(void 0===d&&o.noop,e.onChange),y=void 0===h?o.noop:h,v=e.onSearch,O=void 0===v?o.noop:v,w=e.onFocus,j=(void 0===w&&o.noop,e.optionKey,e.isLoading),g=void 0===j||j,E=(e.optionLabel,e.placeholder),_=void 0===E?Object(l.__)("Select"):E,N=e.searchPlaceholder,k=void 0===N?Object(l.__)("Search…"):N,S=Gr(e,Tr),x=Dr(Object(n.useState)(!1),2),P=x[0],L=x[1],C=Dr(Object(n.useState)(""),2),A=C[0],T=C[1],I=Dr(Object(n.useState)({}),2),D=I[0],F=I[1],M=S.instanceId,G="inspector-searchlist-".concat(M),z=Object(n.useRef)(),q=c()("bwf-searchlist-component",t);Object(b.Kb)(z,(function(){return L(!1)})),Object(n.useEffect)((function(){clearTimeout(zr),zr=setTimeout((function(){O(A)}),400)}),[A]),Object(n.useEffect)((function(){return(z.current.closest(".components-modal__screen-overlay")||z.current.closest(".wr-expanded "))&&(Y(),window.addEventListener("resize",B),window.addEventListener("scroll",B)),function(){window.removeEventListener("resize",B),window.removeEventListener("scroll",B)}}),[]);var B=function(){var e;clearTimeout(e),e=setTimeout((function(){Y()}),0)},Y=function(){var e,t,r=0,n="350px",a="unset";if(z&&z.current){var o=z.current.getBoundingClientRect(),i=o.x,c=o.bottom,l=o.width,s=o.y;if(0>c)return void F({});var u=window.innerHeight,f=u-c-10;t="".concat(i,"px"),r="".concat(l,"px"),e="".concat(c+6,"px"),250<f?n=350<f?"350px":"".concat(f,"px"):(n=350<s?"330px":"".concat(s-30,"px"),e="unset",a="".concat(u-s+20,"px"))}F({top:e,left:t,bottom:a,width:r,maxHeight:n,position:"fixed",right:"unset",zIndex:1e8,overflowY:"auto"})},R=function(e){var t=Object(o.findIndex)(a,{id:e});y([].concat(Ir(a.slice(0,t)),Ir(a.slice(t+1))))},U=Object(n.useCallback)((function(){var e="";return Object(n.createElement)(n.Fragment,null,f.map((function(t,r){var i=t.id,c=t.name,l=t.title;if(-1!==Object(o.findIndex)(a,{id:i}))return Object(n.createElement)("span",{key:r});var s=e!==l;return e=l,Object(n.createElement)("div",{className:"bwf-searchlist-option",key:r},l&&s&&Object(n.createElement)("div",{className:"bwf-searchlist-option-parent"},l),Object(n.createElement)("div",{className:"bwf-searchlist-option-label",onClick:function(){return function(e){if(L(!1),e.hasOwnProperty("id")&&e.hasOwnProperty("name")){var t=Ir(a);p?t.push({id:e.id,name:e.name}):t=[{id:e.id,name:e.name}],y(t)}}(t)}},c))})))}),[f]);return Object(n.createElement)(u.BaseControl,{className:q,id:G},Object(n.createElement)("div",{className:"bwf-searchlist-field",ref:z},Object(n.createElement)("div",{className:c()("bwf-searchlist-controller"),onClick:function(){return L(!0)}},Object(n.createElement)("span",{className:"bwf-searchlist-selected"},_),Object(n.createElement)(s.a,{icon:P?"tailless-arrow-up":"tailless-arrow-down",width:"20",height:"20"})),!Object(o.isEmpty)(a)&&Object(n.createElement)("div",{className:"bwf-searchlist-values"},Object(n.createElement)(n.Fragment,null,a.map((function(e,t){return Object(n.createElement)(Ar.a,{key:t,id:e.id,label:e.name,remove:R})})))),P&&Object(n.createElement)("div",{className:"bwf-searchlist-popup",style:D},Object(n.createElement)("div",{className:"bwf-searchlist-search-field"},Object(n.createElement)(s.a,{icon:"search",size:18}),Object(n.createElement)("input",{className:"bwf-searchlist-search-field__input",type:"search",placeholder:k,onChange:function(e){return T(e.target.value)},autoComplete:"off",value:A||""})),Object(n.createElement)("div",{className:"bwf-searchlist-options"},g?Object(n.createElement)(Cr.a,{size:"xl"}):Object(o.isEmpty)(f)?Object(n.createElement)("div",{className:"bwf-searchlist-option-none"},Object(o.isEmpty)(A)||g?"":Object(l.__)("Not Found")):Object(n.createElement)("div",{className:"bwf-searchlist-option-item"},U())))))}));function Br(e){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yr(){Yr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==Br(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Br(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function Rr(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function Ur(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Hr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Vr=function(e){var t=e.value,r=void 0===t?[]:t,a=e.onFilterChange,i=(e.rule,e.input),c=Ur(Object(n.useState)(!1),2),l=c[0],s=c[1],u=Ur(Object(n.useState)([]),2),f=u[0],m=u[1],p=i.apiPath,h=void 0===p?"":p,y=i.multiple,v=void 0!==y&&y,O=function(){var e,t=(e=Yr().mark((function e(){var t,r,n,a=arguments;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",e.prev=1,s(!0),r="",Object(o.isEmpty)(t)||(r=t),e.next=7,d()({path:Object(b.m)("/automation/rules/".concat(h,"/suggestions?search=")+r),method:"GET"});case 7:n=e.sent,s(!1),Object(o.isEmpty)(n)||!n.hasOwnProperty("result")||Object(o.isEmpty)(n.result)?m([]):m(n.result),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),s(!1),console.log("Failed to load:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Rr(o,n,a,i,c,"next",e)}function c(e){Rr(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(qr,{selected:r,onChange:a,onSearch:O,multiple:v,isLoading:l,options:f}))};function $r(e){return($r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(r),!0).forEach((function(t){Qr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==$r(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==$r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===$r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xr=function(e){var t=e.filter,r=e.value,a=e.setFilterData,i=e.removeFilter,c=t.rules,l=void 0===c?[]:c,f=t.labels,m=t.input,b=f.label,p=void 0===b?"":b,d=f.valueLabel,h=void 0===d?"":d,y=r.rule,v=void 0===y?"":y,O=r.data,w=void 0===O?"":O,j=function(e){a(Wr(Wr({},r),{},{data:e}))};Object(n.useEffect)((function(){var e={};r.hasOwnProperty("data")&&Object(o.isEmpty)(r.data)&&(m.hasOwnProperty("default")&&""!==m.default&&(e.data=m.default),"product-qty"==m.component.toLowerCase()&&(e.data={search:[],qty:1}),["key-value","selectcontrol"].includes(m.component.toLowerCase())&&m.hasOwnProperty("options")&&!Object(o.isEmpty)(m.options)&&Array.isArray(m.options)&&m.options.length>0&&m.options[0].hasOwnProperty("value")&&Object(o.isEmpty)(e.data)&&("key-value"==m.component.toLowerCase()?e.data=[m.options[0].value,""]:e.data=m.options[0].value),Object(o.isEmpty)(v)&&!Object(o.isEmpty)(l)&&(e.rule=l[0].value)),Object(o.isEmpty)(e)||a(Wr(Wr({},r),e))}),[]);var g=function(){if(["is_blank","is_not_blank"].includes(v)&&"key-value"!==m.component.toLowerCase())return Object(n.createElement)(n.Fragment,null);switch(m.component.toLowerCase()){case"text":return Object(n.createElement)(Kt,{value:w,onFilterChange:j,extraProps:m.extraProps});case"number":return Object(n.createElement)(Kt,{type:"number",value:w,onFilterChange:j,extraProps:m.extraProps});case"selectcontrol":return Object(n.createElement)(er,{value:w,options:m.options,onFilterChange:j});case"key-value":return Object(n.createElement)(jr,{value:w,fieldData:r,options:m.options?m.options:[],onFilterChange:j,setFilterData:a,rules:l,rule:v,label:p});case"date":return Object(n.createElement)(cr,{value:w,onFilterChange:j,rule:v,input:m});case"search":return Object(n.createElement)(fr,{type:m.type,value:Object(o.isEmpty)(w)?[]:w,onFilterChange:j,emptySearch:!!m.emptySearch,rule:v});case"product-qty":return Object(n.createElement)(hr,{type:m.type,value:Object(o.isEmpty)(w)?{}:w,onFilterChange:j});case"days":return Object(n.createElement)(Pr,{value:w,onFilterChange:j,rule:v});case"search-list":return Object(n.createElement)(Vr,{value:w,onFilterChange:j,rule:v,input:m});default:return Object(n.createElement)(n.Fragment,null,"No input")}};return Object(n.createElement)("div",{className:"bwf-custom-advance-filter-item"},!Object(o.isEmpty)(l)&&"key-value"!==m.component.toLowerCase()&&Object(n.createElement)("div",{className:"bwf-custom-filter-rules"},Object(n.createElement)("div",{className:"bwf-custom-filter-label"},Object(n.createElement)("b",null,p)),Object(n.createElement)(u.SelectControl,{className:"bwf-custom-filter-rule-select",options:l,value:v,onChange:function(e){a(Wr(Wr({},r),{},{rule:e}))}})),"key-value"!==m.component.toLowerCase()?Object(n.createElement)("div",{className:"bwf-custom-filter-input"},Object(n.createElement)("div",{className:"bwf-custom-filter-label"},"product-qty"===m.component.toLowerCase()&&Object(n.createElement)("b",null,"Quantity"),!["is_blank","is_not_blank"].includes(v)&&Object(n.createElement)("b",null," ",Object(o.isEmpty)(l)?p:h)),g()):g(),Object(n.createElement)("div",{className:"bwf-filter-action-buttons"},Object(n.createElement)("div",{className:"bwf-custom-filter-remove",onClick:i},Object(n.createElement)(s.a,{icon:"trash",color:"#353030"}))))};function Zr(e){return function(e){if(Array.isArray(e))return tn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||en(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||en(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){if(e){if("string"==typeof e)return tn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tn(e,t):void 0}}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var rn=function(e){var t=e.filters,r=void 0===t?{}:t,a=e.value,i=void 0===a?[]:a,c=e.setValue,s=e.groupingEnabled,f=void 0!==s&&s,m=Kr(Object(n.useState)(""),2),b=m[0],p=m[1];if(Object(o.isEmpty)(r))return Object(n.createElement)(n.Fragment,null);var d=function(){return Object(n.createElement)("ul",{className:"bwf-popover-container bwf-group"},Object(n.createElement)("li",{className:"list-label"},Object(l.__)("Select Group","wp-marketing-automations")),function(){var e=[],t=[];Object.entries(r).map((function(r){var n=Kr(r,2),a=(n[0],n[1]);e.includes(a.group)||(e.push(a.group),t.push({priority:a.priority?a.priority:0,key:a.group,label:a.groupLabel}))}));return t.sort((function(e,t){return e.priority-t.priority})),t}().map((function(e,t){return Object(n.createElement)("li",{className:"list-values has-pointer",onClick:function(){return p(e.key)},key:t},e.label)})))},h=function(e){var t,a=e.onToggle;return Object(n.createElement)("ul",{className:"bwf-popover-container bwf-filters"},Object(n.createElement)("li",{className:"list-label list-values has-pointer is-back-button",onClick:function(){return p("")}},Object(l.__)("Back")),(t=[],Object.entries(r).map((function(e){var r=Kr(e,2),n=r[0],a=r[1];(Object(o.isEmpty)(b)||b===a.group)&&t.push({key:n,label:a.labels.add})})),t).map((function(e,t){return Object(n.createElement)("li",{className:"list-values has-pointer",onClick:function(){var t=Zr(i);t.push({filter:e.key,rule:"",data:""}),c(t),a()},key:t},e.label)})))};return Object(n.createElement)("div",{className:"bwf-custom-advance-filter-wrapper"},!Object(o.isEmpty)(i)&&Object(n.createElement)("div",{className:"bwf-advance-filter-value-section"},i.map((function(e,t){return!!r.hasOwnProperty(e.filter)&&Object(n.createElement)("div",{key:t},Object(n.createElement)(Xr,{filter:r[e.filter],value:e,setFilterData:function(e){var r=Zr(i);r[t]=e,c(r)},removeFilter:function(){var e=Zr(i);e.splice(t,1),c(e)},keyIndex:t}))}))),Object(n.createElement)(q.a,{className:"bwf-advance-filter-add-dropdown",position:"bottom center",focusOnMount:!0,renderToggle:function(e){var t=e.onToggle;return Object(n.createElement)("div",{className:"bwf-advance-filter-add-button",onClick:function(){p(""),t()}},Object(n.createElement)(u.Button,{className:"bwf-conditional-btn conditional-and",isSecondary:!0},Object(l.__)("AND","wp-marketing-automations")))},renderContent:function(e){return Object(n.createElement)(n.Fragment,null,f&&Object(o.isEmpty)(b)?d():h(e))}}))},nn=r(80);function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?on(Object(r),!0).forEach((function(t){ln(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):on(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ln(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==an(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==an(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===an(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sn(){sn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==an(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(an(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function un(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var bn=function(){var e=Object(n.useContext)(b.d),t=fn(Object(n.useState)(""),2),r=(t[0],t[1]),a=fn(Object(n.useState)(!1),2),i=a[0],c=a[1],p=fn(Object(n.useState)(!1),2),h=p[0],y=p[1],v=fn(Object(n.useState)(!1),2),O=v[0],w=v[1],j=fn(Object(n.useState)(""),2),g=j[0],E=j[1];Object(n.useEffect)((function(){c(!1)}),[]);var _,N,k=Object(f.a)(),S=k.showSidebar,x=k.setNodeDatabyId,P=k.setAutomationData,L=Object(m.a)(),C=L.getSidebarNodeData,A=L.getAutomationId,T=L.getNodeDataByID,I=L.getAutomationLinks,D=L.getAutomationSteps,F=L.getCount,M=L.getAutomationData,G=D(),z=I(),q=F(),B=C(),Y=A(),R=M(),U=R&&R.event?R.event:"",H=Object($.a)(U,parseInt(Y)),V=(H.isLoading,H.error,H.rules),J=!Object(o.isEmpty)(B)&&B.hasOwnProperty("data")?B.data:{},W=!Object(o.isEmpty)(J)&&J.hasOwnProperty("sidebarValues")?(_=J.sidebarValues,N=[],Object(o.isEmpty)(_)?[]:(Object.keys(_).map((function(e){var t=_[e],r=[];t.map((function(e){V.hasOwnProperty(e.filter)&&r.push(e)})),Object(o.isEmpty)(r)||N.push(r)})),N)):[],Q=!Object(o.isEmpty)(B)&&B.hasOwnProperty("id")?T(B.id):{},X=Q.stepId,Z=void 0===X?0:X,K=Q.data,ee=(void 0===K?{}:K).sidebarValues,te=function(){var t,n=(t=sn().mark((function t(){var n,a,i,l;return sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object(o.cloneDeep)(J.sidebarValues),a=[],i=!1,Object(o.isEmpty)(n)||n.map((function(e){Object(o.isEmpty)(e)||(a.push(e),e.map((function(e){var t;(t=e).hasOwnProperty("rule")&&["is_blank","is_not_blank"].includes(t.rule)||!(!t.hasOwnProperty("data")||""==t.data||null==t.data||Array.isArray(t.data)&&Object(o.isEmpty)(t.data)||V&&V.hasOwnProperty(t.filter)&&"key-value"==V[t.filter].input.component&&(""==t.data[0]||null==t.data[0]||Array.isArray(t.data[1])&&Object(o.isEmpty)(t.data[1])||""==t.data[1]||null==t.data[1]||Array.isArray(t.data[1])&&Object(o.isEmpty)(t.data[1]))||V&&V.hasOwnProperty(t.filter)&&["Date","Days"].includes(V[t.filter].input.component)&&"between"===t.rule&&(!t.data.hasOwnProperty("to")||!t.data.hasOwnProperty("from")||Object(o.isEmpty)(t.data.to)||Object(o.isEmpty)(t.data.from)))||(c(!0),i=!0,r("Some condition(s) are empty please remove them or fill them."))})))})),Object(o.isEmpty)(a)||i){t.next=23;break}if(!Object(o.isEqual)(ee,a)){t.next=9;break}return S(!1),y(!1),t.abrupt("return");case 9:return y(!0),l={data:{data:{sidebarData:a}},steps:Object(o.cloneDeep)(G).map((function(e){return e.hasOwnProperty("data")&&e.data.hasOwnProperty("sidebarValues")&&(e.data.sidebarValues={}),e})),links:z,count:q},t.prev=11,t.next=14,d()({path:Object(b.m)("/automation/".concat(Y,"/step/").concat(Z)),method:"POST",data:l}).then((function(t){if(200!==t.code)throw Error(Object(b.j)(null==t?void 0:t.message));e(t.message),J.sidebarValues=a,x(B.id,J,{step_status:1}),setTimeout((function(){S(!1)}),100),y(!1)})).catch((function(e){throw Error(Object(b.j)(null==e?void 0:e.message))}));case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(11),P("modalData",{status:!0,modalTitle:"Update Condition",error:null===t.t0||void 0===t.t0?void 0:t.t0.message}),y(!1);case 20:Object(b.fb)(e,1e3),t.next=24;break;case 23:!i&&r("Please select conditions to save.");case 24:case"end":return t.stop()}}),t,null,[[11,16]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){un(o,n,a,i,c,"next",e)}function c(e){un(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),re=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object.keys(W).length,r=Object(o.cloneDeep)(W);r[t]=[e];var n=cn(cn({},B),{},{data:cn(cn({},J),{},{sidebarValues:r})});P("sidebarNodeData",n),setTimeout((function(){E(""),w(!1)}),1)}),[W]),ne=(Object(n.useCallback)((function(e){var t=cn({},W);delete t[e];var r=cn(cn({},B),{},{data:cn(cn({},J),{},{sidebarValues:t})});P("sidebarNodeData",r)}),[W]),function(){return Object(n.createElement)("ul",{className:"bwf-popover-container bwf-group"},Object(n.createElement)("li",{className:"list-label"}," ",Object(l.__)("Select Group")),function(){var e=[],t=[];Object.entries(V).map((function(r){var n=fn(r,2),a=(n[0],n[1]);e.includes(a.group)||(e.push(a.group),t.push({priority:a.priority?a.priority:0,key:a.group,label:a.groupLabel}))}));return t.sort((function(e,t){return e.priority-t.priority})),t}().map((function(e,t){return Object(n.createElement)("li",{className:"list-values has-pointer",onClick:function(){return E(e.key)},key:t},e.label)})))}),ae=function(){return Object(n.createElement)("ul",{className:"bwf-popover-container bwf-filters"},Object(n.createElement)("li",{className:"list-label list-values has-pointer is-back-button",onClick:function(){return E("")}},Object(l.__)("Back")),(e=[],Object.entries(V).map((function(t){var r=fn(t,2),n=r[0],a=r[1];(Object(o.isEmpty)(g)||g===a.group)&&e.push({key:n,label:a.labels.add})})),e).map((function(e,t){return Object(n.createElement)("li",{className:"list-values has-pointer",onClick:function(){re({filter:e.key,rule:"",data:""})},key:t},e.label)})));var e},oe=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?"bwf-sidebar-empty-placeholder ":"";return Object(n.createElement)("div",{className:t},e&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-main-icon"},Object(n.createElement)(s.a,{icon:"conditional-placeholder",size:90})),Object(n.createElement)("div",{className:"bwf-h2"},Object(l.__)("No Condition","wp-marketing-automations-crm")),Object(n.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},Object(l.__)("Add a condition to segment and make contacts flow to different branches","wp-marketing-automations-crm"))),e&&Object(n.createElement)("div",{className:"bwf_clear_20"}),!Object(o.isEmpty)(V)&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(u.Button,{isPrimary:!0,className:e?"":"bwf-conditional-btn conditional-or",onClick:function(){return w(!0)},style:e?{}:{margin:"-38px 0px 0px 62px",position:"absolute"}},e?Object(l.__)("Add New Condition","wp-marketing-automations-crm"):Object(l.__)("OR","wp-marketing-automations-crm"),O&&Object(n.createElement)(nn.a,{className:"bwf-conditioal-group-popup "+(e?"":"bwf-conditional-or"),focusOnMount:!0,onFocusOutside:function(){return w(!1)},onClose:function(){return w(!1)}},Object(o.isEmpty)(g)?ne():ae())),e&&Object(n.createElement)("div",{className:"bwf_clear_20"})))};return Object(n.createElement)(b.b.Provider,{value:{errorList:i,setErrorList:c,stepId:Z}},Object(n.createElement)("div",{className:"wr_header"},Object(n.createElement)("div",{className:"bwf-node-icon"},Object(n.createElement)(s.a,{size:26,icon:"condition"})),Object(n.createElement)("div",{className:"wr_event_title"},Object(l.__)("Condition","wp-marketing-automations-crm")),Object(n.createElement)("div",{className:"wr_event_variant"}),Object(n.createElement)("div",{className:"wr_close bwf-cursor-pointer",onClick:function(){S(!1)}},Object(n.createElement)(s.a,{icon:"close"}))),Object(n.createElement)("div",{className:"wr_content wr-conditioal-sidebar"},Object(o.isEmpty)(W)||Object(o.isEmpty)(V)?Object(n.createElement)(n.Fragment,null,oe()):Object(n.createElement)(n.Fragment,null,Object.keys(W).map((function(e,t){return Object(n.createElement)("div",{className:"bwf-conditional-wrap",key:t},Object(n.createElement)(rn,{key:e,filters:V,groupingEnabled:!0,value:W[e],setValue:function(t){var r=Object(o.cloneDeep)(W);r[e]=t,r=r.filter((function(e){return 0!==Object.keys(e).length}));var n=cn(cn({},B),{},{data:cn(cn({},J),{},{sidebarValues:r})});P("sidebarNodeData",n)}}),t+1!==Object.keys(W).length&&Object(n.createElement)("div",{className:"bwf-conditional-rules-label-or"},Object(n.createElement)("span",{className:"bwf-line"}),Object(n.createElement)("span",{className:"bwf-rule-text"},Object(l.__)("OR","wp-marketing-automations-crm"))))})),oe(!1))),Object(n.createElement)("div",{className:"wr_footer"},Object(n.createElement)(u.Button,{isTertiary:!0,onClick:function(){return S(!1)}},Object(l.__)("Cancel")),Object(n.createElement)(u.Button,{isPrimary:!0,onClick:te,isBusy:h},Object(l.__)("Save"))))};function pn(e){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(){dn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==pn(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(pn(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function hn(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function yn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(r),!0).forEach((function(t){On(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function On(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==pn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===pn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gn=function(){var e=Object(n.useContext)(b.d),t=wn(Object(n.useState)(!1),2),r=t[0],a=t[1],i=wn(Object(n.useState)(!1),2),p=i[0],h=i[1],y=wn(Object(n.useState)(!1),2),v=y[0],O=y[1],w=Object(m.a)(),j=w.getSidebarNodeData,g=w.getNodeDataByID,E=w.getAutomationSteps,_=w.getAutomationLinks,N=w.getCount,k=w.getAutomationId,S=w.getGoals,x=Object(f.a)(),P=x.showSidebar,L=x.setNodeDatabyId,C=x.setAutomationData,A=Object(n.useRef)(null),T=wn(Object(n.useState)([]),2),I=T[0],D=T[1],F=j(),M=S().list,G=void 0===M?{}:M,z=F.data,q=F&&F.data&&F.data.benchmark&&G.hasOwnProperty(F.data.benchmark)?G[F.data.benchmark]:{},B=F&&F.data&&F.data.benchmark?F.data.benchmark:"",Y=!Object(o.isEmpty)(F.data)&&F.data.hasOwnProperty("sidebarValues")?F.data.sidebarValues:{},R=q.fields,U=void 0===R?[]:R,H=q.default_values,V=void 0===H?{}:H,$=k(),J=E(),W=_(),Q=N(),X=!Object(o.isEmpty)(F)&&F.hasOwnProperty("id")?g(F.id):{},Z=X.stepId,K=void 0===Z?0:Z,ee=X.data,te=(void 0===ee?{}:ee).sidebarValues;Object(n.useEffect)((function(){D([])}),[]);var re=vn(vn({},V),Y),ne=function(e,t,r){var n=!1,a=t.fields,o=t.relation,i=void 0===o?"OR":o;i=i.toUpperCase();try{var c=null;if("OR"===i){if(a&&Array.isArray(a))for(var l=0;l<a.length;l++){c=e[a[l].id];var s=void 0===a[l].value||a[l].value;if(Array.isArray(s)&&s.includes(c))return!0;if(""!=s&&c==s||""==s&&""!=c&&null!=c)return!0}}else"AND"==i&&a&&Array.isArray(a)&&(n=a.every((function(t){c=e[t.id];var r=void 0===t.value||t.value;return!(!Array.isArray(r)||!r.includes(c))||(""===r||c==r)&&(""!=r||""!=c&&null!=c)})))}catch(e){console.log(e)}return n},ae=function(){var t,r=(t=dn().mark((function t(r){var n;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(o.isEmpty)(ie(r))){t.next=17;break}if(!Object(o.isEqual)(te,r)){t.next=4;break}return P(!1),t.abrupt("return");case 4:return z.sidebarValues=r,a(!0),n={data:{data:{sidebarData:r}},steps:Object(o.cloneDeep)(J).map((function(e){return e.hasOwnProperty("data")&&e.data.hasOwnProperty("sidebarValues")&&(e.data.sidebarValues={}),e})),links:W,count:Q,optionUpdated:p,actionType:3},t.prev=7,t.next=10,d()({path:Object(b.m)("/automation/".concat($,"/step/").concat(K)),method:"POST",data:n}).then((function(t){if(200!==t.code)throw Error(Object(b.j)(null==t?void 0:t.message));e(t.message);var r="";t.hasOwnProperty("result")&&t.result.hasOwnProperty("desc_text")&&!Object(o.isEmpty)(t.result.desc_text)&&(r=t.result.desc_text),L(F.id,vn(vn({},z),{},{desc_text:r}),{step_status:1}),setTimeout((function(){P(!1)}),100),a(!1)})).catch((function(e){throw Error(Object(b.j)(null==e?void 0:e.message))}));case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(7),C("modalData",{status:!0,modalTitle:"Update Goal",error:null===t.t0||void 0===t.t0?void 0:t.t0.message}),a(!1);case 16:Object(b.fb)(e,1e3);case 17:case"end":return t.stop()}}),t,null,[[7,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){hn(o,n,a,i,c,"next",e)}function c(e){hn(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}(),oe=[];Object(o.isEmpty)(U)||U.forEach((function(e){e.hasOwnProperty("required")&&e.required&&oe.push(e)}));var ie=function(e){var t={};return oe.map((function(r){(!r.hasOwnProperty("toggler")||Object(o.isEmpty)(r.toggler)||ne(e,r.toggler))&&(Array.isArray(e[r.id])&&0===e[r.id].length||""===e[r.id]||void 0===e[r.id])&&(t[r.id]=r.hasOwnProperty("errorMsg")?r.errorMsg:Object(l.__)("This is required field.","wp-marketing-automations")),"bwfan_email_data"===r.id&&(!e.hasOwnProperty("bwfan_email_data")||e.bwfan_email_data.hasOwnProperty("subject")&&Object(o.isEmpty)(e.bwfan_email_data.subject))&&(t[r.id]="error")})),D(t),t};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"wr_header"},Object(n.createElement)("div",{className:"bwf-node-icon icon-goal"},Object(n.createElement)(s.a,{size:26,icon:"goal"})),Object(n.createElement)("div",{className:"wr_event_title"},q.event_name),Object(n.createElement)("div",{className:"wr_event_variant"},Object(b.mb)()&&!Object(o.isEmpty)(B)&&"crm_link_trigger"===B&&Object(n.createElement)(Ve.a,{canCreate:!0,isLinkTriggerOpen:v,setLinkTriggerOpen:O,hideButton:!1})),Object(n.createElement)("div",{className:"wr_close bwf-cursor-pointer",onClick:function(){return P(!1)}},Object(n.createElement)(s.a,{icon:"close"}))),Object(n.createElement)(b.b.Provider,{value:{errorList:I,setErrorList:D,stepId:K}},Object(n.createElement)(Ue.a,{onSubmit:function(e){ae(e)},initialValues:re,validate:function(e){return h(function(e){var t=z.sidebarValues,r=void 0===t?{}:t;if(Object(o.isEmpty)(r))return!1;var n=re.bwfan_goal_run,a=void 0===n?"":n,i=e.bwfan_goal_run;return a!==(void 0===i?"":i)&&"wait"===a}(e)),!1}},(function(e){var t=e.getInputProps,a=e.values,i=e.errors,s=e.handleSubmit;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"wr_content",ref:A},Object(n.createElement)("fieldset",null,U.map((function(e,r){return Object(n.createElement)(n.Fragment,{key:r},(Object(o.isEmpty)(e.toggler)||ne(a,e.toggler))&&e.wrap_before&&Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_before}}),e.type?Object(n.createElement)(n.Fragment,null,!1!==e.show&&(Object(o.isEmpty)(e.toggler)||ne(a,e.toggler))&&Object(n.createElement)(He.a,{input:e,formProps:t(e.id),values:a})):e.hint?Object(n.createElement)(n.Fragment,{dangerouslySetInnerHTML:{__html:e.hint},className:c()(e.class)}):null,(Object(o.isEmpty)(e.toggler)||ne(a,e.toggler))&&e.wrap_after&&Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_after}}))}))),p&&Object(n.createElement)("div",{className:"bwf-single-automation-notice"},"There can be contacts queued at this step, new settings will apply to all of them.")),Object(n.createElement)("div",{className:"wr_footer"},Object(n.createElement)(u.Button,{isTertiary:!0,onClick:function(){return P(!1)}},Object(l.__)("Cancel")),Object(n.createElement)(u.Button,{isPrimary:!0,onClick:function(){s()},isBusy:r,disabled:Object.keys(i).length},Object(l.__)("Save"))))}))))},En=r(158);function _n(e){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nn(){Nn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==_n(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(_n(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function kn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(r),!0).forEach((function(t){xn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==_n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_n(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pn(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function Ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var An=function(){var e=Object(n.useContext)(b.d),t=Ln(Object(n.useState)(!1),2),r=t[0],a=t[1],i=Object(m.a)(),p=i.getSelectedEventData,h=i.getAutomationId,y=i.getautomationMeta,v=Object(f.a)(),O=v.showSidebar,w=v.setAutomationData,j=h(),g=Object(n.useRef)(null),E=Ln(Object(n.useState)(!1),2),_=E[0],N=E[1],k=Ln(Object(n.useState)([]),2),S=k[0],x=k[1],P=y(),L=p(),C=!Object(o.isEmpty)(P)&&P.hasOwnProperty("event_meta")?P.event_meta:{},A=Object(o.isEmpty)(L)?{}:L,T=A.fields,I=void 0===T?[]:T,D=A.default_values,F=void 0===D?{}:D,M=A.need_unique_key,G=void 0!==M&&M;Object(n.useEffect)((function(){x([]),N(!1)}),[]);var z=function(e,t,r){var n=!1,a=t.fields,o=t.relation,i=void 0===o?"OR":o;i=i.toUpperCase();try{var c=null;if("OR"===i){if(a&&Array.isArray(a))for(var l=0;l<a.length;l++){c=e[a[l].id];var s=void 0===a[l].value||a[l].value;if(Array.isArray(s)&&s.includes(c))return!0;if(""!=s&&c==s||""==s&&""!=c&&null!=c)return!0}}else"AND"==i&&a&&Array.isArray(a)&&(n=a.every((function(t){c=e[t.id];var r=void 0===t.value||t.value;return!(!Array.isArray(r)||!r.includes(c))||(""===r||c==r)&&(""!=r||""!=c&&null!=c)})))}catch(e){console.log(e)}return n},q=function(){var t,r=(t=Nn().mark((function t(r){return Nn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(o.isEmpty)(Y(r))){t.next=15;break}if(!Object(o.isEqual)(C,r)){t.next=4;break}return O(!1),t.abrupt("return");case 4:return a(!0),t.prev=5,t.next=8,d()({path:Object(b.m)("/automation/".concat(j,"/")),method:"POST",data:{data:{meta:{event_meta:r},isWebhook:G}}}).then((function(t){if(200!==t.code)throw Error(Object(b.j)(null==t?void 0:t.message));e(t.message);var n=Sn({},r);G&&C.hasOwnProperty("webhook_data")&&(n.webhook_data=C.webhook_data),w("meta",Sn(Sn({},P),{},{event_meta:n})),setTimeout((function(){O(!1)}),100),a(!1)})).catch((function(e){throw Error(Object(b.j)(null==e?void 0:e.message))}));case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(5),w("modalData",{status:!0,modalTitle:"Update Event",error:null===t.t0||void 0===t.t0?void 0:t.t0.message}),a(!1);case 14:Object(b.fb)(e,1e3);case 15:case"end":return t.stop()}}),t,null,[[5,10]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){Pn(o,n,a,i,c,"next",e)}function c(e){Pn(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}(),B=[];Object(o.isEmpty)(I)||I.forEach((function(e){e.hasOwnProperty("required")&&e.required&&B.push(e)}));var Y=function(e){var t={};return B.map((function(r){(!r.hasOwnProperty("toggler")||Object(o.isEmpty)(r.toggler)||z(e,r.toggler))&&(Array.isArray(e[r.id])&&0===e[r.id].length||""===e[r.id]||void 0===e[r.id])&&(t[r.id]=r.hasOwnProperty("errorMsg")?r.errorMsg:Object(l.__)("This is required field.","wp-marketing-automations")),"bwfan_email_data"===r.id&&(!e.hasOwnProperty("bwfan_email_data")||e.bwfan_email_data.hasOwnProperty("subject")&&Object(o.isEmpty)(e.bwfan_email_data.subject))&&(t[r.id]="error"),"bwf_form_submit"===r.type&&(e.hasOwnProperty("bwfan-form-field-map")&&e["bwfan-form-field-map"].hasOwnProperty("bwfan_email_field_map")&&""!==e["bwfan-form-field-map"].bwfan_email_field_map||(t["bwfan-form-email-field-map"]="error"))})),x(t),t};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"wr_header"},Object(n.createElement)("div",{className:"bwf-node-icon icon-start"},Object(n.createElement)(s.a,{size:22,icon:"rocket"})),Object(n.createElement)("div",{className:"wr_event_title"},L.hasOwnProperty("event_name")?L.event_name:""),Object(n.createElement)("div",{className:"wr_event_variant"}),Object(n.createElement)("div",{className:"wr_close bwf-cursor-pointer",onClick:function(){return O(!1)}},Object(n.createElement)(s.a,{icon:"close"}))),Object(n.createElement)(b.b.Provider,{value:{errorList:S,setErrorList:x}},Object(n.createElement)(Ue.a,{onSubmit:function(e){q(e)},initialValues:Sn(Sn({},F),C),validate:function(){return!1}},(function(e){var t=e.getInputProps,a=e.values,i=e.errors,s=e.handleSubmit;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"wr_content",ref:g},Object(n.createElement)("fieldset",null,I.map((function(e,r){return Object(n.createElement)(n.Fragment,{key:r},(Object(o.isEmpty)(e.toggler)||z(a,e.toggler))&&e.wrap_before&&Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_before}}),e.type?Object(n.createElement)(n.Fragment,null,!1!==e.show&&(Object(o.isEmpty)(e.toggler)||z(a,e.toggler))&&Object(n.createElement)(He.a,{input:e,formProps:t(e.id),values:a})):e.hint?Object(n.createElement)(n.Fragment,{dangerouslySetInnerHTML:{__html:e.hint},className:c()(e.class)}):null,(Object(o.isEmpty)(e.toggler)||z(a,e.toggler))&&e.wrap_after&&Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_after}}))})))),Object(n.createElement)("div",{className:"wr_footer"},Object(n.createElement)(u.Button,{isTertiary:!0,onClick:function(){return O(!1)}},Object(l.__)("Cancel")),Object(n.createElement)(u.Button,{isPrimary:!0,onClick:function(){s()},isBusy:r,disabled:Object.keys(i).length},Object(l.__)("Save"))))}))),Object(b.mb)()&&Object(n.createElement)(En.a,{isOpen:_,setOpenTags:N}))};function Tn(e){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function In(){In=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==Tn(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Tn(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function Dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(r),!0).forEach((function(t){Mn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Tn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Tn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gn(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function zn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Bn=function(){var e=zn(Object(n.useState)(!1),2),t=e[0],r=e[1],a=zn(Object(n.useState)(!1),2),i=a[0],c=a[1],p=zn(Object(n.useState)({step:"",name:""}),2),h=p[0],y=p[1],v=Object(n.useContext)(b.d),O=Object(f.a)(),w=O.showSidebar,j=O.setNodeDatabyId,g=O.getElementsAfterStep,E=O.setAutomationData,_=Object(m.a)(),N=_.getSidebarNodeData,k=_.getNodeDataByID,S=_.getAutomationId,x=_.getAutomationLinks,P=_.getAutomationSteps,L=_.getCount,C=_.getActionsList,A=_.getGoals,T=N(),I=S(),D=P(),F=x(),M=L(),G=C(),z=A(),q=!Object(o.isEmpty)(T)&&T.hasOwnProperty("id")?k(T.id):{},B=(q.id,q.stepId),Y=void 0===B?0:B,R=q.data,U=(void 0===R?{}:R).sidebarValues;Object(n.useEffect)((function(){r({}),r(!1)}),[]);var H=!Object(o.isEmpty)(T)&&T.hasOwnProperty("data")?T.data:{},V=!Object(o.isEmpty)(H)&&H.hasOwnProperty("sidebarValues")?H.sidebarValues:{};Object(n.useEffect)((function(){V.hasOwnProperty("jump_to")&&!Object(o.isEmpty)(V.jump_to)&&y(V.jump_to)}),[V]);var $={action:"Action",wait:"Delay",conditional:"Conditional",exit:"Exit",benchmark:"Goal"},J=function(){var e=g("start");e=e.filter((function(e,t,r){return r.indexOf(e)===t}));var t={stepsOptArr:[],stepsOptions:[{value:"",label:Object(l.__)("Select Step","wp-marketing-automations")}]};return Object(o.isEmpty)(e)||(e.map((function(e){var r=k(e),n=r.stepId,a=void 0===n?0:n,o=r.id,i=void 0===o?0:o;if(!["yesNoNode","end","exit","jump"].includes(r.type)&&!t.stepsOptArr.hasOwnProperty(e)){var c=["Step"];c.push(i),$.hasOwnProperty(r.type)&&c.push(" : "+$[r.type]),"action"==r.type&&r.hasOwnProperty("data")&&G.list.hasOwnProperty(r.data.selected)&&G.list[r.data.selected].hasOwnProperty("action_name")&&(G.list[r.data.selected].hasOwnProperty("integration_nicename")?c.push(" - "+G.list[r.data.selected].integration_nicename+" : "):c.push(" - "),c.push(G.list[r.data.selected].action_name)),"benchmark"==r.type&&r.hasOwnProperty("data")&&z.list.hasOwnProperty(r.data.benchmark)&&z.list[r.data.benchmark].hasOwnProperty("event_name")&&(z.list[r.data.benchmark].hasOwnProperty("source_label")&&c.push(z.list[r.data.benchmark].source_label+" : "),c.push(z.list[r.data.benchmark].event_name)),t.stepsOptArr[a]=c.join(" "),t.stepsOptions.push({value:a,label:c.join(" ")})}})),t.stepsOptArr.end="End Automation",t.stepsOptions.push({value:"end",label:"End Automation"})),t}(),W=J.stepsOptArr,Q=J.stepsOptions,X=function(){var e,t=(e=In().mark((function e(){var t,n;return In().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.hasOwnProperty("step")&&""!=h.step&&h.hasOwnProperty("name")&&""!=h.name){e.next=5;break}return r(!0),e.abrupt("return");case 5:r(!1);case 6:if(t=Fn(Fn({},V),{},{jump_to:h}),!Object(o.isEqual)(U,t)){e.next=10;break}return w(!1),e.abrupt("return");case 10:return e.prev=10,c(!0),n={data:{data:{sidebarData:t}},steps:Object(o.cloneDeep)(D).map((function(e){return e.hasOwnProperty("data")&&e.data.hasOwnProperty("sidebarValues")&&(e.data.sidebarValues={}),e})),links:F,count:M},e.next=15,d()({path:Object(b.m)("/automation/".concat(I,"/step/").concat(Y)),method:"POST",data:n}).then((function(e){if(200!==e.code)throw Error(Object(b.j)(null==e?void 0:e.message));v(e.message),j(T.id,Fn(Fn({},H),{},{sidebarValues:t}),{step_status:1}),setTimeout((function(){w(!1)}),100),c(!1)})).catch((function(e){throw Error(Object(b.j)(null==e?void 0:e.message))}));case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(10),E("modalData",{status:!0,modalTitle:"Update Jump",error:null===e.t0||void 0===e.t0?void 0:e.t0.message}),c(!1);case 21:Object(b.fb)(v,1e3);case 22:case"end":return e.stop()}}),e,null,[[10,17]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Gn(o,n,a,i,c,"next",e)}function c(e){Gn(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"wr_header"},Object(n.createElement)("div",{className:"bwf-node-icon icon-jump"},Object(n.createElement)(s.a,{size:28,icon:"jump"})),Object(n.createElement)("div",{className:"wr_event_title"},Object(n.createElement)("span",null,Object(l.__)("Jump","wp-marketing-automations"))),Object(n.createElement)("div",{className:"wr_event_variant"}),Object(n.createElement)("div",{className:"wr_close bwf-cursor-pointer",onClick:function(){w(!1)}},Object(n.createElement)(s.a,{icon:"close"}))),Object(n.createElement)("div",{className:"wr_content"},Object(n.createElement)("div",{className:"bwf-jump-wrap"},Object(n.createElement)("div",{className:"bwf-jump-skip-step-select "+(t?"has-error":"")},Object(n.createElement)("div",{className:"bwf-w-120 bwf_bold bwf-mb-8"},Object(l.__)("Jump To","wp-marketing-automations")),Object(n.createElement)(u.SelectControl,{value:h.step,className:"bwf_w_full",options:Q,onChange:function(e){y({step:e,name:e?W[e]:""})}}),t&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"has-bwfan-error"},"This is a required field."))))),Object(n.createElement)("div",{className:"wr_footer"},Object(n.createElement)(u.Button,{isTertiary:!0,onClick:function(){return w(!1)}},Object(l.__)("Cancel")),Object(n.createElement)(u.Button,{isPrimary:!0,onClick:X,isBusy:i},Object(l.__)("Save"))))},Yn=function(){var e=Object(m.a)(),t=e.openSidebar,r=e.getSidebarNodeData,a=t(),o=r(),i=o.type,c=void 0===i?"":i,s=o.data,u=(void 0===s?{}:s).selected,f=void 0===u?"":u;return a?Object(n.createElement)("div",{className:"bwf-wl-wrap"},Object(n.createElement)("div",{className:"wl-sidebar-overlay step-"+c+"-wrap ",onClick:function(e){return e.preventDefault()}}),Object(n.createElement)("div",{className:"wr wr-expanded step-"+c+"-wrap-content "+("wp_sendemail"==f?"bwf-mail-action":"")},function(){switch(c){case"start":return Object(n.createElement)(An,null);case"action":return Object(n.createElement)(vt,null);case"conditional":return Object(n.createElement)(bn,null);case"wait":return Object(n.createElement)(Xt,null);case"benchmark":return Object(n.createElement)(gn,null);case"jump":return Object(n.createElement)(Bn,null);default:return Object(n.createElement)(n.Fragment,null,Object(l.__)("Node Type not registered","wp-marketing-automations-crm"))}}())):Object(n.createElement)(n.Fragment,null)},Rn=r(141),Un=r(865),Hn=r(947);function Vn(e){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $n(){$n=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==Vn(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Vn(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function Jn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(r),!0).forEach((function(t){Qn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Vn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Vn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Vn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xn(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function Zn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ea=function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e);var t=Object(n.useContext)(b.d),r=Zn(Object(n.useState)(!1),2),a=r[0],i=r[1],c=Zn(Object(n.useState)(""),2),p=c[0],h=c[1],y=Zn(Object(n.useState)(""),2),v=y[0],O=y[1],w=Zn(Object(n.useState)(!1),2),j=w[0],g=w[1],E=Object(f.a)().setAutomationData,_=(0,Object(m.a)().getAutomationData)(),N=_.ID,k=_.title;Object(n.useEffect)((function(){g(!1),h(k)}),[a]);var S=function(){var e,r=(e=$n().mark((function e(){return $n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(o.isEmpty)(p)&&p!=k){e.next=4;break}O(Object(o.isEmpty)(p)?Object(l.__)("Name is required.","wp-marketing-automations-crm"):Object(l.__)("Please change name to update.","wp-marketing-automations-crm")),e.next=14;break;case 4:return g(!0),e.prev=5,e.next=8,d()({path:Object(b.m)("/automation/".concat(N)),method:"POST",data:{data:{data:{title:p}}}}).then((function(e){if(200!==e.code)throw Error(Object(b.j)(null==e?void 0:e.message));t("Title Updated"),E("data",Wn(Wn({},_),{},{title:p})),i(!1)})).catch((function(e){throw Error(Object(b.j)(null==e?void 0:e.message))}));case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(5),g(!1),O(e.t0.message);case 14:Object(b.fb)(t,2e3);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Xn(o,n,a,i,c,"next",e)}function c(e){Xn(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",{onClick:function(){return i(!0)},style:{cursor:"pointer",lineHeight:0,marginLeft:"5px"},className:"bwf-hover-primary"},Object(n.createElement)(s.a,{icon:"edit",size:16,color:"#353030"})),a&&Object(n.createElement)(u.Modal,{onRequestClose:function(){return i(!1)},className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-h--core-header"},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(l.__)("Edit Automation","wp-marketing-automations")),Object(n.createElement)("span",{onClick:function(){return i(!1)},className:"bwf-modal-close"},Object(n.createElement)(s.a,{icon:"close",color:"#353030"}))),Object(n.createElement)("div",{onKeyPress:function(e){"Enter"===e.key&&(Object(o.isEmpty)(p)?O(!0):S())}},v&&Object(n.createElement)(u.Notice,{status:"error",onRemove:function(){return O("")}},v),Object(n.createElement)(u.TextControl,{type:"text",value:p,label:Object(l.__)("Name","wp-marketing-automations"),autoFocus:!0,placeholder:Object(l.__)("Enter Automation Name","wp-marketing-automations-crm"),disabled:j,onChange:function(e){h(e),Object(o.isEmpty)(e)?O(Object(l.__)("Name is required","wp-marketing-automations-crm")):O("")}}),Object(n.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(n.createElement)(u.Button,{className:"bwf-cancel-btn",onClick:function(){return i(!1)},disabled:j},Object(l.__)("Cancel","wp-marketing-automations-crm")),Object(n.createElement)(u.Button,{isPrimary:!0,onClick:function(){Object(o.isEmpty)(p)?O(Object(l.__)("Name is required","wp-marketing-automations-crm")):S()},isBusy:j},Object(l.__)("Save","wp-marketing-automations-crm"))))))};function ta(e){return(ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ra(){ra=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==ta(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(ta(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function na(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function aa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?na(Object(r),!0).forEach((function(t){oa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):na(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oa(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ta(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ta(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ta(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ia(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function ca(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return la(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return la(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function la(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sa=function(){var e=Object(n.useContext)(b.d),t=ca(Object(n.useState)({loading:!1,status:!1}),2),r=t[0],a=t[1],o=Object(f.a)().setAutomationData,i=(0,Object(m.a)().getAutomationData)(),c=i.ID,s=i.status,p=function(){var t,r=(t=ra().mark((function t(r){var n;return ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r?1:2,t.prev=1,e("Updating..."),t.next=5,d()({path:Object(b.m)("/automations/toggle-state"),method:"POST",data:{state:n,automation_id:c}}).then((function(t){if(200!==t.code)throw Error(Object(b.j)(null==t?void 0:t.message));e(t.message),o("data",aa(aa({},i),{},{status:n})),Object(b.fb)(e,1e3)}));case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),Object(b.fb)(e,1e3),setTimeout((function(){a({status:!0,error:t.t0.message})}),[1500]);case 11:case"end":return t.stop()}}),t,null,[[1,7]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){ia(o,n,a,i,c,"next",e)}function c(e){ia(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}();return Object(n.createElement)("div",{className:"bwf-automation-status-section"},Object(n.createElement)(u.ToggleControl,{label:1===parseInt(s)?Object(l.__)("Active",""):Object(l.__)("Inactive",""),className:"bwf-tooglecontrol-advance",onChange:p,checked:1===parseInt(s)}),Object(n.createElement)(h.a,{modalTitle:"Automation Status Update",errorMessage:r.error,onRequestClose:function(){return a({status:!1})},isOpen:r.status}))};r(908),r(1170);function ua(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ma=function(e){var t=e.id,r=e.sourceX,o=e.sourceY,i=e.targetX,c=e.targetY,l=e.sourcePosition,s=e.targetPosition,u=e.style,b=void 0===u?{}:u,p=(e.data,e.arrowHeadType),d=e.markerEndId,h=e.source,y=e.sourceHandleId,v=Object(a.g)({sourceX:r,sourceY:o,sourcePosition:l,targetX:i,targetY:c,targetPosition:s}),O=Object(a.i)(p,d),w=ua(Object(a.h)({sourceX:r,sourceY:o,targetX:i,targetY:c}),2),j=w[0],g=w[1],E=Object(f.a)(),_=E.setNodeForAdd,N=E.copyNodeHere,k=E.setOpenStepModal,S=E.setModalAnchorNode,x=Object(m.a)(),P=x.getEnableCopy,L=x.getEnableMove,C=x.getNodeDataByID,A=P(),T=L(),I=C(h);return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("path",{id:t,style:b,className:"react-flow__edge-path",d:v,markerEnd:O}),Object(n.createElement)("foreignObject",{width:23,height:23,x:j-11.5,y:g-11.5,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml"},Object(n.createElement)("div",{className:"bwf-edge-body"},A||T?Object(n.createElement)("div",{className:"bwf-drag-area",onClick:function(){return N(I,"after",y||"")}},Object(n.createElement)("div",{className:"bwf-drag-node is-edge"},Object(n.createElement)("div",{className:"bwf-node-add"})),Object(n.createElement)("div",{className:"bwf-paste-label"},"Paste Here")):Object(n.createElement)("div",{className:"bwf-node-add",onClick:function(e){_(h,{option:y}),k(!0),S(e.target)}}))))},ba=r(268),pa=r(16),da=(r(1171),r(38));function ha(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ya(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ya(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ya(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var va=function(){var e=Object(m.a)(),t=e.getShowContactModalId,r=e.getAutomationData,a=e.getShowContactModalType,i=t(),p=a(),h=r().ID,y=Object(f.a)().setAutomationData,v=ha(Object(n.useState)(!0),2),O=v[0],w=v[1],j=ha(Object(n.useState)({}),2),g=j[0],E=j[1],_=ha(Object(n.useState)(10),2),N=_[0],k=_[1],S=ha(Object(n.useState)(0),2),x=S[0],P=S[1],L=Object(n.useRef)(new AbortController);Object(n.useEffect)((function(){return function(){L.current.abort()}}),[]),Object(n.useEffect)((function(){w(!0),E({}),function(){try{var e=Object(pa.stringify)({limit:N,offset:x,type:p}),t="string"!=typeof i?parseInt(i):0;d()({path:Object(b.m)("/automation/".concat(h,"/step/").concat(t,"/contacts?").concat(e)),method:"GET",signal:L.current.signal}).then((function(e){200===e.code&&(Object(o.isEmpty)(e.result)||E(e.result)),w(!1)}))}catch(e){w(!1)}}()}),[i,x,N]);var C,A,T,I,D,F=c()("bwfcrm-contacts-list",{"has-search":!1}),M=[{key:"name",label:Object(l.__)("Name","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-150"},{key:"email",label:Object(l.__)("Email","wp-marketing-automations"),isLeftAligned:!0},{key:"date",label:function(){switch(p){case"completed":return Object(l.__)("Completed on","wp-marketing-automations");case"queued":return Object(l.__)("Queued on","wp-marketing-automations");case"active":return Object(l.__)("Started on","wp-marketing-automations");default:return Object(l.__)("Date","wp-marketing-automations")}}(),isLeftAligned:!0,cellClassName:"bwf-w-150"},{key:"traillink",label:"",isLeftAligned:!0,cellClassName:"bwf-w-120"}],G=function(e){return Object(n.createElement)(da.a,{href:"admin.php?page=autonami&path=/contact/"+e.id,type:"bwf-crm",className:"bwf-cursor-pointer bwf-a-no-underline",style:{color:"#0073aa"},key:e.id},e.hasOwnProperty("name")&&""!==e.name?e.name:"-")},z=function(e){var t=[];return Object(o.isEmpty)(e)||e.map((function(e){t.push([{display:G(e),value:""},{display:e.email,value:""},{display:e.hasOwnProperty("time")&&""!==e.time?Object(b.M)(je.a.unix(e.time).format("MM/DD/YYYY HH:mm:ss")):"-",value:""},{display:e.hasOwnProperty("trail")&&""!==e.trail?Object(n.createElement)("div",{onClick:function(){y("customerSelected",e),y("showContactModalId",0),y("showContactModalType","")},className:"bwf-cursor-pointer",style:{color:"#0073aa"}},Object(l.__)("View Journey","wp-marketing-automations")):"-",value:""}])})),t},q=function(e){P((e-1)*N)},B=function(e){return"per_page"!==e?function(){}:Y},Y=function(e){e!==N&&k(e)},R=g.hasOwnProperty("total")&&parseInt(g.total)>0?parseInt(g.total):0;return Object(n.createElement)(u.Modal,{onRequestClose:function(){y("showContactModalId",0),y("showContactModalType","")},className:"bwf-admin-modal bwf-admin-modal-large bwf-single-automation-contact-modal bwf-h--core-header",shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},function(){var e="";switch(p){case"completed":e="Completed Contacts";break;case"queued":e="Queued Contacts";break;default:e="Active Contacts"}return e+" "+(R>0?"("+R+")":"")}()),Object(n.createElement)("span",{onClick:function(){y("showContactModalId",0),y("showContactModalType","")},className:"bwf-modal-close"},Object(n.createElement)(s.a,{icon:"close",color:"#353030"}))),(C=g.data,A=void 0===C?[]:C,T=g.total,I=void 0===T?0:T,D=parseInt(x)/parseInt(N)+1,Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ba.a,{className:F,title:"",rows:O?[]:z(A),headers:M,query:{paged:D},rowsPerPage:N,totalRows:I,isLoading:O,onPageChange:q,onQueryChange:B,showMenu:!1,emptyMessage:Object(l.__)("No contacts found","wp-marketing-automations")}))))};function Oa(e){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wa(){wa=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==Oa(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Oa(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function ja(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ga(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(r),!0).forEach((function(t){Ea(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ja(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ea(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Oa(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Oa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Oa(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _a(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function Na(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ka(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ka(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ka(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Sa=function(e){var t=e.isProActive,r=void 0!==t&&t,a=Object(f.a)(),o=a.addNewStep,i=a.unsetCurrentNode,c=a.setOpenStepModal,p=a.setAutomationData,d=Object(m.a)(),h=d.getCurrentNode,y=d.getCurrentNodeAction,v=d.getOpenStepModal,O=d.getModalAnchorNode,w=Na(Object(n.useState)(!1),2),j=w[0],g=w[1],E=h(),_=y(),N=v(),k=O(),S=Object(n.useContext)(b.d),x=function(){var e,t=(e=wa().mark((function e(){var t,r,n,a,l=arguments;return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:"action",g(!0),r=_.data&&_.data.option?_.data.option:"",n=_.data&&_.data.position?_.data.position:"after",a=ga(ga({},E),{},{xPos:E.position.x,yPos:E.position.y}),e.next=7,o(t,a,r,n,{}).then((function(){Object(b.fb)(S,1e3),i(),g(!1),c(!1)}));case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){_a(o,n,a,i,c,"next",e)}function c(e){_a(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return N&&Object(n.createElement)(nn.a,{onFocusOutside:function(){i(),c(!1)},position:"center",className:"bwf-type-select-modal",onClick:function(e){return e.stopPropagation()},anchorRef:k},!j&&Object(n.createElement)("div",{className:"bwf-title-wrap"},Object(n.createElement)("div",{className:"bwf-title bwf_w_full"},"Add Step"),Object(n.createElement)("div",{className:"bwf-cross bwf-cursor-pointer",onClick:function(){return c(!1)}},Object(n.createElement)(s.a,{icon:"cross",size:12})," ")),Object(n.createElement)("div",{className:"bwf-type-select-wrapper "+(j?"is-loading":"")},j?Object(n.createElement)("div",{className:"bwf-display-flex-column set-center is-loading"},Object(n.createElement)(Cr.a,{spaceClass:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-h3"},"Please Wait..."),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p"},"We are adding step in the flow")):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(u.Button,{isSecondary:!0,onClick:function(){x("action")}},Object(n.createElement)("span",{className:"bwf-type-select-icons"},Object(n.createElement)(s.a,{icon:"charge"})),Object(l.__)("Action","wp-marketing-automations")),Object(n.createElement)(u.Button,{isSecondary:!0,onClick:function(){x("wait")}},Object(n.createElement)("span",{className:"bwf-type-select-icons"},Object(n.createElement)(s.a,{icon:"time-left"})),Object(l.__)("Delay","wp-marketing-automations")),Object(n.createElement)(u.Button,{isSecondary:!0,onClick:function(){r?x("conditional"):p("showProModal",!0)},style:{width:"100%"}},Object(n.createElement)("span",{className:"bwf-type-select-icons"},Object(n.createElement)(s.a,{icon:"condition"})),Object(l.__)("Condition","wp-marketing-automations"),!r&&Object(n.createElement)("span",{className:"bwf-flex",style:{marginLeft:"auto"}},Object(n.createElement)(s.a,{icon:"lock",size:16}))),Object(n.createElement)(u.Button,{isSecondary:!0,style:{width:"100%"},onClick:function(){r?x("benchmark"):p("showProModal",!0)}},Object(n.createElement)("span",{className:"bwf-type-select-icons"},Object(n.createElement)(s.a,{icon:"goal"})),Object(l.__)("Goal","wp-marketing-automations"),!r&&Object(n.createElement)("span",{className:"bwf-flex",style:{marginLeft:"auto"}},Object(n.createElement)(s.a,{icon:"lock",size:16}))),Object(n.createElement)(u.Button,{isSecondary:!0,style:{width:"100%"},onClick:function(){r?x("jump"):p("showProModal",!0)}},Object(n.createElement)("span",{className:"bwf-type-select-icons"},Object(n.createElement)(s.a,{icon:"jump"})),Object(l.__)("Jump","wp-marketing-automations"),!r&&Object(n.createElement)("span",{className:"bwf-flex",style:{marginLeft:"auto"}},Object(n.createElement)(s.a,{icon:"lock",size:16}))),Object(n.createElement)(u.Button,{isSecondary:!0,style:{width:"100%"},onClick:function(){r?x("exit"):p("showProModal",!0)}},Object(n.createElement)("span",{className:"bwf-type-select-icons"},Object(n.createElement)(s.a,{icon:"exit"})),Object(l.__)("Exit","wp-marketing-automations"),!r&&Object(n.createElement)("span",{className:"bwf-flex",style:{marginLeft:"auto"}},Object(n.createElement)(s.a,{icon:"lock",size:16}))))))},xa=r(76),Pa=(r(935),r(32)),La=r.n(Pa),Ca=r(33),Aa=r.n(Ca);function Ta(e){return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ia(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Da(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Da(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Da(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fa(){Fa=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==Ta(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Ta(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function Ma(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ga(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ma(Object(r),!0).forEach((function(t){za(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ma(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function za(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ta(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ta(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ta(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qa(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}var Ba=function(e){return{name:"contact-journey",className:"bwf-search-bwf-tags-result",options:function(t){return(r=Fa().mark((function t(r){var n,a,o;return Fa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={search:r,limit:10,offset:0},t.next=3,d()({path:Object(b.m)("/automation/".concat(e,"/contacts/journey?")+Object(pa.stringify)(n)),method:"GET"});case 3:return a=t.sent,o=[],La()(a,"result")&&!Aa()(a.result)&&(o=a.result.map((function(e){return Ga(Ga({},e),{},{key:String(e.trail),label:Aa()(e.f_name)&&Aa()(e.l_name)?e.email:e.f_name+" "+e.l_name})}))),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})),n=function(){var e=this,t=arguments;return new Promise((function(n,a){var o=r.apply(e,t);function i(e){qa(o,n,a,i,c,"next",e)}function c(e){qa(o,n,a,i,c,"throw",e)}i(void 0)}))},function(e){return n.apply(this,arguments)})(t);var r,n},isDebounced:!0,getOptionIdentifier:function(e){return e.key},getOptionKeywords:function(e){return[e.label]},getOptionLabel:function(e,t){return Object(n.createElement)("span",{key:"name",className:"bwf-customer-journey-search-result-name","aria-label":e.label},Object(n.createElement)("div",{className:"bwf-search-wrap"},Object(n.createElement)("div",{className:"bwf-search-label"},e.label),Object(n.createElement)("div",{className:"bwf-search-date"},"On:"," ",e.hasOwnProperty("c_date")?Object(b.M)(e.c_date):"")))},getOptionCompletion:function(e){return e}}},Ya=function(e){var t=Ia(Object(n.useState)(!1),2),r=t[0],a=t[1],i=e.automationId,c=Object(f.a)().setAutomationData,u=(0,Object(m.a)().getCustomerSelected)(),p=function(e){if(Object(o.isArray)(e)&&!Aa()(e)){if(!Aa()(e)){var t=e[e.length-1];(e=[])[0]=t}var r=e.find((function(e){return La()(e,"key")}));c("customerSelected",r),a(!1)}else c("customerSelected",{})};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>body{overflow-y: hidden !important;}</style>"}}),Object(n.createElement)("div",{className:"bwf-automation-customer-journey-wrap"},Object(n.createElement)("div",{className:"bwf-automation-customer-journey"},Object(b.mb)()?Object(n.createElement)("div",{className:"bwf-customer-journey-header"},Object(n.createElement)("div",{className:"bwf-customer-journey-label"}),Object(n.createElement)("div",{className:"bwf-customer-journey-search",onClick:function(){!r&&Aa()(u)&&a(!0)}},Object(n.createElement)(s.a,{icon:"split-path",width:16,height:18}),Object(n.createElement)("span",null,Object(l.__)("View Contact Journey")))):Object(n.createElement)("div",{className:"bwf-section-header",onClick:function(){c("showProModal",!0)}},Object(n.createElement)("div",{className:"bwf-customer-journey-label"}),Object(n.createElement)("div",{className:"bwf-customer-journey-search"},Object(n.createElement)(s.a,{icon:"lock",width:16,height:18}),Object(n.createElement)("span",null,Object(l.__)("View Contact Journey")))),Object(b.mb)()&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-customer-journey-popover-wrap"},r&&Object(n.createElement)(nn.a,{onFocusOutside:function(){return a(!1)},className:"bwf-customer-journey-popover",placement:"bottom"},Object(n.createElement)("div",{className:"bwf-customer-journey-popover-content"},Object(n.createElement)(lr.a,{autocompleter:Ba(i),className:"bwf-customer-journey-search",placeholder:Object(l.__)("Search by Name, Email and Phone"),multiple:!1,inlineTags:!1,selected:[],onChange:p,bwfEnableEmptySearch:!0})))))),!Aa()(u)&&Object(n.createElement)("div",{className:"bwf-customer-selected"},Object(n.createElement)(Ar.a,{id:u.trail,label:u.hasOwnProperty("label")&&!Aa()(u.label.trim())?u.label:u.email,remove:function(){return c("customerSelected",{})}}))))},Ra=r(912),Ua=r(102);function Ha(e){return(Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Va(){Va=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:N(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",b="executing",p="completed",d={};function h(){}function y(){}function v(){}var O={};s(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,i)&&(O=j);var g=v.prototype=h.prototype=Object.create(O);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==Ha(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=m;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=k(c,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=f(t,r,n);if("normal"===s.type){if(a=n.done?p:"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=p,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Ha(t)+" is not iterable")}return y.prototype=v,a(g,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),s(g,l,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function $a(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function Ja(e){return function(e){if(Array.isArray(e))return Xa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Qa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||Qa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qa(e,t){if(e){if("string"==typeof e)return Xa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xa(e,t):void 0}}function Xa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Za(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ka(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(r),!0).forEach((function(t){eo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Za(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function eo(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ha(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ha(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ha(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var to=function(e){var t=e.id,r=Object(Rn.a)(),i=r.setL2Title,u=r.setBackLinkRightContent,p=Object(a.n)().setCenter,y=Object(a.l)(),v=Object(a.m)((function(e){return e.setSelectedElements})),O=Object(tt.b)(),w=O.mergeTag,j=O.setMergeTag,g=O.reset,E=O.identifier,_=O.setIdentifier,N=Object(m.a)(),k=N.getLoading,S=N.getAutomationSteps,x=N.getAutomationLinks,P=N.getEnableCopy,L=N.getEnableMove,C=N.getAutomationData,A=N.getError,T=N.getShowContactModalId,I=N.getOpenStartSidebar,D=N.getCustomerSelected,F=N.isProModal,M=N.getautomationMeta,G=N.getListData,q=(0,N.getModalData)(),B=Object(f.a)(),Y=B.setAutomationData,R=B.fetchAutomationStat,U=x(),H=S(),V=P(),$=L(),J=k(),W=A(),Q=C(),X=T(),Z=Q.title,K=void 0===Z?"":Z,te=I(),re=D(),ne=F(),ae=M(),oe=ae.tips,ie=void 0===oe?[]:oe,ce=G();Object(Un.a)("workflow",K,"admin.php?page=autonami&path=/automations",!1,null,t,!1,!0,!1),Object(n.useEffect)((function(){i(Object(n.createElement)("div",{className:"bwf-display-flex"},Object(n.createElement)("span",null,""!==K?K:""!==ce?ce:Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"})),""!=K&&Object(n.createElement)(ea,null))),u(Object(n.createElement)(sa,null)),Y("isNewAutomation",0)}),[Q]);var le=Object(n.useRef)();Object(n.useEffect)((function(){return window.addEventListener("keyup",(function(e){"Escape"!==e.key&&"27"!==e.keyCode||null!==document.querySelector(".bwf-escape-note")&&(Y("enableCopy",!1),Y("enableMove",!1),Y("copyData",{}))})),Y("enableCopy",!1),Y("enableMove",!1),Y("copyData",{}),function(){document.body.style.overflow="",i(""),Y("listData",""),Y("data",{})}}),[]),Object(n.useEffect)((function(){Object(o.isNull)(document.querySelector("#bwf-single-automation-wrap"))||(le.current=document.querySelector("#bwf-single-automation-wrap").getBoundingClientRect()),J||R()}),[J]);var se={start:z,action:fe,conditional:ee,end:me,benchmark:ve,wait:Pe,yesNoNode:Le,exit:Fe,jump:Re},ue={"bwf-default":ma},be=U.map((function(e){return e.id&&(e.id.includes("yesedge")||e.id.includes("noedge"))?e:Ka(Ka({},e),{},{type:"bwf-default"})})),pe=Wa(Object(n.useState)([]),2),de=pe[0],he=pe[1],ye=Wa(Object(n.useState)(!1),2),Oe=ye[0],we=ye[1],je=Wa(Object(n.useState)("bwf-automation-wrap"),2),ge=je[0],Ee=je[1],_e=Wa(Object(n.useState)(!1),2),Ne=_e[0],ke=_e[1];if(Object(n.useEffect)((function(){if(!Oe){var e=0,t=0,r=y.getState(),n=r.nodes,a=r.selectedElements;if((Object(o.isEmpty)(a)||te)&&(Y("openStartSidebar",!1),n.length&&le.current)){var i=n[0];i.hasOwnProperty("__rf")?(e=i.__rf.position.x+140,t=i.__rf.position.y):(e=i.position.x+140,t=i.position.y),t=parseFloat(t)+parseFloat(le.current.height)*(Ne?.5:.4),we(!0),p(e,t,1)}}}),[de,Oe]),Object(n.useEffect)((function(){we(!1),H.length>1?he(Object(Hn.a)([].concat(Ja(H),Ja(be)),!0,V||$?20:0)):he(H)}),[H,J,Ne,re,V,$]),Object(n.useEffect)((function(){v([])}),[re]),J)return Object(n.createElement)(Cr.a,null);var Se=function(){var e,r=(e=Va().mark((function e(){return Va().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d()({path:Object(b.m)("/automation/".concat(t,"/delete_meta")),method:"DELETE",data:{meta_key:"tips"}}).then((function(e){200===e.code&&Y("meta",Ka(Ka({},ae),{},{tips:[]}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){$a(o,n,a,i,c,"next",e)}function c(e){$a(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(n.createElement)(tt.a.Provider,{value:{selectedMergeTag:w,setSelectedMergeTag:j,resetSelection:g,selectedIdentifier:E,setSelectedIdentifier:_}},Object(o.isEmpty)(W)?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(xa.a,null),Object(n.createElement)("div",{className:c()(ge,{"full-screen":Ne}),id:"bwf-single-automation-wrap"},Object(n.createElement)("div",{className:"automation-title"}," ",K," "),Object(n.createElement)(Ya,{automationId:t}),(V||$)&&Object(n.createElement)("div",{className:"bwf-escape-note"},Object(l.__)("Press ESC to skip paste step")),Object(o.isEmpty)(re)?Object(n.createElement)(a.f,{defaultZoom:1,minZoom:.5,maxZoom:4,nodeTypes:se,nodesConnectable:!1,nodesDraggable:!1,zoomOnScroll:!1,zoomOnDoubleClick:!1,paneMoveable:!0,panOnScroll:!0,elements:de,edgeTypes:ue,onSelectionChange:function(e){if(!Object(o.isNull)(e)&&e.length>0){var t=e[0];if(Object(a.k)(t))return void Ee("bwf-automation-wrap bwf-node-selected");if(Object(a.j)(t))return void Ee("bwf-automation-wrap bwf-edge-selected");Ee("bwf-automation-wrap")}}},Object(n.createElement)(Sa,{isProActive:Object(b.mb)()}),Object(n.createElement)(a.c,{showInteractive:!1},Object(n.createElement)(a.b,{onClick:function(){ke(!Ne),document.body.style.overflow=Ne?"":"hidden",v([])}},Ne?Object(n.createElement)("span",{className:"dashicons dashicons-fullscreen-exit-alt custom-control-icon"}):Object(n.createElement)("span",{className:"dashicons dashicons-fullscreen-alt custom-control-icon"}))),Object(n.createElement)(a.a,null)):Object(n.createElement)(Ra.a,{setFullScreen:ke,fullScreen:Ne}),!Object(o.isEmpty)(ie)&&Object(n.createElement)("div",{className:"bwfan-automation-tips"},Object(n.createElement)("span",{className:"bwf-close-tip",onClick:Se},Object(n.createElement)(s.a,{icon:"close",size:12})),ie.map((function(e,t){return Object(n.createElement)("div",{className:"bwfan-automation-tip",key:t},Object(n.createElement)("div",null,Object(n.createElement)(s.a,{icon:"tip"}),Object(n.createElement)("strong",null,"Tip")),Object(n.createElement)("div",null,e))})))),Object(n.createElement)(Yn,null),""!==X&&0!==X&&Object(n.createElement)(va,null)):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-h3"},"Some error in automation"))),!Object(b.mb)()&&Object(n.createElement)(Ua.a,{isOpen:ne,onRequestClose:function(){return Y("showProModal",!1)}}),Object(n.createElement)(h.a,{modalTitle:q.modalTitle,deleteEntityName:q.deleteEntityName,confirmText:q.confirmText,confirmButtonText:q.buttonConfirm,cancelButtonText:q.buttonCancel,onConfirm:q.onConfirm,isLoading:q.loading,successMessage:q.success,errorMessage:q.error,content:q.content,onRequestClose:function(){Y("modalData",{loading:!1,status:!1})},confirmDescription:q.hasOwnProperty("confirmDescription")?q.confirmDescription:"",isOpen:q.status,isDelete:q.isDelete}))};t.default=function(e){var t=e.match.params.id;Object(b.g)("Automation #"+t);var r=Object(f.a)(),o=r.fetchAutomation,i=r.setAutomationData,c=r.clearAutomationError;return Object(n.useEffect)((function(){i("statLoading",!0),i("statData",[]),i("isLoading",!0),c(),o(t)}),[t]),Object(n.createElement)(n.Fragment,null,Object(n.createElement)(a.e,null,Object(n.createElement)(to,{id:t})))}},865:function(e,t,r){"use strict";var n=r(0),a=r(141),o=r(2),i=r(5),c=r(58),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={workflow:{name:Object(o.__)("Workflow","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e):"admin.php?page=autonami-automations&edit=".concat(e)}};return t&&(r.analytics={name:Object(o.__)("Analytics","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e,"/analytics"):"admin.php?page=autonami&path=/automation-v1/".concat(e,"/analytics"),isProFeature:!0,showOnClick:!0},r.contacts={name:Object(o.__)("Contacts","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(e,"/contacts"),isProFeature:!0,showOnClick:!0}),r.engagement={name:Object(o.__)("Engagements","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e,"/engagements"):"admin.php?page=autonami&path=/automation-v1/".concat(e,"/engagements"),isProFeature:!0,showOnClick:!0},Object(i.xb)()&&(r.orders={name:Object(o.__)("Orders","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e,"/orders"):"admin.php?page=autonami&path=/automation-v1/".concat(e,"/orders"),isProFeature:!0,showOnClick:!0}),r};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7],b=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},d=p.automation_nav,h=p.automationv2_nav,y=Object(a.a)(),v=y.setActiveMultiple,O=y.resetHeaderMenu,w=y.setL2NavType,j=y.setL2Nav,g=y.setBackLink,E=y.setL2Title,_=y.setL2Content,N=y.setBackLinkLabel,k=y.setL2NavAlign,S=y.setPageHeader;return Object(n.useEffect)((function(){O(),!i&&w("menu"),b||j(u?l(u,m):m?h:d),v({leftNav:m?"automations-v2":"automations-v1",rightNav:e}),r&&g(r),u&&g(r&&!m?"admin.php?page=autonami&path=/automations-v1":"admin.php?page=autonami&path=/automations"),i||m&&u&&N(Object(o.__)("All Automations","wp-marketing-automations-crm")),!m&&u&&N(Object(o.__)("All Automations","wp-marketing-automations")),u&&k("left"),t&&E(t),!r&&s&&_(s),S(m?"Automations":Object(n.createElement)(n.Fragment,null,"Automations",Object(n.createElement)(c.a,{label:"Legacy"}))),f&&j({})}),[e,m,b]),!0}},910:function(e,t,r){},935:function(e,t,r){}}]);