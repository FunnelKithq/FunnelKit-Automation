(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1187:function(t,e,n){},1197:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(4),o=n(2),i=n(95),c=n(859),u=n(867),l=n(12),s=n.n(l),f=n(15),m=n(5),d=n(3),p=n(149),b=n(157),y=n(143),h=n(144),g=n(287);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var w=["getStateProp"];function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===v(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var S=function(t){if(!t||!t.editor||!t.editor.design)return!1;var e=JSON.parse(t.editor.design);return!!e&&!!e.body&&Array.isArray(e.body.rows)&&e.body.rows.length>0},k=function(){var t=Object(h.a)(g.a.campaignContent),e=t.getStateProp,n=E(t,w),r=c.a.getCampaignData(),a=parseInt(r.type);return j(j({},n),{},{getEmailContent:function(){var t=parseInt(e("currentEmail")),n=e("data");return n&&t in n?n[t]:{}},getCurrentEmail:function(){return parseInt(e("currentEmail"))},getEmails:function(){return e("emails")},getAllEmailContent:function(){return e("data")},getShowValidationFlag:function(){return e("showValidation")},emailsValidToSubmit:function(){var t=e("data");return!!e("emails").map((function(e){var n=t[e];if(!n)return!1;var r=!!n.utmEnabled,o=n.utm?n.utm:{},i={subject:1!==a||n.subject&&n.subject.length>0,content:"editor"!==n.type?n.body&&n.body.length>0:S(n),type:1!==a||n.type&&n.type.length>0,utmSource:!r||o.source&&o.source.length>0,utmMedium:!r||o.medium&&o.medium.length>0};return!!Object.keys(i).map((function(t){return i[t]})).reduce((function(t,e){return t&&e}),!0)})).reduce((function(t,e){return t&&e}),!0)&&t},getValidEmails:function(){var t=e("data"),n=e("emails"),r={};return n.map((function(e){var n=t[e];if(n){var o=!!n.utmEnabled,i=n.utm?n.utm:{},c={subject:1!==a||n.subject&&n.subject.length>0,content:"editor"!==n.type?n.body&&n.body.length>0:S(n),type:1!==a||n.type&&n.type.length>0,utmSource:!o||i.source&&i.source.length>0,utmMedium:!o||i.medium&&i.medium.length>0};r[e]=!!Object.keys(c).map((function(t){return c[t]})).reduce((function(t,e){return t&&e}),!0)}})),r},getEmailsToSubmit:function(){var t=e("data");return e("emails").map((function(e){var n=t[e];return n||!1})).filter(Boolean)},getCurrentEmailIndex:function(){var t=parseInt(e("currentEmail")),n=e("emails");return Array.isArray(n)&&n.includes(t)?n.indexOf(t):1},validateCurrentEmail:function(){var t=e("data"),n=parseInt(e("currentEmail"));if(!t||!t[n])return!1;var r=t[n];if(r){var o=!!r.utmEnabled,i=r.utm?r.utm:{};return{subject:1!==a||r.subject&&r.subject.length>0,content:"editor"!==r.type?r.body&&r.body.length>0:S(r),type:1!==a||r.type&&r.type.length>0,utmSource:!o||i.source&&i.source.length>0,utmMedium:!o||i.medium&&i.medium.length>0}}},getSmartSendSettings:function(){return e("smartSend")},getSaveContentStatus:function(){return e("saveContentStatus")},getSendTestEmailStatus:function(){return e("sendTestEmailStatus")},getUploadImageStatus:function(){return e("uploadImageStatus")},getUploadImageURL:function(){return e("uploadImageURL")}})};function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var L=["fetch","setStateProp"],$=["reply_to","senders_email","senders_name"],C=["reply_to","senders_email","senders_name"];function P(){P=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),c=new C(r||[]);return a(i,"_invoke",{value:S(t,n,c)}),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",d="executing",p="completed",b={};function y(){}function h(){}function g(){}var v={};l(v,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==n&&r.call(O,i)&&(v=O);var j=g.prototype=y.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(a,o,i,c){var u=f(t[a],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==x(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function S(e,n,r){var a=m;return function(o,i){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var u=k(c,r);if(u){if(u===b)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var l=f(e,n,r);if("normal"===l.type){if(a=r.done?p:"suspendedYield",l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=p,r.method="throw",r.arg=l.arg)}}}function k(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=f(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function $(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function T(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(x(e)+" is not iterable")}return h.prototype=g,a(j,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:h,configurable:!0}),h.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new E(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach($),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),$(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;$(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},e}function T(t,e,n,r,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,a)}function N(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){F(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function F(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==x(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===x(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var G=function(){var t,e,n=Object(y.a)(g.a.campaignContent),r=n.fetch,a=n.setStateProp,o=B(n,L),i=k(),u=i.getAllEmailContent,l=i.getCurrentEmail,f=i.getEmails,p=i.getSmartSendSettings,b=i.getCurrentEmailIndex,h=i.getEmailsToSubmit,v=i.getEmailContent,w=u(),O=l(),j=b(),_=f(),E=p(),S=v(),x=h(),A=c.a.getCampaignId(),I=c.a.getCampaignData().type,G=function(t){return"type"in t?t:M(M({},t),{},{type:"rich"})};return M(M({},o),{},{setEmailContentByKey:function(t,e){var n=G(O in w?M(M({},w[O]),{},F({},t,e)):F({},t,e));"type"!=t||"editor"!=e||n.hasOwnProperty("editor")||(n.editor={body:Object(m.cb)(),design:Object(m.bb)()});var r=M(M({},w),{},F({},O,n));a("data",r)},setEmailUtmByKey:function(t,e){var n=G(O in w?M({},w[O]):{}),r="utm"in n?M(M({},n.utm),{},F({},t,e)):F({},t,e),o=M(M({},w),{},F({},O,M(M({},n),{},{utm:M(M({},r),{},F({},t,e))})));a("data",o)},setMultipleUtm:function(t){if(t){var e=G(O in w?M({},w[O]):{}),n=M(M({},w),{},F({},O,M(M({},e),{},{utm:M(M({},e.utm),t)})));a("data",n)}},setCurrentEmail:function(t){_.includes(t)&&a("currentEmail",t)},addEmail:function(){if(Array.isArray(_)&&_.length<3){var t=Math.max.apply(Math,N(_))+1;a("emails",[].concat(N(_),[t])),a("currentEmail",t),a("showValidation",!1),a("data",M(M({},w),{},F({},t,_[0]in w?w[_[0]]:{})))}},showValidation:function(t){return a("showValidation",t)},deleteEmail:function(t){if(_.length>1){var e=_.filter((function(e){return e!==t}));a("emails",e),a("currentEmail",e[e.length-1])}},initContent:function(t,e){if(!Array.isArray(t)||0===Object(d.size)(t))return a("data",{1:{}}),a("emails",[1]),void a("currentEmail",1);var n={};for(var r in t){var o=parseInt(r)+1;n[o]=w[o]?M(M({},G(w[o])),t[r]):t[r]}a("data",n),a("emails",Object.keys(n).map((function(t){return parseInt(t)}))),e&&0!==Object.keys(e).length&&a("smartSend",e)},fetchCurrentMailEditorContent:function(){r("GET",Object(m.m)("/broadcast/".concat(A,"/content/").concat(j)),{},{email:O})},sendTestEmail:(t=P().mark((function t(e,n){var r,o,i,c,u,l,f,p,b,y,h,g,v,w,O,j,_,E=arguments;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=E.length>2&&void 0!==E[2]?E[2]:"",o=E.length>3&&void 0!==E[3]?E[3]:"",i=E.length>4&&void 0!==E[4]?E[4]:"",c="",u="",l="rich",f="",S&&(p=S.body?S.body:"",b=S.editor?S.editor:{},y=b.body?b.body:"",l=S.type?S.type:l,c="editor"===l?y:p,u=S.subject?S.subject:"FunnelKit Automations - Test email subject",f=S.preheader?S.preheader:""),h=o||c,g=r||u,v=i||l,w="",O={},1==I?(w=Object(m.m)("/send-test-email"),O={email:e,content:{subject:g,body:h,type:v,preheader:f,mail_data:n}}):2==I?(n.reply_to,n.senders_email,n.senders_name,j=B(n,$),w=Object(m.m)("/send-test-sms"),O={phone:e,sms_body:h,sms_data:j}):3==I&&(n.reply_to,n.senders_email,n.senders_name,_=B(n,C),w=Object(m.m)("/send-test-whatsapp-message"),O={phone:e,sms_body:S,sms_data:_}),Object(d.isEmpty)(O)||Object(d.isEmpty)(w)||s()({method:"POST",path:w,data:O}).then((function(t){200===t.code&&t.message?a("sendTestEmailStatus",2):a("sendTestEmailStatus",3)}));case 15:case"end":return t.stop()}}),t)})),e=function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){T(o,r,a,i,c,"next",t)}function c(t){T(o,r,a,i,c,"throw",t)}i(void 0)}))},function(t,n){return e.apply(this,arguments)}),setSmartSendByKey:function(t,e){return a("smartSend",M(M({},E),{},F({},t,e)))},saveBroadcastContent:function(t){a("saveContentStatus",1);var e=Array.isArray(t)&&t.length>0?t:x,n={content:JSON.stringify(e),saveBroadcastContent:!0};s()({method:"POST",path:Object(m.m)("/broadcast/".concat(A,"/save-content")),data:n}).then((function(){return a("saveContentStatus",2)}))},uploadImage:function(t){if(t){a("uploadImageStatus",1);var e=new FormData;e.append("image",t),r("POST",Object(m.m)("/upload-image"),e,{uploadImage:!0,isFormData:!0})}},resetSaveContentStatus:function(){return a("saveContentStatus",null)},resetSendTestEmailStatus:function(){return a("sendTestEmailStatus",null)},resetUploadImageStatus:function(){a("uploadImageStatus",null),a("uploadImageStatusURL","")},overrideCurrentContent:function(t){var e=G(O in w?M({},w[O]):{}),n=M(M({},w),{},F({},O,M(M({},e),t)));a("data",n)}})},U=n(50);function D(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var V=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},K=function(t){var e=G().sendTestEmail,n=(0,k().getSendTestEmailStatus)(),a=D(Object(r.useState)("http://app.getautonami.com"),2),i=a[0],c=a[1],u=Object(r.useRef)();Object(r.useEffect)((function(){u.current=t}),[t]);var l=function(t){if(-1!==t.origin.indexOf("app.getautonami.com")&&t.data&&t.data.action&&"send_test_email"===t.data.action&&t.data.token===V.editor_nonce&&t.data.data){var n=t.data.data,r=n.email,a=n.body,i=n.subject,l=void 0===i?"":i;r&&a&&(c(t.origin),e(r,u.current,l||Object(o.__)("FunnelKit Automations - Test email subject","wp-marketing-automations"),a))}};return Object(r.useEffect)((function(){return window.addEventListener("message",l),function(){return window.removeEventListener("message",l)}}),[]),Object(r.useEffect)((function(){if(n&&1!==n){var t=2===n,e=document.getElementById("bwf_email_editor_frame");e&&e.contentWindow.postMessage({token:V.editor_nonce,action:"send_test_email",data:{isSent:t}},i)}}),[n]),!0};function H(t){return function(t){if(Array.isArray(t))return z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||W(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||W(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t,e){if(t){if("string"==typeof t)return z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(t,e):void 0}}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var J=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},Z=function(t){var e=G().saveBroadcastContent,n=k(),a=n.getSaveContentStatus,o=n.getEmailsToSubmit,i=n.getCurrentEmailIndex,c=a(),u=o(),l=i(),s=Object(r.useRef)(u),f=Object(r.useRef)(l);Object(r.useEffect)((function(){s.current=u,f.current=l}),[u,l]);var m=Y(Object(r.useState)("http://app.getautonami.com"),2),d=m[0],p=m[1],b=function(t){if(-1!==t.origin.indexOf("app.getautonami.com")&&t.data&&t.data.action&&"save_design"===t.data.action&&t.data.token===J.editor_nonce&&t.data.data){var n=t.data.data,r=n.body,a=n.design;if(r&&a){p(t.origin);var o=H(s.current);o[f.current].editor={body:r,design:a},e(o)}}};return Object(r.useEffect)((function(){return window.addEventListener("message",b),function(){return window.removeEventListener("message",b)}}),[]),Object(r.useEffect)((function(){if(c&&1!==c&&t){var e=2===c,n=document.getElementById("bwf_email_editor_frame");n&&n.contentWindow.postMessage({token:J.editor_nonce,action:"save_design",data:{isSaved:e}},d)}}),[c]),!0};function q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var X=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},tt=function(){var t=q(Object(r.useState)("http://app.getautonami.com"),2),e=t[0],n=t[1],a=function(t){-1!==t.origin.indexOf("app.getautonami.com")&&t.data&&t.data.action&&"wp_image_upload"===t.data.action&&t.data.token===X.editor_nonce&&t.data.data&&(n(t.origin),s())},i=Object(r.useRef)(),c=q(Object(r.useState)(""),2),u=c[0],l=c[1],s=function(){if(!wp||!wp.media)return"";i.current||(i.current=wp.media({title:Object(o.__)("Select or Upload Media","wp-marketing-automations"),button:{text:"Select Image"},multiple:!1}),i.current.on("select",(function(){var t=i.current.state().get("selection").first().toJSON();l(t.url)}))),i.current.open()};return Object(r.useEffect)((function(){return window.addEventListener("message",a),function(){return window.removeEventListener("message",a)}}),[]),Object(r.useEffect)((function(){if(u){var t=document.getElementById("bwf_email_editor_frame");t&&t.contentWindow.postMessage({token:X.editor_nonce,action:"wp_image_upload",data:{isUploaded:!0,imageURL:u}},e)}}),[u]),!0},et=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},nt=function(t){var e=(0,k().getEmailContent)(),n=Object(r.useRef)(),a=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e,a.current=function(t){var e={};for(var n in t){var r=t[n];if(r){var a={};for(var o in r)a[o]={name:r[o],value:"{{".concat(o,"}}")};var i="";switch(n){case"contact":i="Contact";break;case"contact_fields":i="Fields";break;case"general":i="General"}e[n]={name:i,mergeTags:a}}}return e}(t)}),[e,t]);var o=function(t){if(-1!==t.origin.indexOf("app.getautonami.com")&&t.data&&t.data.action&&"get_design"===t.data.action&&t.data.token===et.editor_nonce){var e=Object(m.bb)(),r=n.current&&n.current.editor&&n.current.editor.design?n.current.editor.design:e,o=document.getElementById("bwf_email_editor_frame");o&&o.contentWindow.postMessage({token:et.editor_nonce,action:"get_design",data:{gotDesign:!0,json:r,subject:n.current&&n.current.subject?n.current.subject:"",mergeTags:a.current,enableLinkTrigger:!0,textDirection:Object(m.ob)()?"rtl":""}},t.origin)}};return Object(r.useEffect)((function(){return window.addEventListener("message",o),function(){return window.removeEventListener("message",o)}}),[]),!0},rt=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},at=function(t){var e=function(e){-1!==e.origin.indexOf("app.getautonami.com")&&e.data&&e.data.action&&"open_merge_tags"===e.data.action&&e.data.token===rt.editor_nonce&&e.data.data&&t&&t()};return Object(r.useEffect)((function(){return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}),[]),!0},ot=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},it=function(t){var e=function(e){-1!==e.origin.indexOf("app.getautonami.com")&&e.data&&e.data.action&&"close_editor"===e.data.action&&e.data.token===ot.editor_nonce&&e.data.data&&t&&t()};return Object(r.useEffect)((function(){return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}),[]),!0},ct=n(357),ut=function(t){var e=function(){t&&t()};return Object(r.useEffect)((function(){return window.history.pushState(null,null,window.location.href),window.addEventListener("popstate",e),function(){return window.removeEventListener("popstate",e)}}),[]),!0},lt=n(8);function st(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ft(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ft(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var mt=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},dt=function(){return Object(r.createElement)("div",{className:"bwf-c-save-content-loading"},Object(r.createElement)(U.a,null),Object(r.createElement)("h3",null,Object(o.__)("Loading Visual Builder","wp-marketing-automations")))},pt=function(t){var e=t.iframeRef,n=t.editorSrc;return Object(r.createElement)("iframe",{ref:e,title:Object(o.__)("Email Editor","wp-marketing-automations"),src:n,id:"bwf_email_editor_frame",style:{width:"100%",height:"100%"}})},bt=function(t){var e=st(Object(r.useState)(!1),2),n=e[0],i=e[1],c=t.broadcastId,u=t.contentNumber,l=t.openMergeTags,s=t.mailData,f=t.mergeTags,m=t.openLinkTrigger,d=mt.license,p=mt.editor_nonce,b=mt.url,y=G(),h=y.fetchCurrentMailEditorContent,g=y.saveBroadcastContent,v=y.resetSaveContentStatus,w=k().getSaveContentStatus(),O=st(Object(r.useState)(!1),2),j=O[0],_=O[1];Object(r.useEffect)((function(){j||2!==w&&3!==w||(_(!0),v())}),[w]);var E=Object(r.useCallback)((function(){i(!1),h()}));nt(f||[]),K(s),Z(j),tt(),at(l),it(E),Object(ct.a)(m),ut(E);var S="//app.getautonami.com/get/".concat(d,"/").concat(p,"/").concat(b,"/crm.broadcast.").concat(c,".content.").concat(u),x=Object(r.useRef)();return Object(r.useEffect)((function(){n?(g(),document.body.classList.add("bwf-c-modal-open")):(_(!1),document.body.classList.remove("bwf-c-modal-open"))}),[n]),Object(r.createElement)(r.Fragment,null,n&&Object(r.createElement)("div",{className:"bwf-c-editor-modal-wrapper"},Object(r.createElement)("div",{className:"bwf-c-editor-modal bwf-c-editor-modal-full-width"},!j&&Object(r.createElement)(dt,null),!!j&&Object(r.createElement)(pt,{iframeRef:x,editorSrc:S}))),Object(r.createElement)("div",{className:"bwf-c-editor-button-wrapper"},Object(r.createElement)(lt.a,{icon:"launch-editor",size:50}),Object(r.createElement)("div",{className:"bwf-h1"},"Launch Editor"),Object(r.createElement)("div",{className:"bwf-h5"},"Visually get email with drop & drop builder"),Object(r.createElement)(a.Button,{isSecondary:!0,onClick:function(){return i(!0)}},Object(o.__)("Start","wp-marketing-automations"))))},yt=n(158),ht=n(917);function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vt(){vt=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),c=new $(r||[]);return a(i,"_invoke",{value:S(t,n,c)}),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",d="executing",p="completed",b={};function y(){}function h(){}function g(){}var v={};l(v,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(C([])));O&&O!==n&&r.call(O,i)&&(v=O);var j=g.prototype=y.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(a,o,i,c){var u=f(t[a],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==gt(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function S(e,n,r){var a=m;return function(o,i){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var u=k(c,r);if(u){if(u===b)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var l=f(e,n,r);if("normal"===l.type){if(a=r.done?p:"suspendedYield",l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=p,r.method="throw",r.arg=l.arg)}}}function k(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=f(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(gt(e)+" is not iterable")}return h.prototype=g,a(j,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:h,configurable:!0}),h.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new E(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=C,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;L(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},e}function wt(t,e,n,r,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,a)}function Ot(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return jt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _t=function(t){var e=t.setPreview,n=t.content,i=t.type,c=Ot(Object(r.useState)(""),2),u=c[0],l=c[1],f=Ot(Object(r.useState)(!0),2),d=f[0],p=f[1];Object(r.useEffect)((function(){b()}),[]);var b=function(){var t,e=(t=vt().mark((function t(){var e;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=4;break}return l(""),p(!1),t.abrupt("return");case 4:return t.prev=4,e={content:n,type:i},t.next=8,s()({path:Object(m.m)("/broadcast/email-preview"),method:"POST",data:e}).then((function(t){l(t.result.body.replace(/\\/g,"")),p(!1)}));case 8:t.next=12;break;case 10:t.prev=10,t.t0=t.catch(4);case 12:case"end":return t.stop()}}),t,null,[[4,10]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){wt(o,r,a,i,c,"next",t)}function c(t){wt(o,r,a,i,c,"throw",t)}i(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(r.createElement)(a.Modal,{onRequestClose:function(){return e(!1)},className:"bwf-admin-modal bwf-admin-modal-xxxl bwf-h--core-header"},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(o.__)("Preview","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return e(!1)},className:"bwf-modal-close"},Object(r.createElement)(lt.a,{icon:"close",color:"#353030"}))),d?Object(r.createElement)(U.a,null):Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:u}}))},Et=n(358),St=n(173),kt=function(t){var e=t.enable,n=t.position,i=t.imageURL,c=t.setData;return Object(r.createElement)("div",{className:"bwf-c-campaign-email"},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(a.ToggleControl,{label:Object(o.__)("Enable Image Sending","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:e,onChange:function(t){return c("enable",t)}}),e&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(a.RadioControl,{className:"bwfcrm-inline-option",selected:n,label:Object(o.__)("Select Image Position","wp-marketing-automations"),options:[{value:"after",label:Object(o.__)("After","wp-marketing-automations")},{value:"before",label:Object(o.__)("Before","wp-marketing-automations")}],onChange:function(t){return c("position",t)}}),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(St.a,{image:i?{url:i}:"",onChange:function(t){!Object(d.isNull)(t)&&t.hasOwnProperty("url")?c("imageURL",t.url):c("imageURL","")}})))},xt=n(186),Lt=n(77);function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(n),!0).forEach((function(e){Tt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Tt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==$t(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==$t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===$t(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return At(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return At(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var It=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},Mt=function(){var t=Nt(Object(r.useState)(!1),2),e=t[0],n=t[1],a=Nt(Object(r.useState)(!1),2),o=a[0],i=a[1],c=Object(Lt.a)(Object(m.X)()).formatAmount,u=Object(r.useCallback)((function(t){var e=document.getElementById("bwf_email_editor_frame");e&&e.contentWindow.postMessage({token:It.editor_nonce,action:"select_product_for_tool",data:{product:Pt(Pt({},t),{},{formattedPrice:c(t.price)})}},o),n(!1)}),[o]),l=Object(r.useCallback)((function(t){-1!==t.origin.indexOf("app.getautonami.com")&&t.data&&t.data.action&&"select_product_for_tool"===t.data.action&&t.data.token===It.editor_nonce&&(i(t.origin),n(!0))}),[n]);return Object(r.useEffect)((function(){return window.addEventListener("message",l),function(){return window.removeEventListener("message",l)}}),[]),e&&Object(r.createElement)(xt.a,{onRequestClose:function(){return n(!1)},onProductSelected:u})},Ft=n(299),Bt=n(7),Gt=n.n(Bt),Ut=n(80);function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rt(){Rt=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),c=new $(r||[]);return a(i,"_invoke",{value:S(t,n,c)}),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",d="executing",p="completed",b={};function y(){}function h(){}function g(){}var v={};l(v,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(C([])));O&&O!==n&&r.call(O,i)&&(v=O);var j=g.prototype=y.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(a,o,i,c){var u=f(t[a],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Dt(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function S(e,n,r){var a=m;return function(o,i){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var u=k(c,r);if(u){if(u===b)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var l=f(e,n,r);if("normal"===l.type){if(a=r.done?p:"suspendedYield",l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=p,r.method="throw",r.arg=l.arg)}}}function k(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=f(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(Dt(e)+" is not iterable")}return h.prototype=g,a(j,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:h,configurable:!0}),h.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new E(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=C,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;L(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},e}function Vt(t,e,n,r,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,a)}function Kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kt(Object(n),!0).forEach((function(e){Yt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Yt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Dt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Dt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return zt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Jt=Object(m.Y)(),Zt=[{label:Object(o.__)("Rich Text","wp-marketing-automations"),value:"rich",templateIcon:"rich-text",className:"bwf-display-flex bwf-campaign-template-type "},Jt.includes("wc")&&{label:Object(o.__)("WooCommerce","wp-marketing-automations"),value:"wc",templateIcon:"woocommerce",className:"bwf-display-flex bwf-campaign-template-type "},{label:Object(o.__)("Raw HTML","wp-marketing-automations"),value:"html",templateIcon:"html",className:"bwf-display-flex bwf-campaign-template-type"},{label:Object(o.__)("Visual Builder","wp-marketing-automations"),value:"editor",templateIcon:"html",className:"bwf-display-flex bwf-campaign-template-type"}].filter(Boolean),qt=function(t){var e=t.maildata,n=t.setTemplateModal,u=c.a.getCampaignData(),l=parseInt(u.type),s=Object(m.t)(),f=G(),y=f.setEmailContentByKey,h=f.setEmailUtmByKey,g=f.setMultipleUtm,v=f.sendTestEmail,w=f.resetSendTestEmailStatus,O=k(),j=O.getEmailContent()?O.getEmailContent():{},_="utm"in j?j.utm:{},E=Wt(Object(r.useState)(!1),2),S=E[0],x=E[1],L=Wt(Object(r.useState)(""),2),$=L[0],C=L[1],P="subject"in j?j.subject:"",T="preheader"in j?j.preheader:"",N="type"in j?j.type:"rich",A="utmEnabled"in j&&j.utmEnabled,I=Wt(Object(r.useState)({message:"",type:1}),2),M=I[0],F=I[1],B="whatsAppImage"in j&&j.whatsAppImage,U="whatsAppImageSetting"in j?j.whatsAppImageSetting:{},D="position"in U?U.position:"after",R="imageURL"in U?U.imageURL:"",V="source"in _?_.source:"",K="medium"in _?_.medium:"",H="name"in _?_.name:"",Y="content"in _?_.content:"",W="term"in _?_.term:"",z=Wt(Object(r.useState)(!1),2),J=z[0],Z=z[1],q=Wt(Object(r.useState)(!1),2),Q=q[0],X=q[1],tt=O.getShowValidationFlag(),et=Wt(Object(r.useState)(!1),2),nt=et[0],rt=et[1],at=Wt(Object(r.useState)("content"),2),ot=at[0],it=at[1],ct=Wt(Object(r.useState)([]),2),ut=ct[0],st=ct[1],ft=Wt(Object(r.useState)(!1),2),mt=ft[0],dt=ft[1],pt=O.getCurrentEmailIndex(),gt=j&&j.body?j.body:"",vt="editor"in j?j.editor:{},wt=vt&&vt.body?vt.body:"",Ot="editor"===N?wt:gt,jt="<p>Hi {{contact_first_name}},</p><p></p>"+bwfanParams.bwfan_global_settings.bwfan_email_footer_setting;Object(r.useEffect)((function(){Object(d.isEmpty)(gt)&&y("body",1==l?jt:"Hi {{contact_first_name}},")}),[gt]);var St=A?Ht(Ht({},e),{},{utmName:H,utmMedium:K,utmContent:Y,utmSource:V,utmTerm:W}):e;Object(r.useEffect)((function(){if(A){var t={};!V&&(t.source=Object(o.__)("Newsletter","wp-marketing-automations")),!K&&(t.medium=s[l].label),!H&&(t.name=Object(d.trim)(u.title).replace(/\s/g,"-")),g(t)}}),[A]);var xt=O.validateCurrentEmail(),Lt={1:Object(o.__)("Place your HTML here","wp-marketing-automations"),2:Object(o.__)("Enter the SMS Body","wp-marketing-automations"),3:Object(o.__)("Place your message here","wp-marketing-automations")},$t={1:Object(o.__)("Send Test Email","wp-marketing-automations"),2:Object(o.__)("Send Test SMS","wp-marketing-automations"),3:Object(o.__)("Send Test Message","wp-marketing-automations")},Ct=(Object(o.__)("Send Email","wp-marketing-automations"),Object(o.__)("Send SMS","wp-marketing-automations"),Object(o.__)("Send Message","wp-marketing-automations"),function(){return"editor"==j.type?j.hasOwnProperty("editor")&&j.editor.hasOwnProperty("body")?j.editor.body:"":j.body}),Pt=O.getSendTestEmailStatus();Object(r.useEffect)((function(){null!==Pt&&setTimeout((function(){w(),F({message:"",type:1})}),2e3),2===Pt&&F({message:1==l?Object(o.__)("Test email sent","wp-marketing-automations"):Object(o.__)("Test message sent","wp-marketing-automations"),type:1}),3===Pt&&F({message:1==l?Object(o.__)("Unable to send mail","wp-marketing-automations"):Object(o.__)("Unable to send message","wp-marketing-automations"),type:1})}),[Pt]);var Tt=tt&&!xt.subject?" bwf-field-error":"",Nt=tt&&!xt.content?" bwf-field-error-textarea":"",At=tt&&!xt.utmSource?" bwf-field-error":"",It=tt&&!xt.utmMedium?" bwf-field-error":"";return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.Card,{className:"bwf-c-campaign-body"},1===l&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.TextControl,{value:P,onChange:function(t){return y("subject",t)},label:Object(o.__)("Subject","wp-marketing-automations"),placeholder:Object(o.__)("Enter subject","wp-marketing-automations"),className:"bwf-field-m0"+Tt}),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-campaign-mail-headers-wrap"},Object(r.createElement)(a.TextControl,{value:T,placeholder:Object(o.__)("Enter preview text","wp-marketing-automations"),label:Object(o.__)("Preview Text","wp-marketing-automations"),onChange:function(t){return y("preheader",t)}})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p"},Object(o.__)("Template Type","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-select-template-type"},Zt.map((function(t){return Object(r.createElement)("label",{key:t.value,className:Gt()({"is-selected":N===t.value})},Object(r.createElement)("input",{type:"radio",value:t.value,onChange:function(){f.showValidation(!1),y("type",t.value)},checked:N===t.value&&"checked"}),Object(r.createElement)("span",null,t.label))}))),Object(r.createElement)("div",{className:"bwf_clear_16"}),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.Flex,null,Object(r.createElement)(a.FlexBlock,null,Object(r.createElement)(a.Flex,{gap:3,justify:"flex-start"},"editor"!==N&&Object(r.createElement)(a.FlexItem,null,Object(r.createElement)(a.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray btn-svg-none",onClick:function(){it("content"),rt(!0)}},Object(r.createElement)(lt.a,{icon:"merge-tag",size:16}),Object(o.__)("Merge Tags","wp-marketing-automations"))),Object(r.createElement)(a.FlexItem,null,Object(r.createElement)("div",null,Object(r.createElement)(Ft.a,{canCreate:!0,isLinkTriggerOpen:mt,setLinkTriggerOpen:dt,modelOpenContent:Object(r.createElement)(a.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray btn-svg-none"},Object(r.createElement)(lt.a,{icon:"link-trigger",size:16}),Object(o.__)("Link Triggers","wp-marketing-automations")),hideButton:"editor"===N}))))),Object(r.createElement)(a.FlexItem,null,Object(r.createElement)(a.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",onClick:function(){return n(!0)}},Object(r.createElement)(lt.a,{icon:"templates",size:16}),Object(o.__)("Templates","wp-marketing-automations")))))),Object(r.createElement)("div",{className:"bwf_clear_16"}),Object(r.createElement)("div",{className:Nt},1===l&&("rich"===N||"wc"===N)&&Object(r.createElement)(b.a,{content:Ot,keyid:"bwf-campaign-email-editor",setContent:function(t){return y("body",t)}}),("html"===N||2===l||3===l)&&Object(r.createElement)(a.TextareaControl,{value:Ot,onChange:function(t){return y("body",t)},placeholder:Lt[l],rows:[2,3].includes(l)?5:24,className:"bwf-email-raw-html"}),"editor"===N&&Object(r.createElement)(bt,{broadcastId:u.id,contentNumber:parseInt(pt),openMergeTags:function(){return rt(!0)},mailData:St,mergeTags:ut,openLinkTrigger:dt})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(a.Flex,null,Object(r.createElement)(a.FlexItem,null,"editor"!==N&&3!==l&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("a",{className:"bwf-a-no-underline",onClick:function(t){t.preventDefault(),it("content");var e=2===l?bwfanParams.bwfan_global_settings.bwfan_sms_unsubscribe_text:bwfanParams.bwfan_global_settings.bwfan_email_footer_setting;y("body","".concat(Ot||""," \n").concat(e))}},Object(o.__)("Add Unsubscribe Text","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"})))),Object(r.createElement)(a.Flex,null,Object(r.createElement)("div",{className:"bwf-display-flex gap-12"},1==l&&Object(r.createElement)(Et.a,{templateData:j,type:1,checkIfValid:function(){return!!xt.subject||(f.showValidation(!0),!1)}}),Object(r.createElement)("div",null,Object(r.createElement)(a.Button,{className:"bwf-big-button",isSecondary:!0,onClick:function(){x(!0)}},$t.hasOwnProperty(l)?$t[l]:Object(o.__)("Send Test Email","wp-marketing-automations")),S&&Object(r.createElement)(Ut.a,{className:"bwf-campaign-test-mail-popup",onFocusOutside:function(){x(!1)},onClick:function(t){return t.stopPropagation()},focusOnMount:"no-focus"},Object(r.createElement)("div",{className:"bwf-campaign-test-mail-wrap"},Object(r.createElement)("div",{className:"bwf-p",style:{marginBottom:"16px"}},Object(r.createElement)(a.TextControl,{value:$,onChange:function(t){return C(t)},placeholder:1==l?Object(o.__)("Enter email address","wp-marketing-automations"):Object(o.__)("Enter phone no.","wp-marketing-automations")})),Object(r.createElement)(a.Button,{isPrimary:!0,isBusy:Q,onClick:function(){var t,e=(t=Rt().mark((function t(e){var n;return Rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),X(!0),r=void 0,r=!1,!(Object(d.isEmpty)($)||![2,3].includes(l)&&!Object(i.a)($)||[2,3].includes(l)&&!Object(ht.a)($))&&xt.content&&xt.type&&xt.utmMedium&&xt.utmSource||(r=!0),r){t.next=7;break}return t.next=5,v($,St,"","").then((function(){setTimeout((function(){X(!1),x(!1)}),1e3)}));case 5:t.next=13;break;case 7:n="",Object(d.isEmpty)($)&&(n=[2,3].includes(l)?Object(o.__)("Phone is required field.","wp-marketing-automations"):Object(o.__)("Email is required field.","wp-marketing-automations")),Object(d.isEmpty)(n)&&([2,3].includes(l)?Object(ht.a)($)||(n=Object(o.__)("Entered phone is not valid.","wp-marketing-automations")):Object(i.a)($)||(n=Object(o.__)("Entered email is not valid.","wp-marketing-automations"))),Object(d.isEmpty)(n)&&!xt.content&&(n=Object(o.__)("Content is required field.","wp-marketing-automations")),F({message:n,type:2}),X(!1);case 13:case"end":return t.stop()}var r}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){Vt(o,r,a,i,c,"next",t)}function c(t){Vt(o,r,a,i,c,"throw",t)}i(void 0)}))});return function(t){return e.apply(this,arguments)}}()},Object(o.__)("Send","wp-marketing-automations"))))),1==l&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.Button,{isSecondary:!0,className:"bwf-big-button",onClick:function(){Object(d.isEmpty)(Ct())?F({message:"No content available for preview.",status:2}):Z(!0)}},Object(o.__)("Show Preview","wp-marketing-automations")),J&&Object(r.createElement)(_t,{setPreview:Z,content:Ct(),type:N})))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(a.CheckboxControl,{checked:A,label:Object(o.__)("Automatically append UTM parameters to email links","wp-marketing-automations"),className:"bwf-crm-campaign-third-step-utm",onChange:function(t){return y("utmEnabled",t)}}),A&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-campaign-utm-section"},Object(r.createElement)(a.TextControl,{value:V,onChange:function(t){return h("source",t.replace(/\s/g,"+"))},label:Object(o.__)("Campaign Source","wp-marketing-automations"),placeholder:Object(o.__)("Enter UTM source","wp-marketing-automations"),help:Object(o.__)("Referrer: (e.g., google, newsletter)","wp-marketing-automations"),className:"bwf-field-comp-label-content"+At}),Object(r.createElement)(a.TextControl,{value:K,onChange:function(t){return h("medium",t.replace(/\s/g,"+"))},label:Object(o.__)("Campaign Medium","wp-marketing-automations"),placeholder:Object(o.__)("Enter UTM medium","wp-marketing-automations"),help:Object(o.__)("Marketing medium: (e.g., CPC, banner, email)","wp-marketing-automations"),className:"bwf-field-comp-label-content"+It}),Object(r.createElement)(a.TextControl,{value:H,onChange:function(t){return h("name",t.replace(/\s/g,"+"))},label:Object(o.__)("Campaign Name","wp-marketing-automations"),placeholder:Object(o.__)("Enter UTM name","wp-marketing-automations"),help:Object(o.__)("Product, promo code, or slogan (e.g., spring_sale)","wp-marketing-automations"),className:"bwf-field-comp-label-content"}),Object(r.createElement)(a.TextControl,{value:W,onChange:function(t){return h("term",t.replace(/\s/g,"+"))},label:Object(o.__)("Campaign Term","wp-marketing-automations"),placeholder:Object(o.__)("Enter UTM term","wp-marketing-automations"),className:"bwf-field-comp-label-content"}),Object(r.createElement)(a.TextControl,{value:Y,onChange:function(t){return h("content",t.replace(/\s/g,"+"))},label:Object(o.__)("Campaign Content","wp-marketing-automations"),placeholder:Object(o.__)("Enter UTM content","wp-marketing-automations"),className:"bwf-field-comp-label-content"}))),3==l&&Object(r.createElement)(kt,{enable:B,position:D,imageURL:R,setData:function(t,e){if("enable"==t)y("whatsAppImage",e);else if(["position","imageURL"].includes(t)){var n={position:D,imageURL:R};n[t]=e,y("whatsAppImageSetting",n)}}}),Object(r.createElement)(p.a,{message:M.message,type:M.type,removeMessage:function(){return F({message:"",type:1})}})),Object(r.createElement)(yt.a,{isOpen:nt,setOpenTags:rt,onMergeTagSelected:function(t){"subject"===ot&&y("subject","".concat(P||""," ").concat(t)),"content"===ot&&y("body","".concat(Ot||""," ").concat(t)),rt(!1)},onMergeTagsLoaded:function(t){return st(t)}}),Object(m.xb)()&&Object(r.createElement)(Mt,null))},Qt=n(376),Xt=(n(1187),n(76)),te=function(t){var e=G(),n=k(),i=n.getSmartSendSettings(),c=i.enable,u=i.percent,l=i.hours,s=e.setSmartSendByKey,f=n.getShowValidationFlag(),m=n.getEmails();return Array.isArray(m)&&m.length>1?Object(r.createElement)(a.Card,{className:"bwf-c-campaign-email"},Object(r.createElement)("div",{className:"bwf-h4"},Object(o.__)("Smart Sending","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(a.ToggleControl,{label:Object(o.__)("Enable Smart Sending","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:c,onChange:function(t){return s("enable",t)}}),c&&parseInt(u)>0&&parseInt(l)>0&&Object(r.createElement)("div",null,Object(o.sprintf)(Object(o.__)("This broadcast will be sent to %d percent of your contacts. After %d hours, open rates of all the variants would be analyzed and the one with the most opens would be sent to the remaining contacts.","wp-marketing-automations"),parseInt(u),parseInt(l))),c&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(a.TextControl,{type:"number",value:u,onChange:function(t){return s("percent",t)},label:Object(o.__)("Sample size (in percent)","wp-marketing-automations"),placeholder:Object(o.__)("Enter percent","wp-marketing-automations"),className:Gt()({"bwf-field-comp-label-content":!0,"bwf-field-error":f&&!parseInt(u)})}),Object(r.createElement)(a.TextControl,{type:"number",value:l,onChange:function(t){return s("hours",t)},label:Object(o.__)("Wait time (in hours)","wp-marketing-automations"),placeholder:Object(o.__)("Enter hour difference","wp-marketing-automations"),className:Gt()({"bwf-field-comp-label-content":!0,"bwf-field-error":f&&!parseInt(l)})}))):null};function ee(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ne(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var re="ABCDEFGHIJKLMNOPQRSTUVWXYZ",ae=function(t){var e=t.mailData,n=t.unsubscribeLink,i=t.errMsg,u=G(),l=k(),s=u.setCurrentEmail,f=u.addEmail,p=u.showValidation,b=u.deleteEmail,y=u.overrideCurrentContent,h={1:Object(o.__)("Email","wp-marketing-automations.crm"),2:Object(o.__)("SMS","wp-marketing-automations.crm"),3:Object(o.__)("WhatsApp","wp-marketing-automations.crm")},g=ee(Object(r.useState)(!1),2),v=g[0],w=g[1],O=l.getEmails(),j=l.getCurrentEmail(),_=l.getSmartSendSettings(),E=l.emailsValidToSubmit(),S=l.getShowValidationFlag(),x=l.getValidEmails(),L=c.a.getCampaignData(),$=!(L&&L.data&&L.data.ab_type)||"ab"===L.data.ab_type,C=Object(r.useRef)(!1),P=Object(r.useCallback)((function(t){return Gt()({active:j===t,"bwf-error-tab":!x[t]&&S})})),T=!![!_.enable||!!parseInt(_.hours)&&O.length>1,!_.enable||!!parseInt(_.percent)&&O.length>1].reduce((function(t,e){return t&&e}),!0),N=Object(r.useContext)(m.d),A=function(t){y(t),N(Object(o.__)("Template Applied Successfully.","wp-marketing-automations")),setTimeout((function(){N("")}),2e3)};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-p-gap bwf-border"},(!E||!T||!n)&&S&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Xt.a,null),Object(r.createElement)(a.Notice,{className:"bwf-error-notice",status:"error",onRemove:function(){return p(!1)}},(!E||!T)&&Object(o.__)("Some required fields are not filled, check below","wp-marketing-automations"),!n&&Object(r.createElement)(r.Fragment,null,(!E||!T)&&Object(r.createElement)("br",null),Object(d.isEmpty)(i)?Object(o.__)("{{unsubscribe_link}} are required merge tags, they must be missing from the email body","wp-marketing-automations"):i))),$?Object(r.createElement)("div",{className:"bwf-c-campaign-email-tabs"},Object(r.createElement)("ul",null,O.map((function(t,e){return Object(r.createElement)("li",{onClick:function(){return function(t){!C.current&&s(t),C.current=!1}(t)},className:P(t),key:"bwf-c-campaign-email-tabs-".concat(e)},Object(o.__)(0===e?"Control ":"Variant ","wp-marketing-automations")," ",e>0&&re[parseInt(e)%re.length-1],e>0&&Object(r.createElement)(a.Button,{icon:"no",onClick:function(){return function(t){C.current=!0,b(t)}(t)}}))})),O.length<3&&Object(r.createElement)("li",{className:"bwf-c-campaign-email-variant"},Object(r.createElement)(a.Button,{icon:"plus",onClick:function(){return f()}},Object(o.__)("Add Variant","wp-marketing-automations")))),1===parseInt(L.type)&&Object(r.createElement)("span",{className:"bwf-c-campaign-template-selector"},Object(r.createElement)(Qt.a,{showText:!1,openTemplate:v,setTemplateModal:w,applyTemplate:A}))):Object(r.createElement)("div",{className:"bwf-c-campaign-email-tabs"},Object(r.createElement)("ul",null,Object(r.createElement)("li",{style:{borderBottom:"2px solid #0073aa"}},h.hasOwnProperty(L.type)?h[L.type]:Object(o.__)("Email","wp-marketing-automations"))),1===parseInt(L.type)&&Object(r.createElement)("span",{className:"bwf-c-campaign-template-selector bwf-display-flex"},Object(r.createElement)(Qt.a,{showText:!1,openTemplate:v,setTemplateModal:w,applyTemplate:A}))),Object(r.createElement)(qt,{maildata:e,setTemplateModal:w}),Object(r.createElement)(te,null)))},oe=n(141);function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(){ce=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),c=new $(r||[]);return a(i,"_invoke",{value:S(t,n,c)}),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",d="executing",p="completed",b={};function y(){}function h(){}function g(){}var v={};l(v,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(C([])));O&&O!==n&&r.call(O,i)&&(v=O);var j=g.prototype=y.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(a,o,i,c){var u=f(t[a],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==ie(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function S(e,n,r){var a=m;return function(o,i){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var u=k(c,r);if(u){if(u===b)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var l=f(e,n,r);if("normal"===l.type){if(a=r.done?p:"suspendedYield",l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=p,r.method="throw",r.arg=l.arg)}}}function k(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=f(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(ie(e)+" is not iterable")}return h.prototype=g,a(j,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:h,configurable:!0}),h.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new E(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=C,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;L(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},e}function ue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(n),!0).forEach((function(e){se(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function se(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==ie(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ie(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fe(t,e,n,r,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,a)}function me(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return de(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.default=function(t){var e=Object(f.i)(),n=me(Object(r.useState)({message:"",type:1}),2),l=n[0],b=n[1],y=me(Object(r.useState)([]),2),h=y[0],g=y[1],v=me(Object(r.useState)([]),2),w=v[0],O=v[1],j=me(Object(r.useState)(Object(m.A)("from_name")),2),_=j[0],E=j[1],S=me(Object(r.useState)(Object(m.A)("from_email")),2),x=S[0],L=S[1],$=me(Object(r.useState)(Object(m.A)("reply_to_email")),2),C=$[0],P=$[1],T=me(Object(r.useState)(""),2),N=T[0],A=T[1],I=Object(u.a)().setCampaignValues,M=c.a.getCampaignId(),F=c.a.getCampaignData(),B=parseInt(F.type);Object(r.useEffect)((function(){F&&!Object(d.isNull)(F.data)&&(F.data.hasOwnProperty("content")&&!Object(d.isEmpty)(F.data.content)?g(F.data.content):g(1==B?[{subject:"",preheader:"",type:"rich",body:"",utm:{}}]:[{body:"",utm:{}}]),F.data.hasOwnProperty("senders_name")&&E(F.data.senders_name),F.data.hasOwnProperty("senders_email")&&L(F.data.senders_email),F.data.hasOwnProperty("replyto")&&!Object(d.isEmpty)(F.data.replyto)&&P(F.data.replyto))}),[]);var U=Object(oe.a)().setL2Title;Object(r.useEffect)((function(){U("title"in F?Object(r.createElement)(r.Fragment,null,F.title):"")}),[F]);var D={name:1!==B||null===_||_.length>0,email:1!==B||null===x||Object(i.a)(x),content:null===h||h.length>0},R=k(),V=R.emailsValidToSubmit(),K=R.getEmails(),H=R.getAllEmailContent(),Y=R.getSmartSendSettings(),W=G();Object(r.useEffect)((function(){if(F&&F.data){var t=!F.data.ab_type||"ab"===F.data.ab_type,e=F.data.content?Array.isArray(F.data.content)&&!t?[F.data.content[0]]:F.data.content:[],n=F.data.smart_send&&t?F.data.smart_send:{};W.initContent(e,n)}}),[M]);var z=!![1!==B||_&&_.length>0,1!==B||x&&Object(i.a)(x),1!==B||Object(d.isEmpty)(C)||C&&Object(i.a)(C)].reduce((function(t,e){return t&&e}),!0),J=!![!Y.enable||!!parseInt(Y.hours)&&K.length>1,!Y.enable||!!parseInt(Y.percent)&&K.length>1].reduce((function(t,e){return t&&e}),!0),Z=function(){if(1!==B)return!0;var t=Object(m.p)();A("");var e=!1,n=[];return K.map((function(r){var a=H.hasOwnProperty(r)?H[r]:{},o="";a.hasOwnProperty("type")&&("editor"==a.type?a.hasOwnProperty("editor")&&a.editor.hasOwnProperty("body")&&(o=a.editor.body):a.hasOwnProperty("body")&&(o=a.body)),(e=(t.includes("unsubscribe_link")||o.includes("{{unsubscribe_link}}"))&&(t.includes("business_name")||o.includes("{{business_name}}"))&&(t.includes("business_address")||o.includes("{{business_address}}")))||(t.includes("unsubscribe_link")||o.includes("{{unsubscribe_link}}")||n.push("{{unsubscribe_link}}"),t.includes("business_name")||o.includes("{{business_name}}")||n.push("{{business_name}}"),t.includes("business_address")||o.includes("{{business_address}}")||n.push("{{business_address}}"))})),Object(d.isEmpty)(n)||A("The required merge tags "+n.join(", ")+(n.length>1?" are ":" is ")+" missing in the email body."),O(e),e},q=function(){var e,n=(e=ce().mark((function e(){var n,r,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Z(),W.showValidation(!1),!(z&&V&&J&&n)){e.next=17;break}return t.setPending(!0),e.prev=4,r=le({content:K.map((function(t){return V[t]})),senders_name:_,senders_email:x,replyto:C,modified_by:Object(m.x)()},Y.enable?{smart_send:{enable:Y.enable,percent:Y.percent,hours:Y.hours}}:{}),a={content:JSON.stringify(r),step:3},e.next=9,s()({path:Object(m.m)("/broadcast/".concat(M)),method:"POST",data:a}).then((function(t){200===t.code?(I("data",t.result),I("step",4)):b({message:t.message,type:0})}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),b({message:e.t0.message,type:0});case 14:t.setPending(!1),e.next=18;break;case 17:W.showValidation(!0);case 18:case"end":return e.stop()}}),e,null,[[4,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(t){fe(o,r,a,i,c,"next",t)}function c(t){fe(o,r,a,i,c,"throw",t)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),Q=D&&!D.email?" bwf-field-error":"",X=D&&!D.name?" bwf-field-error":"";return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Xt.a,null),Object(r.createElement)("div",{className:"bwf-campaign-step-div bwf-card-wrap bwf-campaign-step-3"},Object(r.createElement)("div",{className:"bwf-card-header"},Object(r.createElement)("span",{className:"bwf-form-title"},Object(o.__)("Content","wp-marketing-automations"))),1===B&&Object(r.createElement)("div",{className:"bwf-p-gap"},Object(r.createElement)(a.Card,{className:"bwf-c-campaign-email"},Object(r.createElement)(a.Flex,null,Object(r.createElement)(a.FlexBlock,null,Object(r.createElement)(a.TextControl,{value:_,onChange:E,label:Object(o.__)("From Name","wp-marketing-automations"),placeholder:Object(o.__)("Enter From Name","wp-marketing-automations"),className:X}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(a.Flex,null,Object(r.createElement)(a.FlexBlock,null,Object(r.createElement)(a.TextControl,{value:x,onChange:L,label:Object(o.__)("From Email","wp-marketing-automations"),placeholder:Object(o.__)("Enter From Email","wp-marketing-automations"),className:Q})),Object(r.createElement)(a.FlexBlock,null,Object(r.createElement)(a.TextControl,{value:C,placeholder:Object(o.__)("Enter Reply-To Email","wp-marketing-automations"),label:Object(o.__)("Reply-To Email","wp-marketing-automations"),onChange:P}))))),Object(r.createElement)("div",{className:"bwf-p-gap bwf-pt-0"},Object(r.createElement)(ae,{mailData:{reply_to:C,senders_email:x,senders_name:_},unsubscribeLink:w,errMsg:N}),Object(r.createElement)(p.a,{message:l.message,type:l.type,removeMessage:function(){return b({message:"",type:1})}})),Object(r.createElement)("div",{className:"bwf-p-gap bwf-pt-0"},Object(r.createElement)("div",{className:"bwf-crm-campaign-navigation"},Object(r.createElement)(a.Button,{className:"bwf-crm-navigation-previous",isSecondary:!0,onClick:function(){var t=F.data&&!Object(d.isNull)(F.data)&&F.data.hasOwnProperty("filters")?F.data.filters:{};Object(d.isEmpty)(t)||Object(f.k)(t,"/",e),I("step",2)}},Object(o.__)("Previous","wp-marketing-automations")),Object(r.createElement)(a.Button,{isPrimary:!0,className:"bwf-crm-navigation-next",disabled:!z,onClick:q,isBusy:t.isPending},Object(o.__)("Next","wp-marketing-automations"))))))}},917:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(62),a={"am-AM":/^(\+?374|0)((10|[9|7][0-9])\d{6}$|[2-4]\d{7}$)/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)([569]\d{7}|41\d{6})$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?(9[1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SD":/^((\+?249)|0)?(9[012369]|1[012])\d{7}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,"el-GR":/^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,"el-CY":/^(\+?357?)?(9(9|6)\d{6})$/,"en-AI":/^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-AG":/^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,"en-BS":/^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-JM":/^(\+?876)?\d{7}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"fr-CF":/^(\+?236| ?)(70|75|77|72|21|22)\d{6}$/,"en-SS":/^(\+?211|0)(9[1257])\d{7}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-KN":/^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,"en-LS":/^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PG":/^(\+?675|0)?(7\d|8[18])\d{6}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8|3|2]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-NI":/^(\+?505)\d{7,8}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-BJ":/^(\+229)\d{8}$/,"fr-CD":/^(\+?243|0)?(8|9)\d{8}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"fr-WF":/^(\+681)?\d{6}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"ir-IR":/^(\+98|0)?9\d{9}$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(79\d{7}|5\d{8})$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"ky-KG":/^(\+?7\s?\+?7|0)\s?\d{2}\s?\d{3}\s?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"mg-MG":/^((\+?261|0)(2|3)\d)?\d{7}$/,"mn-MN":/^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,"my-MM":/^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,"ms-MY":/^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nl-AW":/^(\+)?297(56|59|64|73|74|99)\d{5}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?([5-8]\d|45) ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+244)\d{9}$/,"ro-MD":/^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,"ro-RO":/^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"so-SO":/^(\+?252|0)((6[0-9])\d{7}|(7[1-9])\d{7})$/,"sq-AL":/^(\+355|0)6[789]\d{6}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/,"ar-YE":/^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,"ar-EH":/^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,"fa-AF":/^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/};function o(t,e,n){if(Object(r.a)(t),n&&n.strictMode&&!t.startsWith("+"))return!1;if(Array.isArray(e))return e.some((function(e){if(a.hasOwnProperty(e)&&a[e].test(t))return!0;return!1}));if(e in a)return a[e].test(t);if(!e||"any"===e){for(var o in a){if(a.hasOwnProperty(o))if(a[o].test(t))return!0}return!1}throw new Error("Invalid locale '".concat(e,"'"))}a["en-CA"]=a["en-US"],a["fr-CA"]=a["en-CA"],a["fr-BE"]=a["nl-BE"],a["zh-HK"]=a["en-HK"],a["zh-MO"]=a["en-MO"],a["ga-IE"]=a["en-IE"],a["fr-CH"]=a["de-CH"],a["it-CH"]=a["fr-CH"];Object.keys(a)}}]);