(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1004:function(t,e,r){},1005:function(t,e,r){},1006:function(t,e,r){},1007:function(t,e,r){},1008:function(t,e,r){},1009:function(t,e,r){},1232:function(t,e,r){"use strict";r.r(e);var n=r(0),o=r(2),a=r(16),c=r(7),i=r.n(c),l=r(5),u=r(268),s=r(3),f=r(27),m=r(33),p=r.n(m),b=r(124),h=r.n(b),d=r(32),y=r.n(d),v=r(15),g=r(12),w=r.n(g),O=r(14),j=r.n(O);function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(){_=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new C(n||[]);return o(c,"_invoke",{value:S(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(I([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==E(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function S(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=N(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function N(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,N(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(E(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},k(x.prototype),u(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new x(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},k(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function k(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}var x={name:"contacts",className:"bwf-search-bwf-contacts-result",options:function(t){return(e=_().mark((function t(e){var r,n;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!p()(e)){t.next=2;break}return t.abrupt("return",[]);case 2:return r={search:e,limit:10,offset:0},t.next=5,w()({path:Object(l.m)("/contacts?"+Object(a.stringify)(r)),method:"GET"});case 5:return n=t.sent,t.abrupt("return",y()(n,"result")?n.result:[]);case 7:case"end":return t.stop()}}),t)})),r=function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(t){k(a,n,o,c,i,"next",t)}function i(t){k(a,n,o,c,i,"throw",t)}c(void 0)}))},function(t){return r.apply(this,arguments)})(t);var e,r},isDebounced:!0,getOptionIdentifier:function(t){return t.id},getOptionKeywords:function(t){return[t.f_name,t.l_name,t.email,t.f_name+" "+t.l_name]},getFreeTextOptions:function(t,e){return[{key:"name",label:Object(n.createElement)("span",{key:"name",className:"bwf-search-result-name"},j()({mixedString:Object(o.__)("All contacts with names that include {{query /}}","wp-marketing-automations"),components:{query:Object(n.createElement)("strong",{className:"components-form-token-field__suggestion-match"},t)}})),value:{id:t,name:t,contacts:e.map((function(t){return y()(t,"value")?t.value:t})),searchTerm:t}}]},getOptionLabel:function(t,e){var r=Object(l.i)(Object(l.u)(t),e)||{};return Object(n.createElement)("span",{key:"name",className:"bwf-search-result-name","aria-label":Object(l.u)(t)},r.suggestionBeforeMatch,Object(n.createElement)("strong",{className:"components-form-token-field__suggestion-match"},r.suggestionMatch),r.suggestionAfterMatch)},getOptionCompletion:function(t){return t}};function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(){N=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new C(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(I([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==S(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(S(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function L(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}var P=function(t){var e=t.query,r=e.hasOwnProperty("s")?e.s:"",a=p()(r)?[]:[{key:r,label:Object(o.__)("Search Term: ","wp-marketing-automations")+r,bwfLabelSource:"bwfcrm_contacts",isSearchTerm:!0}],c=function(){var t,r=(t=N().mark((function t(r){var n,o,a;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h()(r)){t.next=2;break}return t.abrupt("return");case 2:if(n=r.find((function(t){return y()(t,"searchTerm")})),!(Object(s.isUndefined)(n)&&r.length>0&&r[0].hasOwnProperty("id"))){t.next=6;break}return Object(v.k)({},"/contact/".concat(r[0].id),e),t.abrupt("return");case 6:if(o=Object(s.isUndefined)(n)?void 0:n.searchTerm,a=y()(e,"s")&&!p()(e.s)?e.s:"",o!==a){t.next=10;break}return t.abrupt("return");case 10:Object(v.k)({s:o},"/contacts",e);case 11:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){L(a,n,o,c,i,"next",t)}function i(t){L(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(t){return r.apply(this,arguments)}}();return Object(n.createElement)(f.a,{autocompleter:x,multiple:!1,allowFreeTextSearch:!0,inlineTags:!0,selected:a,onChange:c,placeholder:Object(o.__)("Search by contact","wp-marketing-automations"),showClearButton:!0,disabled:!1})},C=r(850),I=r(67),A=r(101),T=r(4),F=r(17),G=r(270),$=r(878),D=r(869),M=r(914),B=r(8),z=r(157);function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(Object(r),!0).forEach((function(e){Y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Y(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==U(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===U(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function V(){V=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==U(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(U(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function H(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function W(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Q=function(t){var e=t.contact,r=Object(n.useContext)(l.d),a=W(Object(n.useState)(!1),2),c=a[0],i=a[1],u=W(Object(n.useState)({type:"email",title:"",body:"",id:0,send:!1}),2),f=u[0],m=u[1],p=W(Object(n.useState)({status:!1,message:""}),2),b=p[0],h=p[1],d=[{value:"",label:Object(o.__)("Select Type","wp-marketing-automations")}].concat(Object(l.v)()),y=function(){var n,o=(n=V().mark((function n(o){var a;return V().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(a={title:o.title,body:o.body,type:o.type,private:o.send,modified_by:Object(l.x)()}).created_by=Object(l.x)(),i(!0),n.prev=3,n.next=6,w()({path:Object(l.m)("/contacts/".concat(e.id,"/notes/")),method:"POST",data:{notes:a},headers:{"Content-Type":"application/json"}}).then((function(e){if(200!=e.code)throw Error(Object(l.j)(null==e?void 0:e.message));r(e.message),t.setModelStatus({status:!1,contactInfo:{}})})).catch((function(t){throw Error(Object(l.j)(null==t?void 0:t.message))}));case 6:n.next=12;break;case 8:n.prev=8,n.t0=n.catch(3),h({status:!0,message:n.t0.message}),i(!1);case 12:Object(l.fb)(r,2e3);case 13:case"end":return n.stop()}}),n,null,[[3,8]])})),function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function c(t){H(a,r,o,c,i,"next",t)}function i(t){H(a,r,o,c,i,"throw",t)}c(void 0)}))});return function(t){return o.apply(this,arguments)}}();return Object(n.createElement)(T.Modal,{onRequestClose:function(){return t.setModelStatus(!1)},className:"bwf-admin-modal bwf-admin-modal-large bwf-message-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(o.__)("Add Note","wp-marketing-automations")),Object(n.createElement)("span",{onClick:function(){return t.setModelStatus(!1)},className:"bwf-modal-close"},Object(n.createElement)(B.a,{icon:"close",color:"#353030"}))),Object(n.createElement)("div",{className:"bwf-form-fields"},b.status&&Object(n.createElement)(T.Notice,{status:"error",onRemove:function(){return h(!1)},className:"bwf-send-note-notice"},b.message?b.message:Object(o.__)("Title, type and body are mandatory field. Kindly fill them","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-message-wrap"},Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-pmb-16 bwf-bb-grey"},Object(n.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(o.__)("Contact","wp-marketing-automations")),Object(n.createElement)("div",null,Object(n.createElement)("span",{className:"bwf-highlight-content"},Object(n.createElement)("b",null,e.f_name+" "+e.l_name)," ( "+e.email+" ) "))),Object(n.createElement)("div",{className:"bwf-pmb-16 bwf-bb-grey"},Object(n.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(o.__)("Type","wp-marketing-automations")),Object(n.createElement)(T.SelectControl,{value:f.type,className:"bwf-w-150",options:d,onChange:function(t){return m(R(R({},f),{},{type:t}))},disabled:c})),Object(n.createElement)("div",{className:"bwf-pmb-16 bwf-bb-grey"},Object(n.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(o.__)("Title","wp-marketing-automations")),Object(n.createElement)(T.TextControl,{type:"text",value:f.title,placeholder:Object(o.__)("Title comes here …","wp-marketing-automations"),disabled:c,onChange:function(t){return m(R(R({},f),{},{title:t}))}})),Object(n.createElement)("div",{className:"bwf-message-textarea"},Object(n.createElement)(z.a,{keyid:"bwf-note-editor",content:f.body,setContent:function(t){return m(R(R({},f),{},{body:t}))},height:200})),Object(n.createElement)("div",{className:"bwf-message-footer"},0==parseInt(f.id)&&Object(n.createElement)("div",{className:"bwf-note-send"},Object(n.createElement)(T.ToggleControl,{label:Object(o.__)("Send Note to Contact","wp-marketing-automations"),checked:Boolean(parseInt(f.send)),onChange:function(t){return m(R(R({},f),{},{send:t?"1":"0"}))},className:"bwf-tooglecontrol-advance"})),Object(n.createElement)("div",{className:"bwf-button-col"},Object(n.createElement)(T.Button,{className:"bwf-cancel-btn",onClick:function(){return t.setModelStatus(!1)},disabled:c},Object(o.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(T.Button,{isPrimary:!0,isBusy:c,disabled:c,onClick:function(){Object(s.isEmpty)(f.title)||Object(s.isEmpty)(f.body)||Object(s.isEmpty)(f.type)?h({status:!0,message:""}):(h({status:!1,message:""}),m(R(R({},f),{},{loading:!0})),y(f))}},Object(o.__)("Add Note","wp-marketing-automations")))))))},Z=r(50),J=r(103),X=r(274),tt=r(222),et=r(142),rt=r(125);function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(){return(ot=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function at(){at=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==nt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(nt(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function ct(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function it(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return lt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ut=[{id:"delete",icon:"trash",hint:Object(o.__)("Delete Contacts","wp-marketing-automations")}],st=function(t){var e=t.floatingBarProps,r=void 0===e?{}:e,a=t.resetSelection,c=t.onSuccess,i=it(Object(n.useState)([]),2),u=i[0],s=i[1],f=it(Object(n.useState)(!1),2),m=f[0],p=f[1],b=Object(rt.useMutation)(function(){var t,e=(t=at().mark((function t(e){return at().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w()({path:Object(l.m)("/contacts/"),method:"DELETE",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){ct(a,n,o,c,i,"next",t)}function i(t){ct(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){a&&a(),s([]),setTimeout((function(){b.reset()}),2500),c&&c()},onError:function(){}}),h=Object(n.useCallback)((function(t,e){switch(t){case"delete":s(e),p(!0)}}),[]);return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(tt.a,ot({actions:ut,onAction:h},r)),Object(n.createElement)(et.a,{modalTitle:Object(o._n)("Delete Contact","Delete Contacts",u.length),deleteEntityName:1===u.length?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",{style:{fontWeight:"normal"}},Object(o.__)("contact")," "),u[0].f_name," ",u[0].l_name):Object(n.createElement)(n.Fragment,null,u.length," ",Object(n.createElement)("span",{style:{fontWeight:"normal"}},Object(o.__)("contact"))),confirmButtonText:Object(o.__)("Delete","wp-marketing-automations"),cancelButtonText:Object(o.__)("Cancel","wp-marketing-automations"),onConfirm:function(){var t={contacts:u.map((function(t){return t.id}))};b.mutate(t)},isLoading:b.isLoading,successMessage:b.isSuccess&&Object(o.__)("Contacts Deleted!","wp-marketing-automations"),errorMessage:b.isError&&(b.error&&b.error.message?b.error.message:Object(o.__)("Unable to delete contacts","wp-marketing-automations")),onRequestClose:function(){return p(!1)},isOpen:m,confirmDescription:Object(o.__)("This action is irreversible","wp-marketing-automations"),isDelete:!0}))},ft=r(915),mt=r(890);function pt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return bt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ht=function(t){var e=t.query,r=e.orderby,a=void 0===r?"last_modified":r,c=e.order,i=void 0===c?"desc":c,u=[{value:"f_name",label:Object(o.__)("Contact Name","wp-marketing-automations")},{value:"creation_date",label:Object(o.__)("Creation Date","wp-marketing-automations")},{value:"last_modified",label:Object(o.__)("Last Updated","wp-marketing-automations")},{value:"country",label:Object(o.__)("Country","wp-marketing-automations")},{value:"state",label:Object(o.__)("State","wp-marketing-automations")}];Object(l.xb)()&&u.push({value:"total_order_count",label:Object(o.__)("Orders","wp-marketing-automations")},{value:"total_order_value",label:Object(o.__)("Total Spend","wp-marketing-automations")},{value:"l_order_date",label:Object(o.__)("Last Order Date","wp-marketing-automations")});var s=pt(Object(n.useState)(a),2),f=s[0],m=s[1],p=pt(Object(n.useState)(i),2),b=p[0],h=p[1];return Object(n.createElement)("div",{className:"bwf-custom-ellipsis",style:{width:"70px"}},Object(n.createElement)(I.a,{label:"",classes:"bwf-mr-10 bwf-ml-10",buttonIcon:Object(n.createElement)("div",{className:"bwf-sort-button components-button is-secondary bwf-btn-small bwf-btn-gray",key:"import"},Object(n.createElement)(B.a,{icon:"import",size:16}),Object(o.__)("Sort","wp-marketing-automations")),renderContent:function(t){var r=t.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(A.a,null,Object(n.createElement)("div",{className:"bwf-contact-sort-popover"},Object(n.createElement)("div",{className:"bwf-sort-column-list"},Object(n.createElement)(T.RadioControl,{className:"bwfcrm-inline-option",selected:f,label:"",options:u,onChange:function(t){return m(t)}})),Object(n.createElement)("div",{className:"bwf-sort-order-btn"},Object(n.createElement)(T.ButtonGroup,null,Object(n.createElement)(T.Button,{isPrimary:!b||"desc"===b,isSecondary:b&&"desc"!==b,onClick:function(){return h("desc")}},"DESC"),Object(n.createElement)(T.Button,{isPrimary:b&&"asc"===b,isSecondary:b&&"asc"!==b,onClick:function(){return h("asc")}},"ASC"))),Object(n.createElement)("div",{className:"bwf-contact-sort-action"},Object(n.createElement)(T.Button,{isPrimary:!0,className:"bwf-update-button",onClick:function(){return function(t){Object(v.k)({order:b,orderby:f},"/",e),t()}(r)},disabled:a===f&&i===b},Object(o.__)("Update","wp-marketing-automations"))))))}}))},dt=r(866),yt=r(297),vt=r(884);function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t){return function(t){if(Array.isArray(t))return Lt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Nt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(r),!0).forEach((function(e){Et(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Et(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==gt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===gt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _t(){_t=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==gt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(gt(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function kt(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function xt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){kt(a,n,o,c,i,"next",t)}function i(t){kt(a,n,o,c,i,"throw",t)}c(void 0)}))}}function St(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||Nt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(t,e){if(t){if("string"==typeof t)return Lt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lt(t,e):void 0}}function Lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Pt=Object(yt.c)((function(){return Object(n.createElement)(B.a,{icon:"menu-2",size:20})})),Ct=Object(yt.b)((function(t){var e=t.item,r=t.onRemove;return Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-contact-preferences__item"},Object(n.createElement)("div",{className:"bwf-contact-preferences__item-title"},Object(n.createElement)(Pt,null),e.label),Object(n.createElement)("div",{className:"bwf-flex"},Object(n.createElement)("div",{className:"bwf-contact-preferences__item-type"},Object(n.createElement)("span",null,e.groupLabel)),Object(n.createElement)("div",null,Object(n.createElement)(T.Button,{isSecondary:!0,className:"bwf-contact-preferences__item-remove",onClick:function(){r(Object.keys(e)[0],e.groupKey)}},"Remove")))))})),It=Object(yt.a)((function(t){var e=t.items,r=t.onRemove;return Object(n.createElement)("div",{className:"bwf-contact-preferences__items-wrap"},Object(s.isEmpty)(e)?Object(n.createElement)("div",{className:"bwf-h4 bwf_text_center bwf-m-20"},"No Additional Columns Selected. Click the Add New Columns button."):e.map((function(t,e){return Object(n.createElement)(Ct,{item:t,key:"bwf-contact-preferences__item-".concat(e),index:e,onRemove:r})})))})),At=["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"],Tt=function(t){var e=t.onRequestClose,r=t.refreshTable,a=t.setModelData,c=Object(n.useContext)(l.d),i=St(Object(n.useState)(!1),2),u=i[0],f=i[1],m=St(Object(n.useState)(!1),2),p=m[0],b=m[1],h=St(Object(n.useState)(!1),2),d=h[0],y=h[1],v=St(Object(n.useState)(0),2),g=v[0],O=v[1],j=Object(n.useRef)(null),E=St(Object(n.useState)([]),2),_=E[0],k=E[1],x=St(Object(n.useState)([]),2),S=x[0],N=x[1],L=St(Object(n.useState)({}),2),P=L[0],C=L[1],I=St(Object(n.useState)(!1),2),A=I[0],F=I[1],G=Object(n.useRef)(new AbortController),$=Object(vt.a)(),D=function(){var t=xt(_t().mark((function t(){return _t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w()({path:Object(l.m)("/contact/export/custom-selections"),signal:G.current.signal}).then((function(t){if(200===t.code&&t.result){var e=Object.create({});Object.keys(t.result).forEach((function(r){"wishlist-member"!==r&&(e[r]={label:t.result[r].name},e[r].fields=Object.keys(t.result[r].selections).map((function(e){return{key:t.result[r].selections[e].slug,label:t.result[r].selections[e].name}})))})),C(e),b(!0)}})).catch((function(t){console.log(t)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=Object(n.useMemo)((function(){var t=[],e=["engaged","unengaged","broadcast_sent","broadcast_open","broadcast_click"];return Object.entries($).forEach((function(r){var n=St(r,2),o=n[0],a=n[1];if(e.includes(o))return!1;var c;c={key:o,label:a.labels.add},t.hasOwnProperty(a.group)?t[a.group].fields.push(c):t[a.group]={label:a.groupLabel,fields:[c]}})),jt(jt({},t),P)}),[$,P]);Object(n.useEffect)((function(){return D(),function(){G.current.abort()}}),[]),Object(n.useEffect)((function(){if(Object(s.isEmpty)(_)&&p&&!A){if(M.hasOwnProperty("contact_details")){var t=[],e=[];if(!Object(s.isEmpty)(bwfcrm_contacts_data.table_column_data.contactv2))bwfcrm_contacts_data.table_column_data.contactv2.map((function(e){Object(s.isObject)(e)&&t.push(e)})),Object.keys(M).forEach((function(r){M[r].fields.map((function(t){return t.key})).every((function(e){return t.some((function(t){return t.hasOwnProperty(e)}))}))&&e.push(Et({},r,M[r].label))}));k(t),N(e)}F(!0)}}),[M]);var z=function(t,e){var r=M[t].fields.map((function(t){return t.key}));if(S.some((function(e){return e.hasOwnProperty(t)})))k((function(t){return t.filter((function(t){return!r.some((function(e){return t.hasOwnProperty(e)}))}))})),N((function(e){return e.filter((function(e){return!e.hasOwnProperty(t)}))}));else{var n=M[t].fields.map((function(r){var n;return Et(n={},r.key,r.label),Et(n,"label",r.label),Et(n,"groupKey",t),Et(n,"groupLabel",e),n}));k((function(t){return Object(s.uniqBy)([].concat(wt(t),wt(n)),(function(t){return Object.keys(t)[0]}))})),N((function(r){return[].concat(wt(r),[Et({},t,e)])}))}},U=function(){var t=xt(_t().mark((function t(){return _t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),t.prev=1,t.next=4,w()({path:Object(l.m)("/user-preference/".concat(Object(l.x)(),"/")),method:"POST",data:{data:{contact_columnv2:_}}}).then((function(t){if(200!==t.code)throw Error(Object(l.j)(null==t?void 0:t.message));bwfcrm_contacts_data.table_column_data.contactv2=_,c(t.message),Object(l.fb)(c,2e3),r(),e(),f(!1)})).catch((function(t){throw Error(Object(l.j)(null==t?void 0:t.message))}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),f(!1),a({status:!0,modalTitle:Object(o.__)("Save Columns"),error:t.t0.message?t.t0.message:Object(o.__)("Error in saving preferences","wp-marketing-automations")});case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}();return Object(n.createElement)(T.Modal,{title:Object(n.createElement)(n.Fragment,null,Object(o.__)("Table Columns","wp-marketing-automations"),Object(n.createElement)("span",null,"Add new columns or arrange existing columns in contact table")),ref:j,onRequestClose:function(){return e()},className:"bwf-admin-modal bwf-contact-preferences-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-contact-preferences-modal__content"},d?Object(n.createElement)("div",{className:"bwf-contact-preferences"},Object(n.createElement)("div",{className:"bwf-contact-preferences__header"},Object(n.createElement)("div",{className:"bwf-contact-preferences__back-btn",onClick:function(){return y(!1)}},Object(n.createElement)(B.a,{icon:"arrow-left-long",width:20,height:14}),Object(n.createElement)("span",null,"Back"))),Object(n.createElement)("div",{className:"bwf-contact-preferences__items-wrap"},Object(s.isEmpty)(Object.keys(M))||!0===$?Object(n.createElement)(Ft,null):[].concat(At,wt(Object.keys(P))).map((function(t,e){return M.hasOwnProperty(t)&&Object(n.createElement)("div",{className:"bwf-contact-preferences__add-col-group",key:"bwf-contact-preferences__add-col-group-".concat(e)},Object(n.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return O((function(t){return t!==e&&e}))}},Object(n.createElement)("label",{className:"bwf-contact-preferences__add-col-group-header"},Object(n.createElement)(T.CheckboxControl,{checked:S.some((function(e){return e.hasOwnProperty(t)})),onChange:function(){return z(t,M[t].label)},onClick:function(e){e.stopPropagation(),z(t,M[t].label)}}),Object(n.createElement)("div",{className:"bwf-contact-preferences__add-col-group-title"},M[t].label,function(t){var e=M[t].fields.map((function(t){return t.key})),r=0;return e.forEach((function(t){_.forEach((function(e){e.hasOwnProperty(t)&&r++}))})),r>0?Object(n.createElement)("span",null," (",r," Selected )"):""}(t))),Object(n.createElement)(T.Button,{className:"bwf-contact-preferences__accordian-icon",onClick:function(t){t.stopPropagation(),O((function(t){return t!==e&&e}))}},Object(n.createElement)(B.a,{icon:g===e?"tailless-arrow-up":"tailless-arrow-down",size:24}))),g===e&&Object(n.createElement)("div",{className:"bwf-contact-preferences__add-col-group-content"},M[t].fields.map((function(e,r){return Object(n.createElement)("label",{className:"bwf-contact-preferences__add-col-group-item",key:"bwf-contact-preferences__add-col-group-item-".concat(r)},Object(n.createElement)(T.CheckboxControl,{checked:_.some((function(t){return t.hasOwnProperty(e.key)})),onChange:function(){return function(t,e,r,n){var o=M[r].fields.map((function(t){return t.key}));_.some((function(e){return e.hasOwnProperty(t)}))?k((function(e){var n=e.filter((function(e){return!e.hasOwnProperty(t)}));return o.every((function(t){return n.hasOwnProperty(t)}))||N((function(t){return t.filter((function(t){return!t.hasOwnProperty(r)}))})),n})):k((function(a){var c,i=[].concat(wt(a),[(c={},Et(c,t,e),Et(c,"label",e),Et(c,"groupKey",r),Et(c,"groupLabel",n),c)]);return o.every((function(t){return i.some((function(e){return e.hasOwnProperty(t)}))}))&&N((function(t){return[].concat(wt(t),[Et({},r,n)])})),i}))}(e.key,e.label,t,M[t].label)}}),Object(n.createElement)("div",null,e.label))}))))})))):Object(n.createElement)("div",{className:"bwf-contact-preferences"},Object(n.createElement)("div",{className:"bwf-contact-preferences__header"},Object(n.createElement)("div",{className:"bwf-contact-preferences__header-heading"},Object(o.__)("Columns")),Object(n.createElement)(T.Button,{isSecondary:!0,onClick:function(){return y(!0)}},Object(o.__)("Add New Columns"))),p&&A?Object(n.createElement)(It,{helperContainer:j.current,helperClass:"bwf-contacts-preferences-item__helper",useDragHandle:!0,axis:"y",items:_,onRemove:function(t,e){var r=M[e].fields.map((function(t){return t.key}));k((function(n){var o=n.filter((function(e){return!e.hasOwnProperty(t)}));return r.every((function(t){return o.hasOwnProperty(t)}))||N((function(t){return t.filter((function(t){return!t.hasOwnProperty(e)}))})),o}))},onSortEnd:function(t){var e=t.oldIndex,r=t.newIndex;e!==r&&k((function(t){return Object(yt.d)(t,e,r)}))}}):Object(n.createElement)(Ft,{type:"fields"}))),Object(n.createElement)("div",{className:"bwf-contact-preferences__actions"},Object(n.createElement)(T.Button,{onClick:function(){return e()},disabled:u},"Cancel"),Object(n.createElement)(T.Button,{isPrimary:!0,onClick:U,disabled:u,isBusy:u},"Save")))},Ft=function(t){var e=t.type,r=void 0===e?"add-col":e;return wt(Array(5)).map((function(t,e){return Object(n.createElement)("div",{key:"bwf-preferences-placeholder-".concat(e),className:"bwf-contact-preferences__add-col-group"},Object(n.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(n.createElement)("div",{className:"bwf-flex"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-20 bwf-ml-16"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-ml-10 ".concat("fields"===r?"bwf-w-90":"bwf-w-120")})),"fields"===r&&Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-20 bwf-mr-15"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-mr-15 ".concat("fields"===r?"bwf-w-80 bwf-h-30 bwf-rounded-4":"bwf-w-20 bwf-h-20")})))}))},Gt=function(t){var e=t.refreshTable,r=t.setModelData,a=St(Object(n.useState)(!1),2),c=a[0],i=a[1];return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-sort-button components-button is-secondary bwf-btn-small bwf-btn-gray",onClick:function(){return i(!0)}},Object(n.createElement)(B.a,{icon:"filters",size:16}),Object(o.__)("Columns","wp-marketing-automations")),c&&Object(n.createElement)(Tt,{onRequestClose:function(){return i(!1)},refreshTable:e,setModelData:r}))},$t=r(285),Dt=r(271),Mt=(r(1004),r(144));function Bt(t){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var zt=["getStateProp"];function Ut(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(r),!0).forEach((function(e){Rt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ut(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Rt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Bt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Bt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yt(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var Vt=function(){var t=Object(Mt.a)("exporter"),e=t.getStateProp;return qt(qt({},Yt(t,zt)),{},{getExporter:function(){return e("export")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getExistingExport:function(){return e("existingExport")}})},Ht=r(143);function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Kt=["fetch","setStateProp"];function Qt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Zt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qt(Object(r),!0).forEach((function(e){Jt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Jt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Wt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Wt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xt(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var te=function(){var t=Object(Ht.a)("exporter"),e=t.fetch,r=t.setStateProp;return Zt(Zt({},Xt(t,Kt)),{},{fetch:function(t,r,n){e("GET",Object(l.m)("/contact/export?limit=".concat(t,"&offset=").concat(r,"&search=").concat(n)))},setStateExportValues:function(t,e){r(t,e)}})},ee=r(893),re=r(141),ne=r(76);function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ae(){ae=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==oe(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(oe(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function ce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ie(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ce(Object(r),!0).forEach((function(e){le(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function le(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==oe(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===oe(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ue(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function se(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return fe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var me=function(t){var e=t.isAdd,r=Object(v.i)(),a=Object(vt.a)(),c=se(Object(n.useState)({loading:!1,status:!1}),2),i=c[0],f=c[1],m=se(Object(n.useState)(!1),2),p=m[0],b=m[1],h=se(Object(n.useState)({}),2),d=h[0],y=h[1],g=r.s,O=void 0===g?"":g,j=te(),E=j.fetch,_=j.setStateExportValues,k=Vt(),x=k.getExporter,S=k.getOffset,N=k.getLoading,L=k.getTotalCount,P=k.getPageNumber,C=k.getPerPageCount,G=[{key:"actions",label:"",isLeftAligned:!1,cellClassName:"bwf-col-action bwf-w-45"},{key:"name",label:Object(o.__)("Name","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-300"},{key:"createdon",label:Object(o.__)("Created On","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-40p"},{key:"contactcount",label:Object(o.__)("Contacts","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-120 bwf-col-center"},{key:"status",label:"Status",isLeftAligned:!1,cellClassName:"bwf-w-150"},{key:"file",label:"",isLeftAligned:!1,cellClassName:"bwf-w-150"}],$=x(),D=P(),M=C(),z=L(),U=S(),q=N(),R=Object(re.a)().setPageCountData;Object(n.useEffect)((function(){R({contacts_export:z})}),[z]),Object(n.useEffect)((function(){e||E(M,U,O)}),[M,U,O,e]);var Y,V=function(t){t!==M&&_("limit",t)},H=function(){var t,e=(t=ae().mark((function t(e){var r,n=arguments;return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},f(ie(ie({},r),{},{status:!0})),t.prev=2,t.next=5,w()({path:Object(l.m)("/contact/export/delete/".concat(e)),method:"DELETE"}).then((function(t){if(200!==t.code)throw Error(Object(l.j)(null==t?void 0:t.message));f({}),E(M,U,O)})).catch((function(t){throw Error(Object(l.j)(null==t?void 0:t.message))}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),f({status:!0,error:t.t0.message?t.t0.message:Object(o.__)("Error in deleting export","wp-marketing-automations")});case 10:case"end":return t.stop()}}),t,null,[[2,7]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){ue(a,n,o,c,i,"next",t)}function i(t){ue(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(t){return e.apply(this,arguments)}}(),W=function(t){return Object(n.createElement)(I.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var r=e.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(A.a,{isClickable:!0,onInvoke:function(){y(t),b(!0),r()}},Object(n.createElement)(F.a,{justify:"flex-start"},Object(n.createElement)(F.c,null,Object(n.createElement)(B.a,{icon:"view"})),Object(n.createElement)(F.c,null,Object(o.__)("View","wp-marketing-automations")))),Object(n.createElement)(A.a,{isClickable:!0,onInvoke:function(){var e={status:!0,deleteEntityName:Object(n.createElement)(n.Fragment,null,Object(o.__)("item ")," ",t.title),buttonConfirm:Object(o.__)("Delete","wp-marketing-automations"),buttonCancel:Object(o.__)("Cancel","wp-marketing-automations")};f(ie(ie({},e),{},{onConfirm:function(){return H(t.id,e)}})),r()}},Object(n.createElement)(F.a,{justify:"flex-start"},Object(n.createElement)(F.c,null,Object(n.createElement)(B.a,{icon:"trash"})),Object(n.createElement)(F.c,null,Object(o.__)("Delete","wp-marketing-automations")))))}})},K={1:"In Progress",2:"Failed",3:"Completed"},Q=function(t){return 3===parseInt(t.status)&&t.file?Object(n.createElement)("a",{target:"_blank",href:Object(l.U)()+"/wp-json"+Object(l.m)("/contact/export/download/".concat(t.id,"?bwf-nonce=").concat(Object(l.q)())),title:"Download",className:"bwf-a-no-underline",rel:"noreferrer"},Object(n.createElement)("div",{className:"bwf-download-btn"},Object(n.createElement)("span",null,Object(n.createElement)(B.a,{icon:"download"})),Object(n.createElement)("span",null,Object(o.__)("Download","wp-marketing-automations")))):Object(n.createElement)("div",{className:"bwf-download-btn disable"},Object(n.createElement)("span",null,Object(n.createElement)(B.a,{icon:"download",color:"#353030"})),Object(n.createElement)("span",null,Object(o.__)("Download","wp-marketing-automations")))},Z=Object(s.isEmpty)($)?[]:$.map((function(t){return[{display:W(t),value:"action"},{display:t.title?t.title:"-",value:t.title},{display:(r=t.created_date,Object(n.createElement)("div",{className:"bwf-display-flex-column"},Object(n.createElement)("span",null,Object(l.N)(r)))),value:""},{display:t.count,value:t.count},{display:(e=t,Object(n.createElement)("span",{className:"bwf-export-status-tag bwf-status-"+parseInt(e.status)},K[parseInt(e.status)])),value:t.status},{display:Q(t),value:""}];var e,r}));return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)(u.a,{title:"",className:"bwf-export-contact-table",rows:Z,headers:G,query:{paged:D},rowsPerPage:M,totalRows:z,isLoading:q,onPageChange:function(t,e){_("offset",(t-1)*M)},onQueryChange:function(t){return"per_page"!==t?function(){}:V},showMenu:!1,rowHeader:!0,actions:[],emptyMessage:Object(o.__)("No export available","wp-marketing-automations")}),Object(n.createElement)(et.a,{modalTitle:Object(o.__)("Delete"),confirmText:i.confirmText,deleteEntityName:i.deleteEntityName,confirmButtonText:i.buttonConfirm,cancelButtonText:i.buttonCancel,onConfirm:i.onConfirm,isLoading:i.loading,successMessage:i.success,errorMessage:i.error,onRequestClose:function(){return f({status:!1})},isOpen:i.status,isDelete:!0}),p&&!Object(s.isEmpty)(d)&&Object(n.createElement)(T.Modal,{onRequestClose:function(){return b(!1)},className:"bwf-admin-modal bwf-admin-modal-large bwf-export-list-modal bwf-show-close"},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},"Export Details"),Object(n.createElement)("span",{onClick:function(){return b(!1)},className:"bwf-modal-close"},Object(n.createElement)(B.a,{icon:"close",color:"#353030"}))),(Y=[],Object(s.isEmpty)(d.fields)||d.fields.map((function(t){var e=se(Object.entries(t)[0],2),r=e[0];e[1],a.hasOwnProperty(r)&&Y.push(a[r].labels.add)})),Object(n.createElement)(n.Fragment,null,d.hasOwnProperty("filters")&&Object(n.createElement)("div",{className:"bwf-export-modal-row"},Object(n.createElement)("div",{className:"bwf-export-modal-row-label"},Object(o.__)("Filters","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-export-modal-row-value"},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(s.isEmpty)(t)?"-":Object(n.createElement)(n.Fragment,null,Object(ee.b)(t))}(d.filters))),!Object(s.isEmpty)(Y)&&Object(n.createElement)("div",{className:"bwf-export-modal-row"},Object(n.createElement)("div",{className:"bwf-export-modal-row-label"},Object(o.__)("Fields","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-export-modal-row-value"},Y.join(" | ")))))))},pe=function(t){var e=t.setAdd,r=t.isAdd;return Object(n.useEffect)((function(){Object(l.g)("Export List")}),[]),Object(n.createElement)(n.Fragment,null,Object(n.createElement)(me,{setAdd:e,isAdd:r}))},be=r(284);r(138);function he(t){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(){de=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==he(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(he(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function ye(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}var ve=function(){var t,e=(t=de().mark((function t(){var e;return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w()({path:Object(l.m)("/contact/export/custom-selections")});case 2:if((e=t.sent)&&e.result){t.next=5;break}throw new Error(Object(o.__)("Unable to get Custom Export Selections","wp-marketing-automations"));case 5:return t.abrupt("return",e.result);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){ye(a,n,o,c,i,"next",t)}function i(t){ye(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}(),ge=function(){return Object(rt.useQuery)(["bwfcrm-get-export-selections"],ve)};function we(t){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oe(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==we(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===we(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function je(t){return function(t){if(Array.isArray(t))return Ee(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Ee(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ee(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _e=function(t){var e=t.checked,r=void 0!==e&&e,o=t.onChange,a=void 0===o?function(){}:o,c=t.title,i=void 0===c?"":c,l=t.count,u=void 0===l?0:l,s=t.groupKey,f=void 0===s?"":s,m=t.selectedGroup,p=void 0===m?"":m,b=t.setSelectedGroup,h=void 0===b?function(){}:b;return Object(n.createElement)("div",{className:"bwf-export-field-header-wrap",onClick:function(t){t.target.classList.contains("components-checkbox-control__label")||t.target.classList.contains("components-checkbox-control__input")||h(p==f?"":f)}},Object(n.createElement)("div",null,Object(n.createElement)(T.CheckboxControl,{className:"bwf-export-toggler",checked:r,onChange:a,label:Object(n.createElement)(n.Fragment,null,i,u>0&&Object(n.createElement)("span",{className:"bwf-light"}," ","( ",u," selected )"))})),Object(n.createElement)("span",null,Object(n.createElement)(B.a,{icon:"tailless-arrow-down-new",size:15})))},ke=function(t){var e=t.selected,r=t.onChange,o=t.selectedGroup,a=t.setSelectedGroup,c=ge(),i=c.isLoading,l=c.data,u=Array.isArray(e)?e.map((function(t){return Object.keys(t)[0]})):[],s=function(t,n){if(t)r([].concat(je(e),[n]));else{var o=e.filter((function(t){return Object.keys(t)[0]!==Object.keys(n)[0]}));r(o)}},f=function(t,n){var o=l[n].selections,a=Object.keys(o);if(t){var c=a.map((function(t){return!u.includes(t)&&Oe({},t,o[t].name)})).filter(Boolean);r([].concat(je(e),je(c)))}else{var i=e.filter((function(t){return!a.includes(Object.keys(t)[0])}));r(i)}};return i?Object(n.createElement)(n.Fragment,null):Object.keys(l).map((function(t,r){var c,i=l[t],m=i.name,p=i.selections,b=Object.keys(l[t].selections).filter((function(t){return u.includes(t)}));return Object(n.createElement)("div",{className:"bwf-export-field-section",key:r},Object(n.createElement)(_e,{title:m,checked:(c=t,Object.keys(l[c].selections).filter((function(t){return u.includes(t)})).length===Object.keys(l[c].selections).length),groupKey:t,onChange:function(e){return f(e,t)},count:Array.isArray(b)?b.length:0,selectedGroup:o,setSelectedGroup:a}),o==t&&Object(n.createElement)("div",{className:"bwf-p-20 bwf-export-field-list"},Object.keys(p).map((function(t,r){var o=Array.isArray(e)&&e.find((function(e){return!!e[t]}));return Object(n.createElement)("div",{key:r},Object(n.createElement)(T.CheckboxControl,{label:p[t].name,className:"bwf-export-field",checked:o,onChange:function(e){return s(e,Oe({},t,p[t].name))}}))}))))}))};function xe(t){return function(t){if(Array.isArray(t))return Le(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ne(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||Ne(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(t,e){if(t){if("string"==typeof t)return Le(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Le(t,e):void 0}}function Le(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Pe=function(t){var e=t.title,r=t.setTitle,a=t.selected,c=t.setSelected,i=t.setStep,l=t.expfilter,u=Se(Object(n.useState)("contact_details"),2),f=u[0],m=u[1],p=Se(Object(n.useState)(""),2),b=p[0],h=p[1],d=Object(v.i)(),y=Object(vt.a)(),g=Object(n.useMemo)((function(){var t=[],e=["engaged","unengaged","broadcast_sent","broadcast_open","broadcast_click"];return Object.entries(y).map((function(r){var n=Se(r,2),o=n[0],a=n[1];if(e.includes(o))return!1;var c;c={key:o,label:a.labels.add},t.hasOwnProperty(a.group)?t[a.group].fields.push(c):t[a.group]={label:a.groupLabel,fields:[c]}})),t}),[y]);Object(n.useEffect)((function(){if(Object(s.isEmpty)(a)&&g.hasOwnProperty("contact_details")){var t=[];g.contact_details.fields.map((function(e){var r={};r[e.key]=e.label,t.push(r)})),c(t)}}),[]);var w=function(t){var e=!1;return a.find((function(r){var n=Se(Object.entries(r)[0],2),o=n[0];n[1];t==o&&(e=!0)})),e},O=function(t,e){var r=0,o=!1;return g[t].fields.map((function(t){w(t.key)&&r++})),parseInt(g[t].fields.length)===parseInt(r)&&(o=!0),Object(n.createElement)("div",{className:"bwf-export-field-header-wrap",onClick:function(e){e.target.classList.contains("components-checkbox-control__label")||e.target.classList.contains("components-checkbox-control__input")||m(f==t?"":t)}},Object(n.createElement)("div",null,Object(n.createElement)(T.CheckboxControl,{checked:o,className:"bwf-export-toggler",onChange:function(e){!function(t,e){var r=xe(a);t?g[e].fields.map((function(t){if(!w(t.key)){var e={};e[t.key]=t.label,r.push(e)}})):g[e].fields.map((function(t){w(t.key)&&(r=r.filter((function(e){var r=Se(Object.entries(e)[0],2),n=r[0];r[1];return n!==t.key})))})),c(r)}(e,t)},label:Object(n.createElement)(n.Fragment,null,e,r>0&&Object(n.createElement)("span",{className:"bwf-light"}," ","( ",r," selected )"))})),Object(n.createElement)("span",null,Object(n.createElement)(B.a,{icon:"tailless-arrow-down-new",size:15})))},j=Object(n.createElement)(n.Fragment,null,["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"].map((function(t,e){return g.hasOwnProperty(t)?Object(n.createElement)("div",{className:"bwf-export-field-section",key:"bwf-export-field-section-".concat(e)},O(t,g[t].label),f==t&&function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(n.createElement)("div",{className:"bwf-export-field-list"},t.map((function(t,e){return Object(n.createElement)(T.CheckboxControl,{label:t.label,className:"bwf-export-field",checked:w(t.key),onChange:function(e){if(e){var r=xe(a),n={};n[t.key]=t.label,r.push(n),c(r)}else c(a.filter((function(e){var r=Se(Object.entries(e)[0],2),n=r[0];r[1];return n!==t.key})))},key:"bwf-export-field-".concat(e)})})))}(g[t].fields)):["woocommerce","contact_custom_fields"].includes(t)?"":function(t){return Object(n.createElement)("div",{className:"bwf-export-field-section",key:"'bwf-export-field-section'-".concat(t)},Object(n.createElement)("div",{className:"bwf-export-field-header-wrap"},Object(n.createElement)("div",{className:"bwf-w-120 bwf-placeholder-temp"}),Object(n.createElement)("div",{className:"bwf-w-30 bwf-placeholder-temp"})),0===parseInt(t)&&Object(n.createElement)("div",{className:"bwf-export-field-list"},Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:1}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:2}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:3}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:4}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:5}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:6})))}(e)})),Object(n.createElement)(ke,{selected:a,onChange:function(t){c(t)},selectedGroup:f,setSelectedGroup:m}));return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwfcrm-overview-wrap bwf-contact-export-step-one"},b&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)(T.Notice,{status:"error",onRemove:function(){return h("")}},b),Object(n.createElement)("div",{className:"bwf_clear_20"})),Object(n.createElement)(T.TextControl,{type:"text",value:e,placeholder:Object(o.__)("Enter Name","wp-marketing-automations"),label:Object(n.createElement)("span",{className:"bwf-h4"},Object(o.__)("Name","wp-marketing-automations")),onChange:function(t){r(t)}}),Object(n.createElement)("div",{className:"bwf-field-wrapper"},j)),Object(n.createElement)("div",{className:"bwfcrm-export-buttons bwf-display-flex"},Object(n.createElement)("div",null),Object(n.createElement)(T.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,onClick:function(){Object(s.isEmpty)(e)?h(Object(o.__)("Name is required.","wp-marketing-automations")):Object(s.isEmpty)(a)?h(Object(o.__)("Please select field to export.","wp-marketing-automations")):(Object(s.isEmpty)(l)||Object(v.k)(l,"/",d),i(2))}},Object(n.createElement)("span",null,Object(o.__)("Next","wp-marketing-automations")))))},Ce=r(151),Ie=r(77),Ae=r(38);function Te(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Fe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fe(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ge=Object(Ie.a)(Object(l.X)()).formatAmount,$e=function(t){var e=t.setContactCount,r=function(t){var e=Object(s.isEmpty)(t.country)?"":X[t.country],r=Object(l.yb)([t.city,t.state,e],", ");return Object(s.isEmpty)(Object(s.trim)(r))?"":r},a=function(t){var e=r(t);return t.country||e?Object(n.createElement)(F.a,{justify:"start"},!Object(s.isEmpty)(t.country)&&Object(n.createElement)(F.c,null,Object(n.createElement)($t.a,{code:t.country,size:18})),Object(n.createElement)(F.c,null,e&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",null,r(t)),Object(n.createElement)("br",null)))):"-"},c=function(t){return Object(n.createElement)(Ae.a,{href:"admin.php?page=autonami&path=/contact/"+t.id,className:"bwf-a-no-underline"},Object(n.createElement)(G.a,{contact:t,hideJoiningDate:!0}))},f=function(t){return Object(n.createElement)("div",{className:"bwf-c-contact-details-cell"},t.email&&Object(n.createElement)(F.a,{justify:"start",align:"top"},Object(n.createElement)(F.c,null,Object(n.createElement)(B.a,{icon:"mail"})),Object(n.createElement)(F.c,null,Object(n.createElement)(Ae.a,{href:"mailto:"+t.email,className:"bwf-a-no-underline",type:"external"},t.email))),t.phone&&Object(n.createElement)(F.a,{justify:"start",align:"top"},Object(n.createElement)(F.c,null,Object(n.createElement)(B.a,{icon:"phone"})),Object(n.createElement)(F.c,null,Object(n.createElement)(Ae.a,{href:"tel:"+t.phone,className:"bwf-a-no-underline",type:"external"},t.phone))))},m=Object($.a)(),p=m.getPageNumber,b=m.getPerPageCount,h=m.getTotalCount,d=m.getLoading,y=m.getContacts,v=Object(D.a)(),g=v.fetch,w=v.setStateProp,O=t.query;Object(n.useEffect)((function(){return w("limit",10),function(){return w("limit",25)}}),[]);var j=y(),E=p(),_=b(),k=h(),x=d(),S=Te(Object(n.useState)(!0),2),N=S[0],L=S[1];Object(n.useEffect)((function(){N&&k>0&&L(!1),e(k)}),[k]);var P=[{key:"contact",label:Object(o.__)("Contact","wp-marketing-automations"),isLeftAligned:!0,required:!0},{key:"contact_details",label:Object(o.__)("Details","wp-marketing-automations"),isLeftAligned:!0}];Object(l.xb)()?(P.push({key:"total_spent",label:Object(o.__)("Total Spent","wp-marketing-automations"),isLeftAligned:!0}),P.push({key:"last_order",label:Object(o.__)("Last Order","wp-marketing-automations"),isLeftAligned:!0})):P.push({key:"column_location",label:Object(o.__)("Location","wp-marketing-automations"),isLeftAligned:!0});var C=function(t){var e=t.wc,r=e.total_order_count,a=e.total_order_value;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-listing-total-spent"},a&&r?Object(n.createElement)("div",{className:"bwf-c-total-spent-amount"},Ge(a)," |"," ",r," ",Object(o.__)(parseInt(r)>1?"orders":"order","wp-marketing-automations")):"-"))},I=function(t){var e=t.wc.l_order_date;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",null,e&&"0000-00-00"!=e?Object(n.createElement)("div",{className:"bwf-c-total-spent-amount"},Object(l.M)(e)):"-"))},A=j.map((function(t){var e=function(t){return Object(s.merge)({id:0,email:"-",first_name:"",last_name:"",creation_date:"",fields:{marketing_status:"0",first_order_date:"",country:"",city:"",state:"",phone:""},wc:{id:1,l_order_date:"",total_order_count:0,total_order_value:0,total_purchased_items:0}},t)}(t),n=[{display:c(e),value:Object(l.yb)([e.first_name,e.last_name]," ")},{display:f(e),value:Object(o.__)("Email: "+e.email+", Phone: "+e.phone,"wp-marketing-automations")}];return Object(l.xb)()?(n.push({display:C(e),value:""}),n.push({display:I(e),value:""})):n.push({display:a(e),value:r(e)}),n})),T=function(t){t!==_&&g(O,0,t,!0,!1,"",!1)},M=i()("bwfcrm-contacts-list",{"has-search":!0}),z=parseInt(k)>0?" ("+parseInt(k)+")":"";return Object(n.createElement)(u.a,{className:M,title:Object(o.__)("Contacts ","wp-marketing-automations")+z,rows:A,headers:P,query:{paged:E},rowsPerPage:_,totalRows:k,isLoading:x,onPageChange:function(t,e){g(O,(t-1)*_,_,!0,!1,"",!1)},onQueryChange:function(t){return"per_page"!==t?function(){}:T},showMenu:!1,emptyMessage:Object(o.__)("No contacts found","wp-marketing-automations")})};$e.defaultProps={contacts:[]};var De=$e,Me=r(156),Be=["page","path","filter"];function ze(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var Ue=function(t){var e=t.setStep,r=t.setExportFilter,a=t.contactCount,c=t.setContactCount,i=Object(vt.a)(),u=Object(v.i)(),f=u.page,m=u.path,p=(u.filter,ze(u,Be)),b=Object(D.a)(),h=Object(n.useRef)(p),d=b.fetch;Object(n.useEffect)((function(){d(p,0,10,!0,!1,"",!1)}),[]),Object(n.useEffect)((function(){Object(l.Bb)(p,h.current)||d(p,0,10,!0,!1,"",!1),h.current=p}),[p]);var y=Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-contact-export-step-two"},Object(n.createElement)("div",{className:"bwf-bulk-action-step-loading bwf-p-20"},Object(n.createElement)("div",{className:"bwf-bulk-action-step-loading"},Object(n.createElement)("div",{className:"bwf-filter-placeholder"},Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(n.createElement)("div",{className:"bwf-w-150"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-150"})),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-36"})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}),Object(n.createElement)("br",null),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-400"})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(n.createElement)("div",null),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-36 bwf-w-90"}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-w-150"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(Me.a,{numberOfRows:5,headers:[{key:"2",label:Object(n.createElement)("div",{className:"bwf-w-210"},Object(n.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))},{key:"3",label:Object(n.createElement)("div",{className:"bwf-w-210"},Object(n.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))},{key:"4",label:Object(n.createElement)("div",{className:"bwf-w-210"},Object(n.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))}]})))),Object(n.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-36"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-36"})));return!0===i?Object(n.createElement)(n.Fragment,null,y):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-contact-export-step-two"},Object(n.createElement)("div",{className:"bwf-export-filter-wrapper"},Object(n.createElement)("div",{className:"bwf-display-flex",style:{justifyContent:"space-between"}},Object(n.createElement)("div",{className:"bwf-h3 bwf-w-300"},Object(o.__)("Segment Contacts","wp-marketing-automations")),Object(n.createElement)(mt.c,{addAdvance:!1})),Object(n.createElement)("div",{className:"bwf-p-0"},Object(n.createElement)(Ce.a,{siteLocale:"en-US",currency:Object(l.xb)()?bwfcrm_contacts_data.currency:{},config:{title:Object(o.__)("Select Rules","wp-marketing-automations"),filters:i,footerComponent:function(t){return Object(n.createElement)(mt.a,{filter:t.data,config:t.config})},enableGrouping:!0},path:"/contacts",query:u}))),Object(n.createElement)("div",{className:"bwf-export-table-wrapper"},Object(n.createElement)(De,{setContactCount:c}))),Object(n.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(n.createElement)(T.Button,{className:"bwfcrm-export-prev bwf-display-flex",isSecondary:!0,onClick:function(){Object(s.isEmpty)(p)||Object(v.k)({page:f,path:m},"/",{}),r(p),e(1)}},Object(n.createElement)("span",null,Object(o.__)("Previous","wp-marketing-automations"))),Object(n.createElement)(T.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,disabled:!(a>0),onClick:function(){Object(s.isEmpty)(p)||Object(v.k)({page:f,path:m},"/",{}),r(p),a>0&&e(3)}},Object(n.createElement)("span",null,Object(o.__)("Next","wp-marketing-automations")))))},qe=r(282),Re=r(883);function Ye(t){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ve(){Ve=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Ye(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Ye(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function He(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function We(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ke(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ke(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Qe=function(t){var e=t.exportId,r=void 0===e?"":e,a=t.setLoading,c=t.setComplete,i=We(Object(n.useState)(!1),2),u=i[0],f=i[1],m=We(Object(n.useState)({}),2),p=m[0],b=m[1],h=We(Object(n.useState)(0),2),d=h[0],y=h[1],v=We(Object(n.useState)(!1),2),g=v[0],O=v[1];Object(n.useEffect)((function(){100===parseInt(d)&&setTimeout((function(){O(!0)}),2e3)}),[d]);var j=function(){var t,e=(t=Ve().mark((function t(){return Ve().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w()({method:"GET",path:Object(l.m)("/contact/export/".concat(r))}).then((function(t){200==t.code&&b(t.result)}));case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){He(a,n,o,c,i,"next",t)}function i(t){He(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(!Object(s.isEmpty)(p))if(3==p.status)a(!1),f(!0),y(100),c(!0);else{var t=parseInt(p.offset)/parseInt(p.count)*100;y(t<100?parseInt(t):100)}}),[p]),Object(Re.a)((function(){u||j()}),5e3),Object(n.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},r&&u&&g?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("h2",null,Object(o.__)("Export Completed","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Your file is ready for download. Now you can download the exported contact list.","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"})):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Export Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("The file is being created in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(qe.a,{noStriped:!0,size:"sm",progress:parseInt(d),text:"".concat(parseInt(d),"% Completed")}),Object(n.createElement)("div",{className:"bwf_clear_20"})))};function Ze(t){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(){Je=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Ze(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Ze(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Xe(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function tr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return er(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return er(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var rr=function(t){var e=t.title,r=t.fields,a=t.expfilter,c=t.setPending,i=t.setAdd,u=t.contactCount,s=tr(Object(n.useState)(!1),2),f=s[0],m=s[1],p=tr(Object(n.useState)(""),2),b=p[0],h=p[1],d=tr(Object(n.useState)(!1),2),y=d[0],v=d[1],g=tr(Object(n.useState)(!1),2),O=g[0],j=g[1],E=tr(Object(n.useState)(Object(o.__)("Unable to create export.","wp-marketing-automations")),2),_=E[0],k=E[1];Object(n.useEffect)((function(){c(!0),x()}),[]);var x=function(){var t,n=(t=Je().mark((function t(){var n;return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={title:e,fields:r,filters:a,count:u},t.next=4,w()({method:"POST",data:n,path:Object(l.m)("/contact/export/add")}).then((function(t){200==t.code&&(Object(l.H)()||(bwfcrm_contacts_data.first_export_id=2),m(!0),t.result.hasOwnProperty("id")&&h(t.result.id))}));case 4:t.next=11;break;case 6:t.prev=6,t.t0=t.catch(0),m(!0),v(!0),t.t0.hasOwnProperty("message")&&k(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){Xe(a,n,o,c,i,"next",t)}function i(t){Xe(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return n.apply(this,arguments)}}();return O&&setTimeout((function(){document.querySelectorAll(".bwf-export-add-modal .bwf-crm-export-init .bwf-stepper .bwf-stepper__steps")[0].remove()}),2e3),Object(n.createElement)(n.Fragment,null,Object(n.createElement)(T.Card,{className:"bwfcrm-overview-wrap bwf-contact-export-step-three"},Object(n.createElement)("div",{className:"bwf-p-20",style:{alignItems:"center"}},f?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_20"}),b?Object(n.createElement)(Qe,{exportId:b,setLoading:c,setComplete:j}):Object(n.createElement)("div",{className:"bwf-h4"},y&&Object(n.createElement)(T.Notice,{status:"error",isDismissible:!1},_))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-30 bwf-w-90"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-270"}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-100p"}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-150"}),Object(n.createElement)("div",{className:"bwf_clear_20"}))),Object(n.createElement)("div",{className:"bwf_clear_20"}))),Object(n.createElement)("div",{className:"bwf-display-flex"},f?Object(n.createElement)(n.Fragment,null,O?Object(n.createElement)(T.Button,{isPrimary:!0,onClick:function(){window.open(Object(l.U)()+"/wp-json"+Object(l.m)("/contact/export/download/".concat(b,"?bwf-nonce=").concat(Object(l.q)())),"_blank")}},Object(o.__)("Download File","wp-marketing-automations")):Object(n.createElement)(T.Button,{isPrimary:!0,onClick:function(){i(!1)}},Object(n.createElement)("span",{className:"bwf-mr-5"},Object(o.__)("Go to Export List","wp-marketing-automations")))):Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-90"}))),Object(n.createElement)("div",{className:"bwf_clear_30"}))};function nr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return or(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return or(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function or(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ar=function(t){var e=t.setAdd,r=nr(Object(n.useState)(!1),2),a=r[0],c=(r[1],nr(Object(n.useState)(1),2)),i=c[0],l=c[1],u=nr(Object(n.useState)(!1),2),s=u[0],f=u[1],m=nr(Object(n.useState)(""),2),p=m[0],b=m[1],h=nr(Object(n.useState)([]),2),d=h[0],y=h[1],v=nr(Object(n.useState)([]),2),g=v[0],w=v[1],O=nr(Object(n.useState)(0),2),j=O[0],E=O[1],_=function(t){switch(t){case 1:return Object(n.createElement)(Pe,{title:p,setTitle:b,selected:d,expfilter:g,setSelected:y,setStep:l});case 2:return Object(n.createElement)(Ue,{setStep:l,setExportFilter:w,contactCount:j,setContactCount:E});case 3:return Object(n.createElement)(rr,{title:p,fields:d,expfilter:g,contactCount:j,setPending:f,setAdd:e})}},k=[{key:1,label:Object(o.__)("Fields","wp-marketing-automations"),content:_(1)},{key:2,label:Object(o.__)("Contacts","wp-marketing-automations"),content:_(2)},{key:3,label:Object(o.__)("Confirmation","wp-marketing-automations"),content:_(3)}];return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(T.Modal,{onRequestClose:function(){return e(!1)},className:"bwf-admin-modal bwf-admin-modal-xxl bwf-export-add-modal",title:"Add New Export",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-crm-export-init"},a?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(Z.a,null)):Object(n.createElement)(be.a,{steps:k,currentStep:i,isPending:s}))))};function cr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ir(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ir(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var lr=function(t){var e=t.setExport,r=cr(Object(n.useState)(!1),2),a=r[0],c=r[1];Object(n.useEffect)((function(){Object(l.g)(Object(o.__)("Export Contacts","wp-marketing-automations"))}),[]);var i=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(n.createElement)(B.a,{icon:"export",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(o.__)("Export your contacts to CSV file.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(o.__)("Start Exporting","wp-marketing-automations"),proCheck:!0,onClick:function(){Object(l.mb)()&&c(!0)}}]}}];return Object(n.createElement)(T.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-export-contact-modal",shouldCloseOnEsc:!1},Object(n.createElement)("div",{className:"bwf-export-modal-header"},Object(n.createElement)("div",{onClick:function(){Object(l.g)(Object(o.__)("Contacts","wp-marketing-automations")),Object(v.k)({page:"autonami",path:"/contacts/"},"/",{}),e(!1)},className:"bwf-flex",style:{cursor:"pointer",marginRight:"-10px"}},Object(n.createElement)(B.a,{icon:"close"})),Object(n.createElement)("div",{className:"bwf-export-modal-title"},Object(o.__)("Export Contacts","wp-marketing-automations")),!a&&Object(l.H)()&&Object(n.createElement)(T.Button,{variant:"primary",className:"bwf-add-contact-export-btn",onClick:function(){return c(!0)},isBusy:!1,disabled:!1},Object(o.__)("Add New Export","wp-marketing-automations"))),a&&Object(n.createElement)(ar,{setAdd:c}),Object(l.H)()?Object(n.createElement)(pe,{setAdd:c,isAdd:a}):Object(n.createElement)(Dt.a,{data:i}))};r(916);function ur(t){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var sr=["getStateProp"];function fr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function mr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?fr(Object(r),!0).forEach((function(e){pr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==ur(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ur(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function br(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var hr=function(){var t=Object(Mt.a)("importerReducer"),e=t.getStateProp;return mr(mr({},br(t,sr)),{},{showBackButton:function(){return e("showBackButton")},getExistingImports:function(){return e("existingImports")}})};function dr(t){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var yr=["fetch","setStateProp"];function vr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vr(Object(r),!0).forEach((function(e){wr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function wr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==dr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==dr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===dr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Or(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var jr,Er,_r,kr,xr=function(){var t=Object(Ht.a)("importerReducer"),e=t.fetch,r=t.setStateProp;return gr(gr({},Or(t,yr)),{},{showBackButton:function(t){return r("showBackButton",t)},fetch:function(){return e("GET",Object(l.m)("/import/processes"))}})},Sr=r(6);function Nr(){return(Nr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var Lr,Pr,Cr=function(t){return Sr.createElement("svg",Nr({id:"wlm_svg__WishList_Member","data-name":"WishList Member",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 532.46 217.17"},t),jr||(jr=Sr.createElement("defs",null,Sr.createElement("style",null,".wlm_svg__cls-1{fill:#1e7fc0}.wlm_svg__cls-2{fill:#333}"))),Er||(Er=Sr.createElement("g",{id:"wlm_svg__member"},Sr.createElement("path",{className:"wlm_svg__cls-1",d:"M238.05 219.81c-.11-3-.22-6.52-.21-10.12h-.1c-.78 3.15-1.82 6.64-2.74 9.53l-3 9.58h-4.31l-2.69-9.49c-.79-2.89-1.6-6.38-2.21-9.62h-.08c-.12 3.34-.26 7.14-.4 10.19l-.46 9.32h-5.14l1.57-24.55h7.4l2.4 8.2c.78 2.82 1.53 5.9 2.08 8.78h.12c.67-2.84 1.5-6.08 2.34-8.82l2.6-8.16h7.27l1.31 24.55h-5.39zM270.09 218.81h-9v5.84h10.1v4.55H255.5v-24.55h15.13v4.55h-9.57v5.11h9zM303.08 219.81c-.11-3-.22-6.52-.21-10.12h-.1c-.78 3.15-1.82 6.64-2.74 9.53l-3 9.58h-4.31l-2.65-9.49c-.79-2.89-1.6-6.38-2.21-9.62h-.08c-.12 3.34-.26 7.14-.41 10.19l-.45 9.32h-5.14l1.57-24.55h7.4l2.4 8.2c.77 2.82 1.53 5.9 2.08 8.78h.12c.67-2.84 1.5-6.08 2.33-8.82l2.61-8.16h7.26l1.32 24.55h-5.39zM320.53 205a45.06 45.06 0 017.16-.52c3.39 0 5.47.33 7.27 1.37a5.35 5.35 0 012.92 4.84c0 2.16-1.26 4.2-4 5.23v.08a6.11 6.11 0 014.89 6 6.5 6.5 0 01-2.56 5.21c-1.8 1.45-4.76 2.24-9.65 2.24a41.31 41.31 0 01-6-.37zm5.5 9.4h1.8c2.94 0 4.48-1.22 4.48-3s-1.42-2.85-3.93-2.85a12.1 12.1 0 00-2.35.17zm0 10.87a13.63 13.63 0 002.13.1c2.52 0 4.74-1 4.74-3.56s-2.2-3.44-5-3.44H326zM364.49 218.81h-9v5.84h10.1v4.55h-15.68v-24.55H365v4.55h-9.57v5.11h9zM376.73 205a47.35 47.35 0 017.38-.52c3.65 0 6.2.55 7.95 1.94a6.22 6.22 0 012.27 5.15 6.5 6.5 0 01-4.33 6v.12c1.7.69 2.66 2.31 3.28 4.57a71.49 71.49 0 002 6.93h-5.68a30.77 30.77 0 01-1.69-5.72c-.69-3.07-1.72-3.89-4-3.92h-1.65v9.64h-5.51zm5.51 10.56h2.17c2.76 0 4.4-1.4 4.4-3.54s-1.54-3.39-4.07-3.41a11.35 11.35 0 00-2.5.19z",transform:"translate(-39.77 -12.28)"}))),_r||(_r=Sr.createElement("g",{id:"wlm_svg__WishList"},Sr.createElement("path",{className:"wlm_svg__cls-2",d:"M64.62 180L39.77 75h25.41l8 43.21c2.24 12.5 4.42 26.12 6.1 36.71h.32c1.69-11.4 4.2-24 6.85-37L95.4 75h25.21l8.39 44.3c2.24 12.24 4 23.45 5.54 35.07h.32c1.64-11.7 3.85-23.87 6.17-36.46L149.51 75h24.12l-27.06 105h-25.63L112 134.77c-2.1-10.5-3.74-20.4-5.06-32.29h-.31c-1.78 11.81-3.47 21.77-6 32.36l-10 45.16zM180.94 180v-76.26h23.73V180zM218.57 159.31a46.05 46.05 0 0020.31 5.69c7.15 0 10.21-2.4 10.21-6.29s-2.43-5.86-11.18-8.81c-15.85-5.21-21.81-13.83-21.72-22.78 0-14.31 12.07-25.06 31-25.06 8.92 0 16.8 2.1 21.46 4.44l-4.12 16.32a38.83 38.83 0 00-16.51-4.3c-5.78 0-9.09 2.3-9.09 6.14 0 3.65 3 5.57 12.36 8.8 14.46 4.91 20.51 12.34 20.61 23.45 0 14.22-11.1 24.71-32.93 24.71-9.93 0-18.86-2.25-24.67-5.37zM279.32 69.41h23.73v43.51h.31a26.93 26.93 0 019.28-7.87A26.39 26.39 0 01325 102c15.12 0 26.7 10.48 26.7 33.46V180h-23.76v-41.91c0-10-3.45-16.89-12.24-16.89a12.46 12.46 0 00-11.88 8.37 14.45 14.45 0 00-.77 5.18V180h-23.73zM359.57 75h23.72v85.05H425V180h-65.43zM432.35 180v-76.26h23.72V180zM468 159.31c4.31 2.65 13.42 5.66 20.31 5.66 7.15 0 10.21-2.4 10.21-6.29s-2.43-5.86-11.18-8.81c-15.85-5.21-21.81-13.83-21.72-22.78 0-14.31 12.08-25.06 31-25.06 8.92 0 16.81 2.1 21.47 4.44l-4.13 16.32a38.79 38.79 0 00-16.51-4.3c-5.78 0-9.09 2.3-9.09 6.14 0 3.65 3 5.57 12.36 8.8 14.46 4.91 20.52 12.34 20.61 23.45 0 14.22-11.09 24.71-32.93 24.71-9.93 0-18.86-2.25-24.67-5.37zM555.18 82v21.73h17.05v17.48h-17.05v27.61c0 9.19 2.28 13.43 9.35 13.43a30.89 30.89 0 007-.71l.19 18c-3.06 1.1-8.72 2-15.35 2-7.66 0-14-2.67-17.86-6.62-4.4-4.51-6.55-11.76-6.55-22.58v-31.12h-10.08v-17.48H532V87.37z",transform:"translate(-39.77 -12.28)"}))),kr||(kr=Sr.createElement("path",{id:"wlm_svg__bounce",className:"wlm_svg__cls-1",d:"M456.86 82a13.41 13.41 0 01-13.4 13.5c-7.93 0-13.59-7-13.53-13.13.08-8 6.8-14.15 13.72-13.64 6.8-.56 13.24 5.85 13.21 13.27zm-33.32-7S302.47-38.88 195.48 88.11c0 0-36.78-75.63-119.47-74.84 0 0 71.11-13.4 120.07 58.58 0 0 106.11-125.65 242.11-10.49 0 0-13.52-.85-14.65 13.64z",transform:"translate(-39.77 -12.28)"})))};function Ir(){return(Ir=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var Ar=function(t){return Sr.createElement("svg",Ir({xmlns:"http://www.w3.org/2000/svg",width:400,height:90,viewBox:"20 20 700 155",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.414},t),Lr||(Lr=Sr.createElement("path",{d:"M135.1 105.3c-1 0-2 .1-3 .2l-14.4-25.9c3.2-3.8 5.1-8.7 5.1-14 0-12.1-9.8-21.9-21.9-21.9-12.1 0-21.9 9.9-21.9 21.9 0 5.2 1.8 10 4.9 13.8l-15 26.2c-1.1-.2-2.2-.3-3.3-.3-12.1 0-21.9 9.8-21.9 21.9 0 12.1 9.8 21.9 21.9 21.9 12.1 0 21.9-9.8 21.9-21.9 0-5.2-1.8-10-4.9-13.8l15-26.2c1.1.2 2.2.3 3.3.3 1 0 2-.1 3-.2l14.4 25.9c-3.2 3.8-5.1 8.7-5.1 14 0 12.1 9.8 21.9 21.9 21.9 12.1 0 21.9-9.8 21.9-21.9 0-12.1-9.8-21.9-21.9-21.9zm-34.2-47.2c4.1 0 7.5 3.4 7.5 7.5s-3.4 7.5-7.5 7.5-7.5-3.4-7.5-7.5 3.4-7.5 7.5-7.5zm-35.3 76.6c-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5 7.5 3.4 7.5 7.5-3.4 7.5-7.5 7.5zm69.5 0c-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5 7.5 3.4 7.5 7.5-3.3 7.5-7.5 7.5z",fill:"#e34f43",fillRule:"nonzero"})),Pr||(Pr=Sr.createElement("g",{fill:"#2d2d2d",fillRule:"nonzero"},Sr.createElement("path",{d:"M205.5 64h25.2l21.6 68h-20.6l-3.6-12.7h-22.5L202 132h-18.2l21.7-68zm3.8 42h14.9l-7.4-26.2-7.5 26.2zM258.1 93.9h-6.3V82.3h6.3v-3.8c0-12.4 7.6-18.2 19.4-18.2 3.1 0 5.4.4 7.6 1v12.5c-1.2-.4-2.7-.7-4.6-.7-3.8 0-5.5 2.3-5.5 5.4v3.8h14.5v-4.4c0-12.4 7.7-18.3 19.5-18.3 3.1 0 5.3.4 7.5 1v12.5c-1.2-.4-2.5-.6-4.5-.6-3.9 0-5.5 2.2-5.5 5.4v4.4h10v11.6h-10V132h-17V93.9H275V132h-16.9V93.9zM320.5 68.8c0-5 4-8.8 9.3-8.8 5.3 0 9.4 3.8 9.4 8.8 0 5-4.1 8.8-9.4 8.8-5.3-.1-9.3-3.8-9.3-8.8zm.9 13.5h17V132h-17V82.3zM347.5 60.4h16.9V132h-16.9zM372.7 68.8c0-5 4-8.8 9.3-8.8 5.3 0 9.4 3.8 9.4 8.8 0 5-4.1 8.8-9.4 8.8-5.3-.1-9.3-3.8-9.3-8.8zm.9 13.5h17V132h-17V82.3zM396.7 118.2c0-11.7 9.9-16.3 26.4-16.3h4.8v-1.1c0-4.8-1.1-7.9-6.6-7.9-4.7 0-6.4 2.8-6.8 5.9h-16c.8-12 10.2-17.9 23.8-17.9 13.7 0 22.4 5.6 22.4 18.8V132h-16.6v-5.8c-2.4 3.6-6.8 6.9-14.7 6.9-8.8.1-16.7-4.3-16.7-14.9zm31.2-3.6v-3h-4.5c-6.8 0-9.9 1.3-9.9 5.4 0 2.9 1.9 4.7 5.9 4.7 4.9 0 8.5-2.8 8.5-7.1zM455 116.1V93.9h-6V82.3h6V71.9h17v10.4h9.8v11.6H472v20.5c0 3.6 1.8 5.2 5 5.2 1.9 0 3.3-.3 4.9-.9v12.9c-2.2.6-5.4 1.4-9.4 1.4-11.3.2-17.5-5.2-17.5-16.9zM484.8 107.8v-.8c0-16 11.9-26.1 26.9-26.1 13.6 0 25.3 7.8 25.3 25.7v4.5h-35c.5 6.6 4.3 10.4 10.4 10.4 5.6 0 8-2.6 8.7-5.9h16c-1.5 11.2-10.2 17.6-25.2 17.6-15.7 0-27.1-9.2-27.1-25.4zm35.6-6.3c-.3-6-3.2-9.3-8.8-9.3-5.1 0-8.7 3.3-9.5 9.3h18.3zM536.8 64h19.7l8.8 42.4 9.1-42.4h17.3l9.9 42.8 9.2-42.8h18.1L613 132h-20.4l-10.5-43.2-10.4 43.2h-19l-15.9-68zM634.6 64h25.9c18.6 0 27.3 8.3 27.3 22.7v.4c0 14.3-9.6 22-26.4 22H654V132h-19.4V64zm25 31.8c6.3 0 9.6-2.9 9.6-8.6v-.4c0-5.8-3.4-8.2-9.5-8.2H654v17.1h5.6v.1z"}))))},Tr=r(92),Fr=r(941),Gr=r(309);r(1005);function $r(t){return($r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dr(){Dr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==$r(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError($r(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Mr(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function Br(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return zr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ur=function(t){var e=t.requestData,r=t.headersData,c=t.setImport,i=r.import_id,u=Br(Object(n.useState)(null),2),s=u[0],f=u[1],m=Br(Object(n.useState)(!0),2),p=m[0],b=m[1],h=s&&"log"in s?s.log:{},d=h.skipped,y=void 0===d?[]:d,v=h.failed,g=void 0===v?[]:v,O=h.succeed,j=void 0===O?[]:O,E=Br(Object(n.useState)(null),2),_=E[0],k=E[1],x=xr().showBackButton,S=Br(Object(n.useState)(!1),2),N=S[0],L=S[1],P=Object(n.useRef)(null),C=(location&&location.search&&Object(a.parse)(location.search.substring(1)),function(){var t,r=(t=Dr().mark((function t(){var r,n,o,a=arguments;return Dr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]&&a[0],t.prev=1,n=e&&"useExisting"in e&&e.useExisting?{}:e,!e.useExisting&&(n.start_import=r),t.next=6,w()({method:"POST",data:n,path:Object(l.m)("/import/csv/status/".concat(i))});case 6:o=t.sent,f(o.result),o.result&&"status"in o.result&&"success"===o.result.status&&(Object(l.G)()||(bwfcrm_contacts_data.first_contact_id=1),clearInterval(P.current),x(!0),L(!0)),b(!1),t.next=18;break;case 12:t.prev=12,t.t0=t.catch(1),clearInterval(P.current),x(!0),k(t.t0),b(!1);case 18:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){Mr(a,n,o,c,i,"next",t)}function i(t){Mr(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return r.apply(this,arguments)}}());return Object(n.useEffect)((function(){return x(!1),window.scrollTo(0,0),C(!0),P.current=setInterval((function(){return C()}),5e3),function(){clearInterval(P.current),x(!0),b(!1)}}),[]),p?Object(n.createElement)(Z.a,null):_||s&&!1 in s?Object(n.createElement)(T.Notice,{status:"error"},_&&"message"in _?_.message:Object(o.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):s&&"percent"in s?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(qe.a,{noStriped:!0,size:"sm",progress:parseInt(s.percent),text:"".concat(s.percent,"% Completed")}),Object(n.createElement)("p",null,"Skipped: ",parseInt(y)>0?y:0,", Failed:"," ",parseInt(g)>0?g:0,", Success:"," ",parseInt(j)>0?j:0)),N&&Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(T.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){c(!1)}},Object(o.__)("Go To Contacts","wp-marketing-automations")),!!s&&!!s.has_log_file&&Object(n.createElement)("a",{target:"_blank",href:Object(l.U)()+"/wp-json"+Object(l.m)("/importer-log/download/".concat(i,"?bwf-nonce=").concat(Object(l.q)())),title:"Download",className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(n.createElement)(T.Button,{isSecondary:!0},Object(o.__)("Download Error Log","wp-marketing-automations"))))):null};function qr(t){return(qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rr(){Rr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==qr(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(qr(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Yr(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function Vr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Hr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Wr=function(t){Object(l.g)("CSV Importer");var e=Vr(Object(n.useState)(null),2),r=e[0],a=e[1],c=Vr(Object(n.useState)(null),2),i=c[0],u=c[1],s=Vr(Object(n.useState)(null),2),f=s[0],m=s[1],p=Vr(Object(n.useState)(!1),2),b=p[0],h=p[1],d=Object(n.useContext)(l.d),y=(0,hr().getExistingImports)().csv,v=t.step,g=t.setImport,O=function(){var t,e=(t=Rr().mark((function t(){var e,n;return Rr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),t.prev=1,(e=new FormData).append("csv",r),t.next=6,w()({method:"POST",body:e,path:Object(l.m)("/import/csv/upload")});case 6:n=t.sent,u(n.result),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),a(null),d(t.t0&&"message"in t.t0?t.t0.message:Object(o.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 14:Object(l.fb)(d,2e3),h(!1);case 16:case"end":return t.stop()}}),t,null,[[1,10]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){Yr(a,n,o,c,i,"next",t)}function i(t){Yr(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){r&&O()}),[r]),Object(n.useEffect)((function(){y&&(u({import_id:y}),m({useExisting:!0}))}),[]),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},2==v&&!y&&!r&&!b&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)(Gr.a,{onFileSelected:function(t){return a(t)},filetypeArray:["text/csv","text/plain","application/csv","text/comma-separated-values","application/excel","application/vnd.ms-excel","application/vnd.msexcel","text/anytext","application/octet-stream","application/txt"],btnLabel:Object(o.__)("Drop your CSV file here OR","wp-marketing-automations")})),b&&Object(n.createElement)(Z.a,null),2==v&&i&&"import_id"in i&&!f&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)(Fr.a,{buttonAlignClass:"bwf-crm-btn-right-alignment",headersData:i,onRequestImport:function(e){m(e),t.setStep(3)},contactHeaderText:Object(o.__)("Contact Fields","wp-marketing-automations"),updateExistingText:Object(o.__)("Update existing contact status","wp-marketing-automations")})),2==v&&!b&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(n.createElement)(T.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){t.setStep(1),t.setImporter(null)}},Object(o.__)("Back","wp-marketing-automations")))),3==v&&f&&i&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(Ur,{requestData:f,setStep:t.setStep,setImporter:t.setImporter,headersData:i,setImport:g}))))},Kr=(r(1006),r(876)),Qr=r(885);function Zr(t){return function(t){if(Array.isArray(t))return tn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Xr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||Xr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xr(t,e){if(t){if("string"==typeof t)return tn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tn(t,e):void 0}}function tn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var en=function(t){var e=t.roles,r=void 0===e?{}:e,a=t.onRolesSelected,c=Jr(Object(n.useState)(Object.keys(r)),2),i=c[0],l=c[1],u=Jr(Object(n.useState)(!0),2),f=u[0],m=(u[1],Jr(Object(n.useState)(!1),2)),p=m[0],b=m[1],h=Jr(Object(n.useState)(!1),2),d=h[0],y=h[1],v=Jr(Object(n.useState)([]),2),g=v[0],w=v[1],O=Jr(Object(n.useState)([]),2),j=O[0],E=O[1],_=Jr(Object(n.useState)(1),2),k=_[0],x=_[1],S={0:Object(o.__)("Unverified","wp-marketing-automations"),1:Object(o.__)("Subscribed","wp-marketing-automations"),2:Object(o.__)("Bounced","wp-marketing-automations"),3:Object(o.__)("Unsubscribed","wp-marketing-automations")};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(T.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("User Roles","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-crm-import-checkbox-3col"},r&&Object.keys(r).map((function(t){return Object(n.createElement)(T.CheckboxControl,{checked:i.includes(t),key:t,label:r[t],onChange:function(e){return function(t,e){l(t?[].concat(Zr(i),[e]):i.filter((function(t){return t!==e})))}(e,t)}})})))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(Kr.a,{onTagsChange:w,selected:g}),Object(n.createElement)(Qr.a,{onListsChange:E,selected:j})),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p"},Object(o.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(t){x(t.target.value)},value:Object(s.isEmpty)(k)?"":k},Object.keys(S).map((function(t){return Object(n.createElement)("option",{key:t,value:t},S[t])}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(T.ToggleControl,{checked:p,label:Object(o.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(t){return b(t)}}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(T.ToggleControl,{label:Object(o.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:d,onChange:y})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment",style:{bottom:"-52px"}},Object(n.createElement)(T.Button,{disabled:0===i.length,isPrimary:!0,onClick:function(){return a({roles:i,tags:g.map((function(t){return{id:t.key,value:t.label}})),lists:j.map((function(t){return{id:t.key,value:t.label}})),marketing_status:f,update_existing:p,disable_events:d,imported_contact_status:k})}},Object(o.__)("Import","wp-marketing-automations"))))),Object(n.createElement)("div",{className:"bwf-crm-importer-navigation",style:{marginTop:"15px"}},Object(n.createElement)(T.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){t.setStep(1),t.setImporter(null)}},Object(o.__)("Back","wp-marketing-automations"))))};function rn(t){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nn(){nn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==rn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(rn(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function on(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function an(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return cn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ln=function(t){var e=t.requestData,r=t.setImport,c=an(Object(n.useState)(!1),2),i=c[0],u=c[1],f=an(Object(n.useState)(null),2),m=f[0],p=f[1],b=an(Object(n.useState)(e&&"importId"in e?parseInt(e.importId):0),2),h=b[0],d=b[1],y=m&&"log"in m?m.log:{},v=y.skipped,g=void 0===v?0:v,O=y.failed,j=void 0===O?0:O,E=y.succeed,_=void 0===E?0:E,k=an(Object(n.useState)(null),2),x=k[0],S=k[1],N=xr().showBackButton,L=(location&&location.search&&Object(a.parse)(location.search.substring(1)),0),P=an(Object(n.useState)(5e3),2),C=P[0],I=P[1],A=function(){var t,r=(t=nn().mark((function t(){var r,n;return nn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return L++,t.prev=1,r=parseInt(h)>0?{import_id:h}:e,parseInt(h)>0?r.start_import=!1:r.start_import=!0,t.next=6,w()({method:"POST",data:r,path:Object(l.m)("/import/wp/status")});case 6:n=t.sent,p(n.result),d(parseInt(n.result.import_id)),n.result&&"status"in n.result&&"success"===n.result.status&&(Object(l.G)()||(bwfcrm_contacts_data.first_contact_id=1),I(null),N(!1),u(!0)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),I(null),N(!1),S(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){on(a,n,o,c,i,"next",t)}function i(t){on(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(Re.a)((function(){Object(s.isEmpty)(h)&&0!=L||A()}),C),Object(n.useEffect)((function(){return N(!0),window.scrollTo(0,0),function(){N(!1)}}),[]),x||m&&!1 in m?Object(n.createElement)(T.Notice,{status:"error"},x&&"message"in x?x.message:Object(o.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):m?m&&"percent"in m?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(qe.a,{progress:parseInt(m.percent),noStriped:!0,size:"sm",text:"".concat(m.percent,"% Completed")}),Object(n.createElement)("p",{className:"bwf-p"},"Skipped: ",parseInt(g)>0?g:0,", Failed: ",parseInt(j)>0?j:0,", Success: ",parseInt(_)>0?_:0),Object(n.createElement)("div",{className:"bwf_clear_10"})),i&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(T.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){r(!1)}},Object(o.__)("Go To Contacts","wp-marketing-automations")),!!m&&!!m.has_log_file&&Object(n.createElement)("a",{target:"_blank",href:Object(l.U)()+"/wp-json"+Object(l.m)("/importer-log/download/".concat(h,"?bwf-nonce=").concat(Object(l.q)())),title:"Download",className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(n.createElement)(T.Button,{isSecondary:!0},Object(o.__)("Download Error Log","wp-marketing-automations")))))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(qe.a,{noStriped:!0,size:"sm",progress:0,text:Object(o.__)("0% Completed","wp-marketing-automations")}),Object(n.createElement)("p",{className:"bwf-p"},"Skipped: ",parseInt(g)>0?g:0,", Failed: ",parseInt(j)>0?j:0,", Success: ",parseInt(_)>0?_:0)),Object(n.createElement)("div",{className:"bwf_clear_20"}))};function un(t){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sn(){sn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==un(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(un(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function fn(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function mn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return pn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var bn=function(t){Object(l.g)("WP Importer");var e=t.step,r=t.setImport,a=mn(Object(n.useState)({}),2),c=a[0],i=a[1],u=mn(Object(n.useState)(null),2),f=u[0],m=u[1],p=mn(Object(n.useState)(!1),2),b=p[0],h=p[1],d=(0,hr().getExistingImports)().wp,y=Object(n.useContext)(l.d),v=function(){var t,e=(t=sn().mark((function t(){var e;return sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),t.prev=1,t.next=4,w()({method:"GET",path:Object(l.m)("/import/wp/roles")});case 4:e=t.sent,i(e.result),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),i(null),y(t.t0&&"message"in t.t0?t.t0.message:Object(o.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 12:Object(l.fb)(y,2e3),h(!1);case 14:case"end":return t.stop()}}),t,null,[[1,8]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){fn(a,n,o,c,i,"next",t)}function i(t){fn(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){d?m({importId:d}):v()}),[]),Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},b&&Object(n.createElement)(Z.a,null),2==e&&!f&&c&&Object(s.size)(c)>0&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)(en,{roles:c,setStep:t.setStep,setImporter:t.setImporter,onRolesSelected:function(e){m(e),t.setStep(3)}})),3==e&&f&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(ln,{setStep:t.setStep,requestData:f,setImporter:t.setImporter,setImport:r})))};r(1007);function hn(t){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dn(){dn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==hn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(hn(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function yn(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function vn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return gn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var wn=function(t){var e=t.importData,r=t.setImport,c=e.importId,i=vn(Object(n.useState)(null),2),u=i[0],s=i[1],f=u&&"log"in u?u.log:{},m=f.skipped,p=void 0===m?0:m,b=f.failed,h=void 0===b?0:b,d=f.succeed,y=void 0===d?0:d,v=(location&&location.search&&Object(a.parse)(location.search.substring(1)),vn(Object(n.useState)(!1),2)),g=v[0],O=v[1],j=vn(Object(n.useState)(!1),2),E=j[0],_=j[1],k=function(){var t,e=(t=dn().mark((function t(){var e,r;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={start_import:!1,import_id:c},t.next=4,w()({method:"GET",path:Object(l.m)("/import/wc/status?"+Object(a.stringify)(e))});case 4:r=t.sent,s(r.result),r.result&&"status"in r.result&&"success"===r.result.status&&r.result.percent>=100&&(Object(l.G)()||(bwfcrm_contacts_data.first_contact_id=1),O(!0),_(!0)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),setError(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){yn(a,n,o,c,i,"next",t)}function i(t){yn(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(Re.a)((function(){E||k()}),5e3),u?u&&"percent"in u?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(qe.a,{noStriped:!0,size:"sm",progress:parseInt(u.percent),text:"".concat(u.percent,"% Completed")}),Object(n.createElement)("p",null,"Skipped: ",parseInt(p)>0?p:0,", Failed:"," ",parseInt(h)>0?h:0,", Success:"," ",parseInt(y)>0?y:0)),g&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(T.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){r(!1)}},Object(o.__)("Go To Contacts","wp-marketing-automations")),!!u&&!!u.has_log_file&&Object(n.createElement)("a",{target:"_blank",href:Object(l.U)()+"/wp-json"+Object(l.m)("/importer-log/download/".concat(c,"?bwf-nonce=").concat(Object(l.q)())),title:"Download",className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(n.createElement)(T.Button,{isSecondary:!0},Object(o.__)("Download Error Log","wp-marketing-automations")))))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(qe.a,{noStriped:!0,size:"sm",progress:0,text:Object(o.__)("0% Completed","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf-p"},"Skipped: ",parseInt(p)>0?p:0,", Failed: ",parseInt(h)>0?h:0,", Success: ",parseInt(y)>0?y:0)),Object(n.createElement)("div",{className:"bwf_clear_20"}))};function On(t){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jn(){jn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==On(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(On(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function En(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function _n(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){En(a,n,o,c,i,"next",t)}function i(t){En(a,n,o,c,i,"throw",t)}c(void 0)}))}}function kn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return xn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Sn=function(t){Object(l.g)("WC Importer");var e=t.step,r=t.setImport,c=kn(Object(n.useState)({}),2),i=c[0],u=c[1],f=kn(Object(n.useState)(!0),2),m=f[0],p=f[1],b=kn(Object(n.useState)(null),2),h=b[0],d=b[1],y=kn(Object(n.useState)(!1),2),v=y[0],g=y[1],O=kn(Object(n.useState)(!0),2),j=O[0],E=(O[1],kn(Object(n.useState)(!1),2)),_=E[0],k=E[1],x=kn(Object(n.useState)([]),2),S=x[0],N=x[1],L=kn(Object(n.useState)([]),2),P=L[0],C=L[1],I=Object(n.useContext)(l.d),A=kn(Object(n.useState)(1),2),F=A[0],G=A[1],$=(0,hr().getExistingImports)().wc,D={0:Object(o.__)("Unverified","wp-marketing-automations"),1:Object(o.__)("Subscribed","wp-marketing-automations"),2:Object(o.__)("Bounced","wp-marketing-automations"),3:Object(o.__)("Unsubscribed","wp-marketing-automations")},M=function(){var e=_n(jn().mark((function e(){var r,n,c,i=arguments;return jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]&&i[0],e.prev=1,n={start_import:r,tags:S.map((function(t){return{id:t.key,value:t.label}})),lists:P.map((function(t){return{id:t.key,value:t.label}})),marketing_status:j,update_existing:_,disable_events:v,imported_contact_status:F},e.next=5,w()({method:"GET",path:Object(l.m)("/import/wc/status?"+Object(a.stringify)(n))});case 5:c=e.sent,u({importId:c.result.import_id}),t.setStep(3),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),u(null),I(e.t0&&"message"in e.t0?e.t0.message:Object(o.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 14:Object(l.fb)(I,2e3),p(!1);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var t=_n(jn().mark((function t(){return jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w()({method:"GET",path:Object(l.m)("/import/wc/get-orders")}).then((function(t){d(parseInt(t.result)),p(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){parseInt($)>0?(u({importId:$}),p(!1)):B()}),[]);return Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},2==e&&m&&(Object(s.isEmpty)(i)||1===i.status)&&Object(n.createElement)(Z.a,null),2==e&&!m&&!Object(s.isNull)(h)&&(h>0?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-importer-wc-wrap"},Object(n.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("WooCommerce Customers","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},h+" "+Object(o.__)("paid orders are available for import.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(Kr.a,{onTagsChange:N,selected:S}),Object(n.createElement)(Qr.a,{onListsChange:C,selected:P})),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p"},Object(o.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wc-status-select",onChange:function(t){G(t.target.value)},value:Object(s.isEmpty)(F)?"":F},Object.keys(D).map((function(t){return Object(n.createElement)("option",{key:t,value:t},D[t])}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(T.ToggleControl,{checked:_,label:Object(o.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(t){return k(t)}}),Object(n.createElement)(T.ToggleControl,{label:Object(o.__)("Trigger Automations (for Tag & List related Events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:v,onChange:g})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment"},Object(n.createElement)(T.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){t.setStep(3),p(!0),M(!0)}},Object(o.__)("Import","wp-marketing-automations"))))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)("div",{className:"bwf-crm-importer-wc-wrap"},Object(n.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("WooCommerce Customers","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("No Orders are available for import.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_20"})))),2==e&&!m&&Object(n.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(n.createElement)(T.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){t.setStep(1),t.setImporter(null)}},Object(o.__)("Back","wp-marketing-automations"))),3==e&&m&&Object(n.createElement)(Z.a,null),3==e&&!m&&i&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)(wn,{importData:i,setStep:t.setStep,setImporter:t.setImporter,setImport:r})))};r(1008);function Nn(t){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ln(){Ln=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Nn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Nn(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Pn(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function Cn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){Pn(a,n,o,c,i,"next",t)}function i(t){Pn(a,n,o,c,i,"throw",t)}c(void 0)}))}}var In=function(){return Object(rt.useQuery)(["get-wlm-members-count"],Cn(Ln().mark((function t(){var e;return Ln().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w()({path:Object(l.m)("/import/wlm/get-members-count")});case 2:if((e=t.sent).code&&200===e.code){t.next=5;break}throw new Error(Object(o.__)("Unable to load members count","wp-marketing-automations"));case 5:return t.abrupt("return",parseInt(e.result));case 6:case"end":return t.stop()}}),t)}))))};function An(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Tn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Fn={0:Object(o.__)("Unverified","wp-marketing-automations"),1:Object(o.__)("Subscribed","wp-marketing-automations"),2:Object(o.__)("Bounced","wp-marketing-automations"),3:Object(o.__)("Unsubscribed","wp-marketing-automations")},Gn=function(t){var e=t.onStartImport,r=t.setStep,a=t.setImporter,c=In(),i=c.isLoading,u=c.data,f=void 0===u?0:u,m=c.isError,p=c.error,b=An(Object(n.useState)(!1),2),h=b[0],d=b[1],y=An(Object(n.useState)(!1),2),v=y[0],g=y[1],w=An(Object(n.useState)([]),2),O=w[0],j=w[1],E=An(Object(n.useState)([]),2),_=E[0],k=E[1],x=An(Object(n.useState)(1),2),S=x[0],N=x[1],L=Object(n.useContext)(l.d),P=Object(n.useCallback)((function(){return e({tags:O.map((function(t){return{id:t.key,value:t.label}})),lists:_.map((function(t){return{id:t.key,value:t.label}})),update_existing:h,disable_events:v,imported_contact_status:S})}),[O,_,h,v,S,e]);return Object(n.useEffect)((function(){m&&(L("string"==typeof p?p:p&&p.message?p.message:Object(o.__)("Unknown API Error","wp-marketing-automations")),Object(l.fb)(L,2e3))}),[m,p]),i?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)(Z.a,null)):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(T.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("WishList Members","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},f+" "+Object(o.__)("members are available for import.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(Kr.a,{onTagsChange:j,selected:O}),Object(n.createElement)(Qr.a,{onListsChange:k,selected:_})),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p"},Object(o.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(t){N(t.target.value)},value:Object(s.isEmpty)(S)?"":S},Object.keys(Fn).map((function(t){return Object(n.createElement)("option",{key:t,value:t},Fn[t])}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(T.ToggleControl,{checked:h,label:Object(o.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(t){return d(t)}}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(T.ToggleControl,{label:Object(o.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:v,onChange:g})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment"},Object(n.createElement)(T.Button,{disabled:0===parseInt(f),isPrimary:!0,onClick:P},Object(o.__)("Import","wp-marketing-automations"))))),Object(n.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(n.createElement)(T.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){r(1),a(null)}},Object(o.__)("Back","wp-marketing-automations"))))};function $n(t){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dn(){Dn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==$n(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError($n(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Mn(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function Bn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return zn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Un=function(t){var e=t.requestData,r=t.existingImport,c=(t.setStep,t.setImport),i=Bn(Object(n.useState)(!1),2),u=i[0],f=i[1],m=Bn(Object(n.useState)(null),2),p=m[0],b=m[1],h=Bn(Object(n.useState)(e&&"importId"in e?parseInt(e.importId):0),2),d=h[0],y=h[1],v=p&&"log"in p?p.log:{},g=v.skipped,O=void 0===g?0:g,j=v.failed,E=void 0===j?0:j,_=v.succeed,k=void 0===_?0:_,x=Bn(Object(n.useState)(null),2),S=x[0],N=x[1],L=xr().showBackButton,P=(location&&location.search&&Object(a.parse)(location.search.substring(1)),0),C=Bn(Object(n.useState)(5e3),2),I=C[0],A=C[1],F=Bn(Object(n.useState)(!0),2),G=F[0],$=F[1],D=function(){var t,n=(t=Dn().mark((function t(){var n,o;return Dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return P++,t.prev=1,n=parseInt(d)>0?{import_id:d}:e,G&&!r?($(!1),n.start_import=!0):n.start_import=!1,t.next=6,w()({method:"POST",data:n,path:Object(l.m)("/import/wlm/status")});case 6:o=t.sent,b(o.result),y(parseInt(o.result.import_id)),o.result&&"status"in o.result&&"success"===o.result.status&&(bwfcrm_contacts_data.is_wlm_active="1",A(null),L(!1),f(!0)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),A(null),L(!1),N(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){Mn(a,n,o,c,i,"next",t)}function i(t){Mn(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(Re.a)((function(){Object(s.isEmpty)(d)&&0!=P||D()}),I),Object(n.useEffect)((function(){return L(!0),window.scrollTo(0,0),function(){L(!1)}}),[]),S||p&&!1 in p?Object(n.createElement)(T.Notice,{status:"error"},S&&"message"in S?S.message:Object(o.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):p?p&&"percent"in p?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(qe.a,{noStriped:!0,size:"sm",progress:parseInt(p.percent),text:"".concat(p.percent,"% Completed")}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("p",{className:"bwf-t-center"},"Skipped: ",parseInt(O)>0?O:0,", Failed:"," ",parseInt(E)>0?E:0,", Success:"," ",parseInt(k)>0?k:0)),u&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(T.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){c(!1)}},Object(o.__)("Go To Contacts","wp-marketing-automations"))))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(qe.a,{noStriped:!0,size:"sm",progress:0,text:Object(o.__)("0% Completed","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p bwf-t-center"},"Skipped: ",parseInt(O)>0?O:0,", Failed: ",parseInt(E)>0?E:0,", Success: ",parseInt(k)>0?k:0)),Object(n.createElement)("div",{className:"bwf_clear_20"}))};function qn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Rn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Yn=function(t){var e=t.step,r=t.setStep,a=t.setImporter,c=t.setImport;Object(l.g)("WLM Importer");var i=qn(Object(n.useState)(null),2),u=i[0],s=i[1],f=(0,hr().getExistingImports)().wlm;return Object(n.useEffect)((function(){parseInt(f)>0&&(s({importId:f}),r(3))}),[]),Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},2==e&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(Gn,{setStep:r,setImporter:a,onStartImport:function(t){s(t),r(3)}})),3==e&&u&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(Un,{setStep:r,requestData:u,setImporter:a,existingImport:parseInt(f)>0,setImport:c})))};r(1009);function Vn(t){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hn(){Hn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Vn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Vn(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Wn(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function Kn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){Wn(a,n,o,c,i,"next",t)}function i(t){Wn(a,n,o,c,i,"throw",t)}c(void 0)}))}}var Qn=function(){return Object(rt.useQuery)(["get-affwp-affiliate-count"],Kn(Hn().mark((function t(){var e;return Hn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w()({path:Object(l.m)("/import/affwp/get-affiliate-count")});case 2:if((e=t.sent).code&&200===e.code){t.next=5;break}throw new Error(Object(o.__)("Unable to load affiliate count","wp-marketing-automations"));case 5:return t.abrupt("return",parseInt(e.result));case 6:case"end":return t.stop()}}),t)}))))};function Zn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Jn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Xn={0:Object(o.__)("Unverified","wp-marketing-automations"),1:Object(o.__)("Subscribed","wp-marketing-automations"),2:Object(o.__)("Bounced","wp-marketing-automations"),3:Object(o.__)("Unsubscribed","wp-marketing-automations")},to=function(t){var e=t.onStartImport,r=t.setStep,a=t.setImporter,c=Qn(),i=c.isLoading,u=c.data,s=void 0===u?0:u,f=c.isError,m=c.error,p=Zn(Object(n.useState)(!1),2),b=p[0],h=p[1],d=Zn(Object(n.useState)(!1),2),y=d[0],v=d[1],g=Zn(Object(n.useState)([]),2),w=g[0],O=g[1],j=Zn(Object(n.useState)([]),2),E=j[0],_=j[1],k=Zn(Object(n.useState)(1),2),x=k[0],S=k[1],N=Object(n.useContext)(l.d),L=Object(n.useCallback)((function(){return e({tags:w.map((function(t){return{id:t.key,value:t.label}})),lists:E.map((function(t){return{id:t.key,value:t.label}})),update_existing:b,disable_events:y,imported_contact_status:x})}),[w,E,b,y,x,e]);return Object(n.useEffect)((function(){f&&(N("string"==typeof m?m:m&&m.message?m.message:Object(o.__)("Unknown API Error","wp-marketing-automations")),Object(l.fb)(N,2e3))}),[f,m]),i?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)(Z.a,null)):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(T.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("AffiliateWP Affiliates","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},s+" "+Object(o.__)("affiliates are available for import.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(Kr.a,{onTagsChange:O,selected:w}),Object(n.createElement)(Qr.a,{onListsChange:_,selected:E})),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p"},Object(o.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(t){S(t.target.value)}},Object.keys(Xn).map((function(t){return Object(n.createElement)("option",{key:t,value:t,selected:x==t},Xn[t])}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(T.ToggleControl,{checked:b,label:Object(o.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(t){return h(t)}}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(T.ToggleControl,{label:Object(o.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:y,onChange:v})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment",style:{bottom:"-52px"}},Object(n.createElement)(T.Button,{disabled:0===parseInt(s),isPrimary:!0,onClick:L},Object(o.__)("Import","wp-marketing-automations"))))),Object(n.createElement)("div",{className:"bwf-crm-importer-navigation",style:{marginTop:"15px"}},Object(n.createElement)(T.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){r(1),a(null)}},Object(o.__)("Back","wp-marketing-automations"))))};function eo(t){return(eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ro(){ro=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==eo(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(eo(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function no(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function oo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ao(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ao(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ao(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var co=function(t){var e=t.requestData,r=t.existingImport,c=(t.setStep,t.setImport),i=oo(Object(n.useState)(!1),2),u=i[0],f=i[1],m=oo(Object(n.useState)(null),2),p=m[0],b=m[1],h=oo(Object(n.useState)(e&&"importId"in e?parseInt(e.importId):0),2),d=h[0],y=h[1],v=p&&"log"in p?p.log:{},g=v.skipped,O=void 0===g?0:g,j=v.failed,E=void 0===j?0:j,_=v.succeed,k=void 0===_?0:_,x=oo(Object(n.useState)(null),2),S=x[0],N=x[1],L=xr().showBackButton,P=(location&&location.search&&Object(a.parse)(location.search.substring(1)),0),C=oo(Object(n.useState)(5e3),2),I=C[0],A=C[1],F=oo(Object(n.useState)(!0),2),G=F[0],$=F[1],D=function(){var t,n=(t=ro().mark((function t(){var n,o;return ro().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return P++,t.prev=1,n=parseInt(d)>0?{import_id:d}:e,G&&!r?($(!1),n.start_import=!0):n.start_import=!1,t.next=6,w()({method:"POST",data:n,path:Object(l.m)("/import/affwp/status")});case 6:o=t.sent,b(o.result),y(parseInt(o.result.import_id)),o.result&&"status"in o.result&&"success"===o.result.status&&(A(null),L(!1),f(!0)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),A(null),L(!1),N(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){no(a,n,o,c,i,"next",t)}function i(t){no(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(Re.a)((function(){Object(s.isEmpty)(d)&&0!=P||D()}),I),Object(n.useEffect)((function(){return L(!0),window.scrollTo(0,0),function(){L(!1)}}),[]),S||p&&!1 in p?Object(n.createElement)(T.Notice,{status:"error"},S&&"message"in S?S.message:Object(o.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):p?p&&"percent"in p?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(qe.a,{noStriped:!0,size:"sm",progress:parseInt(p.percent),text:"".concat(p.percent,"% Completed")}),Object(n.createElement)("p",null,"Skipped: ",parseInt(O)>0?O:0,", Failed:"," ",parseInt(E)>0?E:0,", Success:"," ",parseInt(k)>0?k:0)),u&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(T.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){c(!1)}},Object(o.__)("Go To Contacts","wp-marketing-automations"))))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(qe.a,{noStriped:!0,size:"sm",progress:0,text:Object(o.__)("0% Completed","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf-p"},"Skipped: ",parseInt(O)>0?O:0,", Failed: ",parseInt(E)>0?E:0,", Success: ",parseInt(k)>0?k:0)),Object(n.createElement)("div",{className:"bwf_clear_20"}))};function io(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return lo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var uo=function(t){var e=t.step,r=t.setStep,a=t.setImporter,c=t.setImport;Object(l.g)("AFFWP Importer");var i=io(Object(n.useState)(null),2),u=i[0],s=i[1],f=(0,hr().getExistingImports)().affwp;return Object(n.useEffect)((function(){parseInt(f)>0&&(s({importId:f}),r(3))}),[]),Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},2==e&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(to,{setStep:r,setImporter:a,onStartImport:function(t){s(t),r(3)}})),3==e&&u&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(co,{setStep:r,requestData:u,setImporter:a,existingImport:parseInt(f)>0,setImport:c})))};function so(){return(so=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function fo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return mo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var po=function(t){var e=t.setImport,r=Object(n.useContext)(l.d),a=fo(Object(n.useState)(null),2),c=a[0],i=a[1],u=fo(Object(n.useState)(!0),2),f=(u[0],u[1]),m=hr(),p=(m.showBackButton,m.getLoading),b=m.getExistingImports,h=xr().fetch,d=p(),y=b(),g=fo(Object(n.useState)(1),2),w=g[0],O=g[1],j=fo(Object(n.useState)(!1),2),E=j[0];j[1];Object(n.useEffect)((function(){h(),f(!1),Object(l.g)("Import Contacts")}),[]),Object(n.useEffect)((function(){y&&Object(s.size)(y)>0&&(i(Object.keys(y)[0]),O(3))}),[y]);var _=function(){var t=[{key:"csv",label:Object(o.__)("CSV","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-csv"}];return Object(l.sb)()||t.push({key:"wp",label:Object(o.__)("WordPress","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-wp"}),Object(l.xb)()&&t.push({key:"wc",label:Object(o.__)("WooCommerce","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-wc"}),Object(l.rb)()&&t.push({key:"wlm",label:Object(n.createElement)(n.Fragment,null,Cr()," ",Object(o.__)("WishList Member","wp-marketing-automations")),className:"bwf-crm-importer-button bwf-crm-importer-button-wlm"}),Object(l.gb)()&&t.push({key:"affwp",label:Object(n.createElement)(n.Fragment,null,Ar()," ",Object(o.__)("AffiliateWP","wp-marketing-automations")),className:"bwf-crm-importer-button bwf-crm-importer-button-affwp"}),Object(Tr.applyFilters)("bwfAddContactImporter",t)}(),k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(v.g)(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(s.isEmpty)(t)||Object(v.k)(t,e,r)},x=function(t){return Object(n.createElement)(n.Fragment,null,function(t,o){switch(o){case"csv":return Object(n.createElement)(Wr,{step:t,setStep:O,setImporter:i,setImport:e});case"wp":return Object(n.createElement)(bn,{step:t,setStep:O,setImporter:i,setImport:e});case"wc":return Object(n.createElement)(Sn,{step:t,setStep:O,setImporter:i,setImport:e});case"wlm":return Object(n.createElement)(Yn,{step:t,setStep:O,setImporter:i,setImport:e});case"affwp":return Object(n.createElement)(uo,{step:t,setStep:O,setImporter:i,setImport:e});default:return Object(Tr.applyFilters)("bwfImporterSelectedContent",Object(n.createElement)(n.Fragment,null),o,t,O,i,y,r,l.fb,k,e)}}(t,c))},S=[{key:1,label:Object(o.__)("Source","wp-marketing-automations"),content:d?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(n.createElement)("div",{className:"bwf-placeholder-temp dark bwf-h-15 bwf-w-150"}))),Object(n.createElement)(T.Card,{className:"bwf-crm-importer-wrapper"},Object(n.createElement)("div",{className:"bwf-crm-importer"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-150"}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-270"}),Object(n.createElement)("div",{className:"bwf_clear_10"}),[1,2,3].map((function(t){return Object(n.createElement)(T.Button,{key:t,isTertiary:!0,className:"bwf-crm-importer-button"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-60 bwf-w-60"}))})),Object(n.createElement)("div",{className:"bwf_clear_20"})))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Source","wp-marketing-automations"))),Object(n.createElement)(T.Card,{className:"bwf-crm-importer-wrapper"},Object(n.createElement)("div",{className:"bwf-crm-importer"},Object(n.createElement)("div",{className:"bwf-h2"},Object(o.__)("Import Contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p"},Object(o.__)("Choose the source for importing contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_10"}),_.map((function(t,e){var r=t.key===c?{isPrimary:!0}:{};return Object(n.createElement)(T.Button,so({key:e,onClick:function(){i(t.key),O(2)}},r,{className:t.className}),t.label)})),Object(n.createElement)("div",{className:"bwf_clear_20"}))))},{key:2,label:Object(o.__)("Configuration","wp-marketing-automations"),content:x(2)},{key:3,label:Object(o.__)("Confirmation","wp-marketing-automations"),content:x(3)}];return Object(n.createElement)(T.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-import-contact-modal",shouldCloseOnEsc:!1},Object(n.createElement)("div",{className:"bwf-import-modal-header"},Object(n.createElement)("div",{onClick:function(){Object(l.g)(Object(o.__)("Contacts","wp-marketing-automations")),Object(v.k)({page:"autonami",path:"/contacts/"},"/",{}),e(!1)},className:"bwf-flex",style:{cursor:"pointer",marginRight:"-10px"}},Object(n.createElement)(B.a,{icon:"close"})),Object(n.createElement)("div",{className:"bwf-import-modal-title"},Object(o.__)("Import Contacts","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-crm-import-init"},Object(n.createElement)(be.a,{steps:S,currentStep:w,isPending:E})))};function bo(t){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ho=["path","page","filter"];function yo(){yo=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==bo(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(bo(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function vo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function go(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vo(Object(r),!0).forEach((function(e){wo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function wo(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==bo(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==bo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===bo(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oo(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function jo(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Eo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||_o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _o(t,e){if(t){if("string"==typeof t)return ko(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ko(t,e):void 0}}function ko(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var xo=function(t){var e=Object(n.useContext)(l.d),r=Eo(Object(n.useState)(!1),2),a=r[0],c=r[1],f=Eo(Object(n.useState)(!1),2),m=f[0],p=f[1],b=Object($.a)(),h=Object(D.a)(),d=t.query,y=t.isExport,g=t.setExport,O=t.isImport,j=t.setImport,E=d.path,_=d.page,k=(d.filter,jo(d,ho)),x=Object(n.useRef)(k),S=Eo(Object(n.useState)({status:!1}),2),N=S[0],L=S[1],z=Eo(Object(n.useState)({status:!1,contactInfo:{}}),2),U=z[0],q=z[1],R=Eo(Object(n.useState)({loading:!1,status:!1}),2),Y=R[0],V=R[1],H=Eo(Object(n.useState)({status:!1,contactInfo:{}}),2),W=H[0],K=H[1],rt=h.fetchListing,nt=Object(dt.a)().setSingleContactListData;Object(n.useEffect)((function(){rt(d,0,25,!0),p(!0)}),[]),Object(n.useEffect)((function(){Object(l.Bb)(k,x.current)||rt(d,0,25,!0),x.current=k}),[d]),Object(n.useEffect)((function(){!y&&m&&rt(d,0,25,!0)}),[y]),Object(n.useEffect)((function(){!O&&m&&rt(d,0,25,!0)}),[O]);var ot=function(t){return Object(n.createElement)(C.a,{to:"wp-admin/admin.php?page=autonami&path=/contact/"+t.id,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(e){e.preventDefault(),nt(Object(l.yb)([t.f_name,t.l_name]," ")),Object(v.k)({},"/contact/"+parseInt(t.id))}},Object(n.createElement)(G.a,{contact:t}))},at=function(t){return Object(n.createElement)("div",{className:"bwf-c-contact-details-cell"},t.email&&Object(n.createElement)(F.a,{justify:"justify",align:"top"},Object(n.createElement)(F.c,null,Object(n.createElement)(B.a,{icon:"mail"})),Object(n.createElement)(F.c,null,t.email)),t.contact_no&&Object(n.createElement)(F.a,{justify:"justify",align:"top"},Object(n.createElement)(F.c,null,Object(n.createElement)(B.a,{icon:"phone"})),Object(n.createElement)(F.c,null,t.contact_no)),!t.contact_no&&!t.email&&Object(n.createElement)("span",null,"-"))},ct=function(t){return Object(n.createElement)(I.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var r=e.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(A.a,{isClickable:!0,onInvoke:function(){}},Object(n.createElement)(C.a,{to:"admin.php?page=autonami&path=/contact/"+t.id,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(e){e.preventDefault(),nt(Object(l.yb)([t.f_name,t.l_name]," ")),Object(v.k)({path:"/contact/"+parseInt(t.id)},"/",{})}},Object(n.createElement)(F.a,{justify:"flex-start"},Object(n.createElement)(F.c,null,Object(n.createElement)(B.a,{icon:"profile"})),Object(n.createElement)(F.c,null,Object(o.__)("View","wp-marketing-automations"))))),Object(n.createElement)(A.a,{isClickable:!0,onInvoke:function(){q({status:!0,contactInfo:t}),r()}},Object(n.createElement)(F.a,{justify:"flex-start"},Object(n.createElement)(F.c,null,Object(n.createElement)(B.a,{icon:"mail"})),Object(n.createElement)(F.c,null,Object(o.__)("Send Message","wp-marketing-automations")))),Object(n.createElement)(A.a,{isClickable:!0,onInvoke:function(){K({status:!0,contactInfo:t}),r()}},Object(n.createElement)(F.a,{justify:"flex-start"},Object(n.createElement)(F.c,null,Object(n.createElement)(B.a,{icon:"notes"})),Object(n.createElement)(F.c,null,Object(o.__)("Add Note","wp-marketing-automations")))),Object(n.createElement)(A.a,{isClickable:!0,onInvoke:function(){L({status:!0,contactID:t.id,data:t}),r()}},Object(n.createElement)(F.a,{justify:"flex-start"},Object(n.createElement)(F.c,null,Object(n.createElement)(B.a,{icon:"trash"})),Object(n.createElement)(F.c,null,Object(o.__)("Delete","wp-marketing-automations")))))}})},it=b.getPageNumber,lt=b.getPerPageCount,ut=b.getTotalCount,pt=b.getLoading,bt=(0,b.getContacts)(),yt=it(),vt=lt(),gt=ut(),wt=pt(),Ot=Object(n.useMemo)((function(){var t={};if(Array.isArray(bt)){var e,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_o(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){i=!0,a=t},f:function(){try{c||null==r.return||r.return()}finally{if(i)throw a}}}}(bt);try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n.id]=n}}catch(t){r.e(t)}finally{r.f()}}return t}),[bt]),jt=Object(tt.b)(Ot),Et=jt.singleSelectProps,_t=jt.selectAllProps,kt=jt.floatingBarProps,xt=jt.resetSelection,St=[{key:"select_contact",label:Object(n.createElement)(T.CheckboxControl,_t),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"actions",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"f_name",label:Object(o.__)("Contact","wp-marketing-automations"),isLeftAligned:!0,required:!0,isSortable:!0,cellClassName:"bwf-w-300"},{key:"contact_details",label:Object(o.__)("Details","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-270"},{key:"last_modified",label:Object(o.__)("Last Updated","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-210",isSortable:!0},{key:"country",label:Object(o.__)("Country","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150",isSortable:!0},{key:"state",label:Object(o.__)("State","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150",isSortable:!0},{key:"tags",label:Object(o.__)("Tags","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-180"},{key:"lists",label:Object(o.__)("Lists","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-180"},{key:"time",label:Object(o.__)("Current Time","wp-marketing-automations"),isLeftAligned:!1,visible:!1,cellClassName:"bwf-w-120"},{key:"source",label:Object(o.__)("Source","wp-marketing-automations"),isLeftAligned:!1,visible:!1,cellClassName:"bwf-w-120 bwf-col-center"}],Nt=bwfcrm_contacts_data.table_column_data.contactv2;Object(l.xb)()&&(St.push({key:"total_order_count",label:Object(o.__)("Orders","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-120",isSortable:!0}),St.push({key:"total_order_value",label:Object(o.__)("Total Spend","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150",isSortable:!0}),St.push({key:"l_order_date",label:Object(o.__)("Last Order","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150",isSortable:!0}));var Lt,Pt=function(t){t!==vt&&rt(d,0,t)},Ct=i()("bwfcrm-contacts-list",{"has-search":!0}),It=function(){var t,r=(t=yo().mark((function t(r){return yo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.prev=1,t.next=4,w()({path:Object(l.m)("/contacts/".concat(r,"/")),method:"DELETE"}).then((function(t){if(200!==t.code)throw Error(Object(l.j)(null==t?void 0:t.message));e(t.message),c(!1),L({}),rt(d,0,vt,!0)})).catch((function(t){throw Error(Object(l.j)(null==t?void 0:t.message))}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),L(go(go({},N),{},{content:t.t0.message})),c(!1);case 10:Object(l.fb)(e,2e3);case 11:case"end":return t.stop()}}),t,null,[[1,6]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){Oo(a,n,o,c,i,"next",t)}function i(t){Oo(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(t){return r.apply(this,arguments)}}(),At={0:{label:"Unverified",statusclass:"bwf-tags bwf-tag-gray"},1:{label:"Subscribed",statusclass:"bwf-tags bwf-tag-blue"},2:{label:"Bounced",statusclass:"bwf-tags bwf-tag-red"},3:{label:"Unsubscribed",statusclass:"bwf-tags bwf-tag-orange"}},Tt=function(t,e){if(""===e||Object(s.isUndefined)(e)||Object(s.isNull)(e)||!t.hasOwnProperty(e)||Object(s.isNull)(t[e])||Object(s.isUndefined)(t[e])||""===t[e])return"-";if("status"===e){var r=At.hasOwnProperty(parseInt(t[e]))?At[parseInt(t[e])]:At[0];return Object(n.createElement)("span",{className:r.statusclass},r.label)}if("country"===e){var o=t.country?X[t.country]:"";return Object(n.createElement)(F.a,{justify:"start"},Object(n.createElement)($t.a,{code:t[e],size:15}),o&&Object(n.createElement)("span",{style:{textAlign:"left"}},o))}return Object(s.isArray)(t[e])?(a=t[e],c="",i=[],Object(s.isEmpty)(a)?"-":(a.map((function(t){Object(s.isEmpty)(c)&&(c=t.name),i.push(Object(n.createElement)("span",{key:t.id},t.name))})),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-table-v-center"},Object(n.createElement)("span",null,!Object(s.isEmpty)(c)&&c),!Object(s.isEmpty)(i)&&i.length>1&&Object(n.createElement)(J.a,{items:i}))))):Object(s.isBoolean)(t[e])?t[e]?"Yes":"No":Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:t[e]}});var a,c,i},Ft=Object(n.useCallback)((function(t,e){Object(v.k)(go(go({},d),{},{order:e,orderby:t}),d.path,d)})),Dt=Object(n.createElement)("div",{className:"bwf-display-flex gap-12"},Object(n.createElement)(T.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",key:"export",onClick:function(){g(!0)}},Object(n.createElement)(B.a,{icon:"export",size:16}),Object(o.__)("Export","wp-marketing-automations")),Object(n.createElement)(T.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",key:"import",onClick:function(){j(!0)}},Object(n.createElement)(B.a,{icon:"import",size:16}),Object(o.__)("Import","wp-marketing-automations")),Object(n.createElement)(ht,{query:d}),Object(n.createElement)(Gt,{refreshTable:function(){rt(d,0,vt,!0)},setModelData:V}));return Object(n.createElement)(n.Fragment,null,N&&N.status&&Object(n.createElement)(T.Modal,{onRequestClose:function(){return L({})},className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header"},N.confirm?Object(n.createElement)(Z.a,null):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(o.__)("Delete Contact","wp-marketing-automations")),Object(n.createElement)("span",{onClick:function(){return L({})},className:"bwf-modal-close"},Object(n.createElement)(B.a,{icon:"close",color:"#353030"}))),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-modal-content"},Object(n.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},N.content?N.content:Object(n.createElement)(n.Fragment,null,Object(o.__)("You are about to delete contact ","wp-marketing-automations"),Object(n.createElement)("strong",null,"".concat(N.data&&N.data.f_name," ").concat(N.data&&N.data.l_name,". ")),Object(o.__)("This action cannot be undone. Cancel to stop, Delete to proceed.")))),Object(n.createElement)("div",{className:"bwf_text_right"},N.content?Object(n.createElement)(T.Button,{isPrimary:!0,onClick:function(){L({status:!1})}},Object(o.__)("OK","wp-marketing-automations")):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(T.Button,{className:"bwf-cancel-btn",onClick:function(){L({status:!1})},disabled:a},Object(o.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(T.Button,{isPrimary:!0,className:"bwf-delete-btn",isBusy:a,onClick:function(){It(N.contactID)}},Object(o.__)("Delete","wp-marketing-automations"))))))),Object(n.createElement)(u.a,{className:Ct,rows:Object(s.isEmpty)(bt)?[]:bt.map((function(t){var e=[{display:Et[t.id]&&Object(n.createElement)(T.CheckboxControl,Et[t.id]),value:null},{display:ct(t),value:null},{display:ot(t),value:Object(l.yb)([t.f_name,t.l_name]," ")},{display:at(t),value:Object(o.__)("Email: "+t.email+", Phone: "+t.contact_no,"wp-marketing-automations")}];return Nt.map((function(r){var n=go({},r);delete n.label,delete n.groupKey,delete n.groupLabel;var o=Object.keys(n)[0];e.push({display:Tt(t,o),value:"-"})})),e})),headers:(Lt=[{key:"select_contact",label:Object(n.createElement)(T.CheckboxControl,_t),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"actions",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"f_name",label:Object(o.__)("Contact","wp-marketing-automations"),isLeftAligned:!0,required:!0,isSortable:!0,cellClassName:"bwf-w-210"},{key:"contact_details",label:Object(o.__)("Details","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"}],Nt.map((function(t){Object(s.isObject)(t)&&Lt.push({key:Object.keys(t).find((function(e){return t[e]==(null==t?void 0:t.label)})),label:null==t?void 0:t.label,isLeftAligned:!0,cellClassName:"bwf-w-150"})})),Lt),query:{paged:yt,order:d.order,orderby:d.orderby},rowsPerPage:vt,totalRows:gt,summary:parseInt(gt)>0?[{label:Object(n.createElement)(n.Fragment,null," contacts"),value:Object(n.createElement)("b",null,gt+" ")}]:[],isLoading:wt,onPageChange:function(t,e){rt(d,(t-1)*vt,vt)},onQueryChange:function(t){return"per_page"!==t?function(){}:Pt},actions:[Object(n.createElement)(P,{key:"search",query:d}),Object(n.createElement)(T.SelectControl,{onChange:function(t){"all"===t&&Object(v.k)({page:_},E,{}),"filters"===t&&Object(v.k)({filter:"advanced"},E,d)},options:[{value:"all",label:Object(o.__)("All Contacts","wp-marketing-automations")},{value:"filters",label:Object(o.__)("Advanced Filters","wp-marketing-automations")}],value:d.hasOwnProperty("filter")&&"advanced"===d.filter?"filters":"all",key:"select-contact"}),Object(n.createElement)(mt.c,{key:"list-audience"})],rowHeader:!0,emptyMessage:Object(o.__)("No contacts found","wp-marketing-automations"),onSort:Ft,extraSectionBeforefilterCol:Dt,showMenu:!1,beforeTable:Object(n.createElement)(ft.a,{query:d,isOpen:d.hasOwnProperty("filter")&&"advanced"===d.filter})}),U.status&&Object(n.createElement)(M.a,{contact:U.contactInfo,setSendMessageModel:q}),W.status&&Object(n.createElement)(Q,{contact:W.contactInfo,setModelStatus:K}),Object(n.createElement)(st,{floatingBarProps:kt,resetSelection:xt,onSuccess:function(){return rt(d,0,vt,!0)}}),Object(n.createElement)(et.a,{modalTitle:Y.modalTitle,deleteEntityName:Y.deleteEntityName,confirmText:Y.confirmText,confirmButtonText:Y.buttonConfirm,cancelButtonText:Y.buttonCancel,onConfirm:Y.onConfirm,isLoading:Y.loading,successMessage:Y.success,errorMessage:Y.error,content:Y.content,onRequestClose:function(){return V({status:!1})},isOpen:Y.status,isDelete:!Y.hasOwnProperty("isDelete")||Y.isDelete}))};xo.defaultProps={contacts:[]};var So=xo,No=r(60),Lo=r.n(No),Po=r(28);function Co(t){return(Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Io=["path","page","filter"];function Ao(){Ao=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Co(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Co(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function To(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Fo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?To(Object(r),!0).forEach((function(e){Go(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):To(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Go(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Co(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Co(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Co(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $o(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function Do(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Mo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||Bo(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bo(t,e){if(t){if("string"==typeof t)return zo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zo(t,e):void 0}}function zo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Uo=Object(Ie.a)(Object(l.X)()).formatAmount,qo=function(t){var e=Object(n.useContext)(l.d),r=Mo(Object(n.useState)(!1),2),a=r[0],c=r[1],f=Object($.a)(),m=Object(D.a)(),p=Object(l.w)(),b=t.query,h=t.isExport,d=t.setExport,y=t.isImport,g=t.setImport,O=Mo(Object(n.useState)({loading:!1,status:!1}),2),j=O[0],E=O[1],_=b.path,k=b.page,x=(b.filter,Do(b,Io)),S=Object(n.useRef)(x),N=Object(l.Z)("contact"),L=Mo(Object(n.useState)({status:!1}),2),z=L[0],U=L[1],q=Mo(Object(n.useState)(!1),2),R=q[0],Y=q[1],V=Mo(Object(n.useState)({status:!1,contactInfo:{}}),2),H=V[0],W=V[1],K=Mo(Object(n.useState)({status:!1,contactInfo:{}}),2),rt=K[0],nt=K[1],ot=Object(l.ab)(),at=m.fetch,ct=Object(dt.a)().setSingleContactListData;Object(n.useEffect)((function(){at(b,0,25,!0),Y(!0)}),[]),Object(n.useEffect)((function(){Object(l.Bb)(x,S.current)||h||at(b,0,25,!0),S.current=x}),[b]),Object(n.useEffect)((function(){!h&&R&&at(b,0,25,!0)}),[h]),Object(n.useEffect)((function(){!y&&R&&at(b,0,25,!0)}),[y]);var it=function(t){var e=(t||{}).state;return e||Object(n.createElement)("span",null,"-")},lt=function(t){var e=(t||{}).country,r=void 0===e?"":e;return r&&(r=t.country?X[t.country]:"")?Object(n.createElement)(F.a,{justify:"start"},Object(n.createElement)($t.a,{code:t.country,size:15}),r&&Object(n.createElement)("span",{style:{textAlign:"left"}},r)):Object(n.createElement)("span",null,"-")},ut=function(t){return Object(n.createElement)(C.a,{to:"wp-admin/admin.php?page=autonami&path=/contact/"+t.id,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(e){e.preventDefault(),ct(Object(l.yb)([t.f_name,t.l_name]," ")),Object(v.k)({},"/contact/"+parseInt(t.id))}},Object(n.createElement)(G.a,{contact:t}))},pt=function(t){return Object(n.createElement)("div",{className:"bwf-c-contact-details-cell"},t.email&&Object(n.createElement)(F.a,{justify:"justify",align:"top"},Object(n.createElement)(F.c,null,Object(n.createElement)(B.a,{icon:"mail"})),Object(n.createElement)(F.c,null,t.email)),t.contact_no&&Object(n.createElement)(F.a,{justify:"justify",align:"top"},Object(n.createElement)(F.c,null,Object(n.createElement)(B.a,{icon:"phone"})),Object(n.createElement)(F.c,null,t.contact_no)),!t.contact_no&&!t.email&&Object(n.createElement)("span",null,"-"))},bt=function(t){var e=t.wc.total_order_value;return Object(n.createElement)("div",{className:"bwf-c-listing-total-spent"},e?Object(n.createElement)("div",{className:"bwf-c-total-spent-amount"},Uo(e)):"-")},ht=function(t){var e=t.wc.total_order_count;return Object(n.createElement)("div",{className:"bwf-c-listing-total-spent"},!!e&&Object(n.createElement)("div",{className:"bwf-c-total-spent-amount"},e),!e&&"-")},yt=function(t){var e=t.wc,r=e.l_order_date,o=e.total_order_count,a=e.total_order_value,c=e.total_purchased_items;return Object(n.createElement)("div",{className:"bwf-c-listing-last_order"},!!r&&"0000-00-00"!=r&&Object(n.createElement)("div",{className:"bwf-c-total-spent-amount"},Object(l.M)(r)),!a&&!o&&!c&&(!r||"0000-00-00"==r)&&"-")},vt=function(t){return Object(n.createElement)(I.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var r=e.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(A.a,{isClickable:!0,onInvoke:function(){}},Object(n.createElement)(C.a,{to:"admin.php?page=autonami&path=/contact/"+t.id,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(e){e.preventDefault(),ct(Object(l.yb)([t.f_name,t.l_name]," ")),Object(v.k)({path:"/contact/"+parseInt(t.id)},"/",{})}},Object(n.createElement)(F.a,{justify:"flex-start"},Object(n.createElement)(F.c,null,Object(n.createElement)(B.a,{icon:"profile"})),Object(n.createElement)(F.c,null,Object(o.__)("View","wp-marketing-automations"))))),Object(n.createElement)(A.a,{isClickable:!0,onInvoke:function(){W({status:!0,contactInfo:t}),r()}},Object(n.createElement)(F.a,{justify:"flex-start"},Object(n.createElement)(F.c,null,Object(n.createElement)(B.a,{icon:"mail"})),Object(n.createElement)(F.c,null,Object(o.__)("Send Message","wp-marketing-automations")))),Object(n.createElement)(A.a,{isClickable:!0,onInvoke:function(){nt({status:!0,contactInfo:t}),r()}},Object(n.createElement)(F.a,{justify:"flex-start"},Object(n.createElement)(F.c,null,Object(n.createElement)(B.a,{icon:"notes"})),Object(n.createElement)(F.c,null,Object(o.__)("Add Note","wp-marketing-automations")))),Object(n.createElement)(A.a,{isClickable:!0,onInvoke:function(){U({status:!0,contactID:t.id,data:t}),r()}},Object(n.createElement)(F.a,{justify:"flex-start"},Object(n.createElement)(F.c,null,Object(n.createElement)(B.a,{icon:"trash"})),Object(n.createElement)(F.c,null,Object(o.__)("Delete","wp-marketing-automations")))))}})},gt=f.getPageNumber,wt=f.getPerPageCount,Ot=f.getTotalCount,jt=f.getLoading,Et=(0,f.getContacts)(),_t=gt(),kt=wt(),xt=Ot(),St=jt(),Nt=Object(n.useMemo)((function(){var t={};if(Array.isArray(Et)){var e,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Bo(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){i=!0,a=t},f:function(){try{c||null==r.return||r.return()}finally{if(i)throw a}}}}(Et);try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n.id]=n}}catch(t){r.e(t)}finally{r.f()}}return t}),[Et]),Lt=Object(tt.b)(Nt),Pt=Lt.singleSelectProps,Ct=Lt.selectAllProps,It=Lt.floatingBarProps,At=Lt.resetSelection,Tt=[{key:"select_contact",label:Object(n.createElement)(T.CheckboxControl,Ct),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"actions",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"f_name",label:Object(o.__)("Contact","wp-marketing-automations"),isLeftAligned:!0,required:!0,isSortable:!0,cellClassName:"bwf-w-300"},{key:"contact_details",label:Object(o.__)("Details","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-270"},{key:"last_modified",label:Object(o.__)("Last Updated","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-210",isSortable:!0},{key:"country",label:Object(o.__)("Country","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150",isSortable:!0},{key:"state",label:Object(o.__)("State","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150",isSortable:!0},{key:"tags",label:Object(o.__)("Tags","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-180"},{key:"lists",label:Object(o.__)("Lists","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-180"},{key:"time",label:Object(o.__)("Current Time","wp-marketing-automations"),isLeftAligned:!1,visible:!1,cellClassName:"bwf-w-120"},{key:"source",label:Object(o.__)("Source","wp-marketing-automations"),isLeftAligned:!1,visible:!1,cellClassName:"bwf-w-120 bwf-col-center"}];Object(l.xb)()&&(Tt.push({key:"total_order_count",label:Object(o.__)("Orders","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-120",isSortable:!0}),Tt.push({key:"total_order_value",label:Object(o.__)("Total Spend","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150",isSortable:!0}),Tt.push({key:"l_order_date",label:Object(o.__)("Last Order","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150",isSortable:!0}));var Ft=function(t,e){var r,o,a,c=[];return c=1==e?t.tags:t.lists,r=c,o="",a=[],Object(s.isEmpty)(r)?"-":(r.map((function(t){Object(s.isEmpty)(o)&&(o=t.name),a.push(Object(n.createElement)("span",{key:t.id},t.name))})),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-table-v-center"},Object(n.createElement)("span",null,!Object(s.isEmpty)(o)&&o),!Object(s.isEmpty)(a)&&a.length>1&&Object(n.createElement)(J.a,{items:a}))))},Gt=function(t){try{if(t&&t.hasOwnProperty("timezone")&&!Object(s.isEmpty)(t.timezone)&&ot.hasOwnProperty(t.timezone))return Object(l.O)(Lo()().tz(t.timezone))}catch(t){}return"-"},Dt=Et.map((function(t){var e=function(t){return Object(s.merge)({id:0,email:"-",f_name:"",l_name:"",creation_date:"",fields:{marketing_status:"0",first_order_date:"",country:"",city:"",state:"",contact_no:""},wc:{id:1,l_order_date:"",total_order_count:0,total_order_value:0,total_purchased_items:0}},t)}(t),r=[{display:Pt[e.id]&&Object(n.createElement)(T.CheckboxControl,Pt[e.id]),value:null},{display:vt(e),value:null},{display:ut(e),value:Object(l.yb)([e.f_name,e.l_name]," ")},{display:pt(e),value:Object(o.__)("Email: "+e.email+", Phone: "+e.contact_no,"wp-marketing-automations")},{display:Object(l.N)(e.last_modified,!1,!1),value:e.last_modified},{display:lt(e),value:e.country},{display:it(e),value:e.state},{display:Ft(e,1),value:e.tags.length},{display:Ft(e,2),value:e.lists.length},{display:Gt(e),value:""},{display:e&&e.hasOwnProperty("source")?p[e.source]:"-",value:""}];return Object(l.xb)()&&(r.push({display:ht(e),value:""}),r.push({display:bt(e),value:""}),r.push({display:yt(e),value:""})),r})),Mt=function(t){t!==kt&&at(b,0,t)},Bt=i()("bwfcrm-contacts-list",{"has-search":!0}),zt=function(){var t,r=(t=Ao().mark((function t(r){return Ao().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.prev=1,t.next=4,w()({path:Object(l.m)("/contacts/".concat(r,"/")),method:"DELETE"}).then((function(t){if(200!=t.code)throw Error(Object(l.j)(null==t?void 0:t.message));e(t.message),c(!1),U({}),at(b,0,kt,!0)})).catch((function(t){throw Error(Object(l.j)(null==t?void 0:t.message))}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),U(Fo(Fo({},z),{},{content:t.t0.message})),c(!1);case 10:Object(l.fb)(e,2e3);case 11:case"end":return t.stop()}}),t,null,[[1,6]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){$o(a,n,o,c,i,"next",t)}function i(t){$o(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(t){return r.apply(this,arguments)}}(),Ut=Object(n.useCallback)((function(t,e){Object(v.k)(Fo(Fo({},b),{},{order:e,orderby:t}),b.path,b)})),qt=Object(n.createElement)("div",{className:"bwf-display-flex gap-12"},Object(n.createElement)(T.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",key:"export",onClick:function(){d(!0)}},Object(n.createElement)(B.a,{icon:"export",size:16}),Object(o.__)("Export","wp-marketing-automations")),Object(n.createElement)(T.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",key:"import",onClick:function(){g(!0)}},Object(n.createElement)(B.a,{icon:"import",size:16}),Object(o.__)("Import","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-sort-button components-button is-secondary bwf-btn-small bwf-btn-gray",onClick:function(){E({status:!0,error:Object(n.createElement)(n.Fragment,null,Object(o.__)("This feature requires","wp-marketing-automations")," ",Object(n.createElement)("b",null,Object(o.__)("FunnelKit Automations PRO","wp-marketing-automations"))," ",Object(o.__)("version 2.1.4 or greater","wp-marketing-automations")),modalTitle:Object(o.__)("Update Required","wp-marketing-automations")})}},Object(n.createElement)(B.a,{icon:"import",size:16}),Object(o.__)("Sort","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-sort-button components-button is-secondary bwf-btn-small bwf-btn-gray",onClick:function(){E({status:!0,error:Object(n.createElement)(n.Fragment,null,Object(o.__)("This feature requires","wp-marketing-automations")," ",Object(n.createElement)("b",null,Object(o.__)("FunnelKit Automations PRO","wp-marketing-automations"))," ",Object(o.__)("version 2.1.4 or greater","wp-marketing-automations")),modalTitle:Object(o.__)("Update Required","wp-marketing-automations")})}},Object(n.createElement)(B.a,{icon:"filters",size:16}),Object(o.__)("Columns","wp-marketing-automations")));return Object(n.createElement)(n.Fragment,null,z&&z.status&&Object(n.createElement)(T.Modal,{onRequestClose:function(){return U({})},className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header"},z.confirm?Object(n.createElement)(Z.a,null):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(o.__)("Delete Contact","wp-marketing-automations")),Object(n.createElement)("span",{onClick:function(){return U({})},className:"bwf-modal-close"},Object(n.createElement)(B.a,{icon:"close",color:"#353030"}))),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-modal-content"},Object(n.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},z.content?z.content:Object(n.createElement)(n.Fragment,null,Object(o.__)("You are about to delete contact ","wp-marketing-automations"),Object(n.createElement)("strong",null,"".concat(z.data&&z.data.f_name," ").concat(z.data&&z.data.l_name,". ")),Object(o.__)("This action cannot be undone. Cancel to stop, Delete to proceed.")))),Object(n.createElement)("div",{className:"bwf_text_right"},z.content?Object(n.createElement)(T.Button,{isPrimary:!0,onClick:function(){U({status:!1})}},Object(o.__)("OK","wp-marketing-automations")):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(T.Button,{className:"bwf-cancel-btn",onClick:function(){U({status:!1})},disabled:a},Object(o.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(T.Button,{isPrimary:!0,className:"bwf-delete-btn",isBusy:a,onClick:function(){zt(z.contactID)}},Object(o.__)("Delete","wp-marketing-automations"))))))),Object(n.createElement)(u.a,{className:Bt,rows:Dt,headers:function(t){if(Object(s.isEmpty)(N))return t;var e=[];return t.map((function(t){["select_contact","actions","contact"].includes(t.key)||N.includes(t.key)?t.visible=!0:t.visible=!1,t.hasOwnProperty("required")&&t.required&&(t.visible=!0),e.push(t)})),e}(Tt),query:{paged:_t,order:b.order,orderby:b.orderby},rowsPerPage:kt,totalRows:xt,summary:parseInt(xt)>0?[{label:Object(n.createElement)(n.Fragment,null," contacts"),value:Object(n.createElement)("b",null,xt+" ")}]:[],isLoading:St,onPageChange:function(t,e){at(b,(t-1)*kt,kt)},onQueryChange:function(t){return"per_page"!==t?function(){}:Mt},onColumnsChange:function(t,e){w()({path:Object(l.m)("/user-preference/".concat(Object(l.x)(),"/")),method:"POST",data:{data:{contact_column:t}}}).then((function(e){200===e.code&&(bwfcrm_contacts_data.table_column_data.contact=t)}))},actions:[Object(n.createElement)(P,{key:"search",query:b}),Object(n.createElement)(T.SelectControl,{onChange:function(t){"all"===t&&Object(v.k)({page:k},_,{}),"filters"===t&&Object(v.k)({filter:"advanced"},_,b)},options:[{value:"all",label:Object(o.__)("All Contacts","wp-marketing-automations")},{value:"filters",label:Object(o.__)("Advanced Filters","wp-marketing-automations")}],value:b.hasOwnProperty("filter")&&"advanced"===b.filter?"filters":"all",key:"select-contact"}),Object(n.createElement)(mt.c,{key:"list-audience"})],rowHeader:!0,emptyMessage:Object(o.__)("No contacts found","wp-marketing-automations"),showMenu:!1,onSort:Ut,extraSectionBeforefilterCol:qt,filterColumnIcon:Object(n.createElement)("span",{className:"bwf-cursor-pointer"},Object(n.createElement)(Po.a,{icon:"filters",iconSize:20,size:20,toolTipText:Object(n.createElement)("span",{className:"bwfan_tooltip_text bwf-w-60","data-position":"top"},Object(o.__)("Filter","wp-marketing-automations"))})),beforeTable:Object(n.createElement)(ft.a,{query:b,isOpen:b.hasOwnProperty("filter")&&"advanced"===b.filter})}),H.status&&Object(n.createElement)(M.a,{contact:H.contactInfo,setSendMessageModel:W}),rt.status&&Object(n.createElement)(Q,{contact:rt.contactInfo,setModelStatus:nt}),Object(n.createElement)(st,{floatingBarProps:It,resetSelection:At,onSuccess:function(){return at(b,0,kt,!0)}}),Object(n.createElement)(et.a,{modalTitle:j.modalTitle,deleteEntityName:j.deleteEntityName,confirmText:j.confirmText,confirmButtonText:j.buttonConfirm,cancelButtonText:j.buttonCancel,onConfirm:j.onConfirm,isLoading:j.loading,successMessage:j.success,errorMessage:j.error,content:j.content,onRequestClose:function(){return E({status:!1})},isOpen:j.status,isDelete:!j.hasOwnProperty("isDelete")||j.isDelete}))};qo.defaultProps={contacts:[]};var Ro=qo,Yo=(r(942),r(79)),Vo=r(95),Ho=r(917),Wo=r(272),Ko=r(273);function Qo(t){return(Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zo(){return(Zo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function Jo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Xo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jo(Object(r),!0).forEach((function(e){ta(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ta(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Qo(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Qo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Qo(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ea(){ea=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new L(n||[]);return o(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Qo(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Qo(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new _(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function ra(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function na(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return oa(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oa(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oa(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var aa={email:"",f_name:"",l_name:"",marketing_status:!0,contact_no:""},ca=function(t){var e=Object(n.useContext)(l.d),r=na(Object(n.useState)({}),2),a=r[0],c=(r[1],t.hasOwnProperty("errors")?t.error:{}),i=na(Object(n.useState)([]),2),u=i[0],f=i[1],m=na(Object(n.useState)([]),2),p=m[0],b=m[1],h=na(Object(n.useState)(null),2),d=h[0],y=h[1],g=na(Object(n.useState)(null),2),O=g[0],j=g[1],E=na(Object(n.useState)(aa),2),_=E[0],k=E[1],x=na(Object(n.useState)(!1),2),S=x[0],N=x[1],L=na(Object(n.useState)({}),2),P=L[0],C=L[1],I=Object(dt.a)().setSingleContactListData,A=function(){var r,n=(r=ea().mark((function r(n){return ea().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return N(!0),r.prev=1,r.next=4,w()({path:Object(l.m)("/contacts"),method:"POST",data:n}).then((function(r){if(200!=r.code)throw Error(Object(l.j)(null==r?void 0:r.message));Object(l.G)()||(bwfcrm_contacts_data.first_contact_id=1),e(r.message),C({}),N(!1),I(Object(l.yb)([n.f_name,n.l_name]," ")),Object(v.k)({page:"autonami",path:"/contact/"+parseInt(r.result.id)},"/",{}),t.onCloseModal()})).catch((function(t){throw Error(Object(l.j)(null==t?void 0:t.message))}));case 4:r.next=10;break;case 6:r.prev=6,r.t0=r.catch(1),N(!1),y(r.t0);case 10:Object(l.fb)(e,2e3);case 11:case"end":return r.stop()}}),r,null,[[1,6]])})),function(){var t=this,e=arguments;return new Promise((function(n,o){var a=r.apply(t,e);function c(t){ra(a,n,o,c,i,"next",t)}function i(t){ra(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(t){return n.apply(this,arguments)}}(),F=Object(D.a)().fetch,G=t.query,$=function(){O&&(j(null),F(G,0,25)),t.onCloseModal()},M=function(t){var e={};return!Object(s.isEmpty)(t.email)&&Object(Vo.a)(t.email?t.email:"")||(e=Object(o.__)(Object(s.isEmpty)(t.email)?"Email is required":"Email is not valid","wp-marketing-automations")),!Object(s.isEmpty)(e)||Object(s.isEmpty)(t.phone)||Object(Ho.a)(t.phone?t.phone:"")||(e=Object(o.__)("Phone is not valid","wp-marketing-automations")),Object(s.isEmpty)(e)?(y(null),!0):(y({message:e}),!1)};return Object(n.createElement)(T.Modal,{onRequestClose:$,className:"bwf-admin-modal bwf-admin-modal-large bwf-add-new-contact-modal "},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(o.__)("Add Contact","wp-marketing-automations")),Object(n.createElement)("span",{onClick:$,className:"bwf-modal-close"},Object(n.createElement)(B.a,{icon:"close",color:"#353030"}))),d&&Object(n.createElement)(T.Notice,{status:"error",onRemove:function(){return y(null)}},d.hasOwnProperty("message")?d.message:Object(o.__)("Unknown Error while creating contact","wp-marketing-automations")),O&&O.hasOwnProperty("id")&&Object(n.createElement)(T.Notice,{status:"success",onRemove:$},Object(o.__)("Contact created successfully","wp-marketing-automations")),P.error||P.success?P&&P.success&&P.message?Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(Wo.a,null),Object(n.createElement)("div",{className:"bwf-h1"},P.message)):P&&P.error&&P.message?Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(Ko.a,null),Object(n.createElement)("div",{className:"bwf-h1"},P.message)):Object(n.createElement)(Z.a,null):Object(n.createElement)(Yo.a,{errors:Xo(Xo({},a),c),validate:function(t){var e={};return!Object(s.isEmpty)(t.email)&&Object(Vo.a)(t.email?t.email:"")||(e.email=Object(o.__)(Object(s.isEmpty)(t.email)?"Email is required":"Email is not valid","wp-marketing-automations")),Object(s.isEmpty)(t.phone)||Object(Ho.a)(t.phone?t.phone:"")||(e.phone=Object(o.__)("Phone is not valid","wp-marketing-automations")),{}},onSubmit:function(t){var e=t.email,r=t.f_name,n=t.l_name,o=t.marketing_status,a=t.phone,c=[];Object(s.isEmpty)(u)||u.map((function(t){c.push({id:t.key,value:t.label})}));var i=[];Object(s.isEmpty)(p)||p.map((function(t){i.push({id:t.key,value:t.label})})),k({email:e,f_name:r,l_name:n,contact_no:a,status:o,tags:c,lists:i}),A({email:e,f_name:r,l_name:n,contact_no:a,status:o,tags:c,lists:i})},initialValues:_},(function(t){var e=t.getInputProps,r=t.values,a=(t.errors,t.handleSubmit);return Object(n.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(t){"Enter"==t.key&&M(r)&&a()}},Object(n.createElement)("div",{className:"bwf-half-fields"},Object(n.createElement)(T.TextControl,Zo({disabled:S,type:"email",autoFocus:!0,label:Object(o.__)("Email","wp-marketing-automations"),help:Object(o.__)("Required","wp-marketing-automations")},e("email"))),Object(n.createElement)(T.TextControl,Zo({disabled:S,label:Object(o.__)("Phone","wp-marketing-automations"),help:Object(o.__)("Optional","wp-marketing-automations")},e("phone"))),Object(n.createElement)(T.TextControl,Zo({disabled:S,label:Object(o.__)("First Name","wp-marketing-automations"),help:Object(o.__)("Optional","wp-marketing-automations")},e("f_name"))),Object(n.createElement)(T.TextControl,Zo({disabled:S,label:Object(o.__)("Last Name","wp-marketing-automations"),help:Object(o.__)("Optional","wp-marketing-automations")},e("l_name"))),Object(n.createElement)(Kr.a,{onTagsChange:f,selected:u}),Object(n.createElement)(Qr.a,{onListsChange:b,selected:p})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",null,Object(n.createElement)(T.CheckboxControl,Zo({disabled:S,label:"Mark Contact as Subscribed",help:Object(o.__)("Optional","wp-marketing-automations")},e("marketing_status")))),Object(n.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(n.createElement)(T.Button,{className:"bwf-cancel-btn",onClick:$},Object(o.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(T.Button,{isPrimary:!0,onClick:function(){M(r)&&a()},isBusy:S,disabled:S},Object(o.__)("Add","wp-marketing-automations"))))})))};ca.defaultProps={onCloseModal:function(){}};var ia=ca,la=r(306),ua=r(863),sa=r(146);function fa(t){return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ma(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function pa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ma(Object(r),!0).forEach((function(e){ba(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ma(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ba(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==fa(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==fa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===fa(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ha(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return da(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return da(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.default=function(){var t=Object($.a)(),e=Object(D.a)(),r=t.getError,c=t.getContacts,i=t.getCountData,u=e.clearError,s=e.startIndexing,f=e.setStateProp,m=ha(Object(n.useState)(!1),2),p=m[0],b=m[1],h=ha(Object(n.useState)(!1),2),d=h[0],y=h[1],v=ha(Object(n.useState)(!1),2),g=v[0],w=v[1],O=location&&location.search?Object(a.parse)(location.search.substring(1)):{},j=r(),E=Object(n.useRef)();Object(n.useEffect)((function(){E.current?u():E.current=j})),Object(n.useEffect)((function(){return Object(l.g)("Contacts"),function(){f("countData",{})}}),[]);var _=Object(n.createElement)(n.Fragment,null,Object(n.createElement)(T.Button,{isPrimary:!0,className:"bwf-display-flex",label:"Add New Contact",onClick:function(){return b(!0)}},Object(o.__)("Add New Contact","wp-marketing-automations"))),k=i(),x=Object(sa.a)().getPageCountData,S=Object(re.a)().setPageCountData,N=x();Object(n.useEffect)((function(){S(pa(pa({},N),k))}),[k]),Object(ua.a)("contacts","",Object(o.__)("ALL CONTACTS","wp-marketing-automations"),_);var L=c();if("indexing_status"in L){var P="indexing_status"in L&&2===parseInt(L.indexing_status)?Object(o.__)("Contacts indexing is in progress. Kindly, check back after some time.","wp-marketing-automations"):Object(o.__)("Contacts Indexing required, before you can view the contacts.","wp-marketing-automations"),C="indexing_status"in L&&2===parseInt(L.indexing_status)?null:Object(o.__)("Start Indexing","wp-marketing-automations");return Object(n.createElement)(la.a,{text:P,buttonText:C,onButtonClick:function(){return s()}})}var I=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(n.createElement)(B.a,{icon:"zero-contacts",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(o.__)("No Contacts","wp-marketing-automations")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(o.__)("Add contacts and get actionable insights about every contact to revv up your campaigns.","wp-marketing-automations")}},{type:"actions",data:{count:"2",actions:[{icon:Object(n.createElement)(B.a,{icon:"add-contact",width:"36",height:"36"}),heading:Object(o.__)("Add a Contact","wp-marketing-automations"),sub_heading:Object(o.__)("Create a new contact manually","wp-marketing-automations"),onClick:function(){b(!0)}},{icon:Object(n.createElement)(B.a,{icon:"import-contact",width:"36",height:"36"}),heading:Object(o.__)("Import Contacts","wp-marketing-automations"),sub_heading:Object(o.__)("Bulk upload contacts from various sources","wp-marketing-automations"),onClick:function(){w(!0)}}]}}];return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ne.a,null),Object(n.createElement)("div",{className:"bwfcrm-contacts-list__scroll-point"}),j&&!p&&Object(n.createElement)(T.Notice,{status:"error"},j.message),Object(l.G)()?Object(n.createElement)(n.Fragment,null,-1===Object(l.h)(bwfcrm_contacts_data.bwf_pro_version,"2.1.4")?Object(n.createElement)(Ro,{query:O,isExport:d,setExport:y,isImport:g,setImport:w}):Object(n.createElement)(So,{query:O,isExport:d,setExport:y,isImport:g,setImport:w})):Object(n.createElement)(Dt.a,{data:I}),p&&Object(n.createElement)(ia,{query:O,onCloseModal:function(){return b(!1)}}),d&&Object(n.createElement)(lr,{setExport:y}),g&&Object(n.createElement)(po,{setImport:w}))}},1255:function(t,e,r){"use strict";r.r(e);var n=r(0),o=r(76),a=r(4),c=r(2),i=r(15),l=(r(915),r(5)),u=r(27),s=r(33),f=r.n(s),m=r(124),p=r.n(m),b=r(32),h=r.n(b),d=r(3),y=r(14),v=r.n(y);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(){w=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new C(n||[]);return o(c,"_invoke",{value:S(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var O={};u(O,c,(function(){return this}));var j=Object.getPrototypeOf,E=j&&j(j(I([])));E&&E!==r&&n.call(E,c)&&(O=E);var _=v.prototype=d.prototype=Object.create(O);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==g(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function S(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=N(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function N(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,N(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(g(e)+" is not iterable")}return y.prototype=v,o(_,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},k(x.prototype),u(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new x(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},k(_),u(_,l,"Generator"),u(_,c,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function O(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}var j={name:"contacts",className:"bwf-search-bwf-contacts-result",options:function(t){return(e=w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!f()(e)){t.next=2;break}return t.abrupt("return",[]);case 2:return t.abrupt("return",[{id:1,email:"johndoe@gmail.com",f_name:"John",l_name:"Doe",contact_no:"12345567890"}]);case 3:case"end":return t.stop()}}),t)})),r=function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(t){O(a,n,o,c,i,"next",t)}function i(t){O(a,n,o,c,i,"throw",t)}c(void 0)}))},function(t){return r.apply(this,arguments)})(t);var e,r},isDebounced:!0,getOptionIdentifier:function(t){return t.id},getOptionKeywords:function(t){return[t.f_name,t.l_name,t.email]},getFreeTextOptions:function(t,e){return[{key:"name",label:Object(n.createElement)("span",{key:"name",className:"bwf-search-result-name"},v()({mixedString:Object(c.__)("All contacts with names that include {{query /}}","wp-marketing-automations"),components:{query:Object(n.createElement)("strong",{className:"components-form-token-field__suggestion-match"},t)}})),value:{id:t,name:t,contacts:e.map((function(t){return h()(t,"value")?t.value:t})),searchTerm:t}}]},getOptionLabel:function(t,e){var r=Object(l.i)(Object(l.u)(t),e)||{};return Object(n.createElement)("span",{key:"name",className:"bwf-search-result-name","aria-label":Object(l.u)(t)},r.suggestionBeforeMatch,Object(n.createElement)("strong",{className:"components-form-token-field__suggestion-match"},r.suggestionMatch),r.suggestionAfterMatch)},getOptionCompletion:function(t){return t}};function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(){_=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,c=Object.create(a.prototype),i=new C(n||[]);return o(c,"_invoke",{value:S(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(I([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,a,c,i){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==E(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function S(e,r,n){var o=m;return function(a,c){if(o===p)throw new Error("Generator is already running");if(o===b){if("throw"===a)throw c;return{value:t,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var l=N(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function N(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,N(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var c=a.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(E(e)+" is not iterable")}return y.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},k(x.prototype),u(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new x(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},k(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function k(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}var x=function(t){var e=t.query,r=e.hasOwnProperty("s")?e.s:"",o=f()(r)?[]:[{key:r,label:Object(c.__)("Search Term: ","wp-marketing-automations")+r,bwfLabelSource:"bwfcrm_contacts",isSearchTerm:!0}],a=function(){var t,r=(t=_().mark((function t(r){var n,o,a;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p()(r)){t.next=2;break}return t.abrupt("return");case 2:if(n=r.find((function(t){return h()(t,"searchTerm")})),!(Object(d.isUndefined)(n)&&r.length>0&&r[0].hasOwnProperty("id"))){t.next=6;break}return Object(i.k)({},"/contact/".concat(r[0].id),e),t.abrupt("return");case 6:if(o=Object(d.isUndefined)(n)?void 0:n.searchTerm,a=h()(e,"s")&&!f()(e.s)?e.s:"",o!==a){t.next=10;break}return t.abrupt("return");case 10:Object(i.k)({s:o},"/contacts",e);case 11:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){k(a,n,o,c,i,"next",t)}function i(t){k(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(t){return r.apply(this,arguments)}}();return Object(n.createElement)(u.a,{autocompleter:j,multiple:!1,allowFreeTextSearch:!0,inlineTags:!0,selected:o,onChange:a,placeholder:Object(c.__)("Search by contact","wp-marketing-automations"),showClearButton:!0,disabled:!1})},S=r(268),N=r(274),L=r(17),P=r(285),C=r(38),I=r(270),A=r(67),T=r(101),F=r(103),G=r(7),$=r.n(G),D=r(77),M=r(863),B=r(60),z=r.n(B),U=r(102),q=r(8),R=r(271),Y=r(28);function V(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var W=Object(D.a)(Object(l.X)()).formatAmount;e.default=function(){Object(l.g)("Contacts");var t=Object(i.i)(),e=t.path,r=V(Object(n.useState)(!1),2),u=r[0],s=r[1],f=V(Object(n.useState)(!1),2),m=f[0],p=f[1],b=Object(n.createElement)(n.Fragment,null,Object(n.createElement)(a.Button,{isPrimary:!0,className:"bwf-display-flex",label:"Add New Contact",onClick:function(){s(!0)}},Object(n.createElement)(q.a,{icon:"lock",size:16,color:"#fff"}),Object(c.__)("Add New Contact","wp-marketing-automations")));Object(M.a)("contacts","",Object(c.__)("ALL CONTACTS","wp-marketing-automations"),b);var h=$()("bwfcrm-contacts-list",{"has-search":!0}),y=function(t){var e=t.country?"":t.country,r=Object(l.yb)([e],", ");return Object(d.isEmpty)(Object(d.trim)(r))?"":r},v=function(t){var e=y(t),r=t.country?N[t.country]:"";return t.country||e?Object(n.createElement)(L.a,{justify:"start"},!Object(d.isEmpty)(t.country)&&Object(n.createElement)(L.c,null,Object(n.createElement)(P.a,{code:t.country,size:15})),Object(n.createElement)(L.c,null,e&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",null,y(t))),r&&Object(n.createElement)("span",null,e&&Object(n.createElement)(n.Fragment,null,",")," ",r))):Object(n.createElement)("span",null,"-")},g=function(t){return Object(n.createElement)(C.a,{href:"admin.php?page=autonami&path=/contact/"+t.id,type:"bwf-crm",className:"bwf-a-no-underline"},Object(n.createElement)(I.a,{contact:t}))},w=function(t){return Object(n.createElement)("div",{className:"bwf-c-contact-details-cell"},t.email&&Object(n.createElement)(L.a,{justify:"justify",align:"top"},Object(n.createElement)(L.c,null,Object(n.createElement)(q.a,{icon:"mail"})),Object(n.createElement)(L.c,null,t.email)),t.contact_no&&Object(n.createElement)(L.a,{justify:"justify",align:"top"},Object(n.createElement)(L.c,null,Object(n.createElement)(q.a,{icon:"phone"})),Object(n.createElement)(L.c,null,t.contact_no)),!t.contact_no&&!t.email&&Object(n.createElement)("span",null,"-"))},O=function(t){var e=t.wc,r=(e.l_order_date,e.total_order_count),o=e.total_order_value,a=e.total_purchased_items;return Object(n.createElement)("div",{className:"bwf-c-listing-total-spent"},!(!o||!r)&&Object(n.createElement)("div",{className:"bwf-c-total-spent-amount"},W(o)," |"," ",r," ",Object(c.__)(parseInt(r)>1?"orders":"order","wp-marketing-automations")),!!a&&Object(n.createElement)("div",{className:"bwf-c-total-spent-amount"},a," ",a>1?Object(c.__)("items","wp-marketing-automations"):Object(c.__)("item","wp-marketing-automations")),!o&&!r&&!a&&"-")},j=function(t){var e=t.wc,r=e.l_order_date,o=e.total_order_count,a=e.total_order_value,c=e.total_purchased_items;return Object(n.createElement)("div",{className:"bwf-c-listing-last_order"},!!r&&"0000-00-00"!=r&&Object(n.createElement)("div",{className:"bwf-c-total-spent-amount"},Object(l.M)(r)),!a&&!o&&!c&&(!r||"0000-00-00"==r)&&"-")},E=function(t){return Object(n.createElement)(A.a,{label:Object(c.__)("Quick Actions","wp-marketing-automations"),renderContent:function(e){var r=e.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(T.a,{isClickable:!0,onInvoke:function(){}},Object(n.createElement)(C.a,{href:"admin.php?page=autonami&path=/contact/"+t.id,type:"bwf-crm",className:"bwf-a-no-underline"},Object(n.createElement)(L.a,{justify:"flex-start"},Object(n.createElement)(L.c,null,Object(n.createElement)(q.a,{icon:"profile"})),Object(n.createElement)(L.c,null,Object(c.__)("View","wp-marketing-automations"))))),Object(n.createElement)(T.a,{isClickable:!0,onInvoke:function(){s(!0),r()}},Object(n.createElement)(L.a,{justify:"flex-start"},Object(n.createElement)(L.c,null,Object(n.createElement)(q.a,{icon:"mail"})),Object(n.createElement)(L.c,null,Object(c.__)("Send Message","wp-marketing-automations")))),Object(n.createElement)(T.a,{isClickable:!0,onInvoke:function(){s(!0),r()}},Object(n.createElement)(L.a,{justify:"flex-start"},Object(n.createElement)(L.c,null,Object(n.createElement)(q.a,{icon:"notes"})),Object(n.createElement)(L.c,null,Object(c.__)("Add Note","wp-marketing-automations")))),Object(n.createElement)(T.a,{isClickable:!0,onInvoke:function(){s(!0),r()}},Object(n.createElement)(L.a,{justify:"flex-start"},Object(n.createElement)(L.c,null,Object(n.createElement)(q.a,{icon:"trash"})),Object(n.createElement)(L.c,null,Object(c.__)("Delete","wp-marketing-automations")))))}})},_=function(t){var e="",r=[];return Object(d.isEmpty)(t)?"-":(t.map((function(t){Object(d.isEmpty)(e)&&(e=t.name),r.push(Object(n.createElement)("span",{key:t.id},t.name))})),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-table-v-center"},!Object(d.isEmpty)(e)&&e,!Object(d.isEmpty)(r)&&r.length>1&&Object(n.createElement)(F.a,{items:r}))))},k=[{id:1,email:"johndoe@gmail.com",f_name:"John",l_name:"Doe",creation_date:z()().format(),lists:[{id:"1",name:"List1"},{id:"2",name:"List2"}],tags:[{id:"1",name:"Tag1"},{id:"2",name:"Tag2"}],country:"US",state:"Washington DC",contact_no:"1234567890",fields:{marketing_status:"1"},wc:{id:1,l_order_date:z()().format(),total_order_count:5,total_order_value:100,total_purchased_items:10}}].map((function(t){return[{display:Object(n.createElement)(a.CheckboxControl,{checked:!1,onChange:function(){return s(!0)}}),value:null},{display:E(t),value:null},{display:g(t),value:Object(l.yb)([t.f_name,t.l_name]," ")},{display:w(t),value:Object(c.__)("Email: "+t.email+", Phone: "+t.contact_no,"wp-marketing-automations")},{display:v(t),value:y(t)},{display:_(t.tags),value:t.tags},{display:_(t.lists),value:t.lists},{display:O(t),value:""},{display:j(t),value:""}]})),G=[{key:"select_contact",label:Object(n.createElement)(a.CheckboxControl,{checked:!1,onChange:function(){return s(!0)}}),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"actions",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"contact",label:Object(c.__)("Contact","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-300"},{key:"contact_details",label:Object(c.__)("Details","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"},{key:"column_location",label:Object(c.__)("Country","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"},{key:"tags",label:Object(c.__)("Tags","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-150"},{key:"lists",label:Object(c.__)("Lists","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-150"},{key:"total_spent",label:Object(c.__)("Total Spent","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"},{key:"last_order",label:Object(c.__)("Last Order Date","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"}],D=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(n.createElement)(q.a,{icon:"zero-contacts",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(c.__)("No Contacts","wp-marketing-automations")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(c.__)("Add contacts and get actionable insights about every contact to revv up your campaigns.","wp-marketing-automations")}},{type:"actions",data:{count:"2",actions:[{icon:Object(n.createElement)(q.a,{icon:"add-contact",width:"36",height:"36"}),heading:Object(c.__)("Add a Contact","wp-marketing-automations"),sub_heading:Object(c.__)("Create a new contact manually","wp-marketing-automations"),onClick:function(){s(!0)}},{icon:Object(n.createElement)(q.a,{icon:"contacts",width:"36",height:"36"}),heading:Object(c.__)("View Sample Contact","wp-marketing-automations"),sub_heading:Object(c.__)("Experience contact list and single contact page with dummy data.","wp-marketing-automations"),onClick:function(){return p(!0)},isDummy:!0}]}}],B=Object(n.createElement)("div",{className:"bwf-display-flex gap-12"},Object(n.createElement)(a.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",title:Object(c.__)("Export","wp-marketing-automations"),onClick:function(){s(!0)}},Object(n.createElement)(q.a,{icon:"export",size:16}),Object(c.__)("Export")),Object(n.createElement)(a.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",title:Object(c.__)("Import","wp-marketing-automations"),onClick:function(){s(!0)}},Object(n.createElement)(q.a,{icon:"import",size:16}),Object(c.__)("Import")));return Object(n.createElement)(n.Fragment,null,m?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(o.a,null),Object(n.createElement)(S.a,{className:h,rows:k,headers:G,query:{paged:1},rowsPerPage:1,totalRows:1,isLoading:!1,rowHeader:!0,summary:[{label:Object(n.createElement)(n.Fragment,null," contact"),value:Object(n.createElement)("b",null,"1 ")}],actions:[Object(n.createElement)(x,{key:"search",query:t}),Object(n.createElement)(a.SelectControl,{onChange:function(t){"all"===t&&Object(i.k)({page:page},e,{}),setFiltersOpen("filters"===t)},options:[{value:"all",label:Object(c.__)("All Contacts","wp-marketing-automations")}],value:"all"}),Object(n.createElement)(a.Button,{isTertiary:!0,className:"bwf-display-flex",onClick:function(){return s(!0)}},Object(n.createElement)(q.a,{icon:"lock",size:16,color:"#0073aa"}),"Select Audience")],filterColumnIcon:Object(n.createElement)("span",{className:"bwf-cursor-pointer"},Object(n.createElement)(Y.a,{icon:"filters",iconSize:20,size:20,toolTipText:Object(n.createElement)("span",{className:"bwfan_tooltip_text bwf-w-60","data-position":"top"},Object(c.__)("Filter","wp-marketing-automations"))})),extraSectionBeforefilterCol:B,emptyMessage:Object(c.__)("No contacts found","wp-marketing-automations")})):Object(n.createElement)(R.a,{data:D}),Object(n.createElement)(U.a,{isOpen:u,onRequestClose:function(){return s(!1)}}))}},869:function(t,e,r){"use strict";var n=r(143),o=r(5);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c=["fetch"],i=["s","page","filter","orderby","order","path"],l=["s","page","filter","orderby","order","path"];function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}e.a=function(){var t=Object(n.a)("contacts"),e=t.fetch;return s(s({},m(t,c)),{},{fetch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=t.s,b=void 0===p?"":p,h=(t.page,t.filter,t.orderby),d=t.order,y=(t.path,m(t,i)),v={offset:r,limit:n,search:b,filters:y,get_wc:Object(o.xb)(),grab_totals:a,only_count:c,fetch_base:l,grab_custom_fields:!1,exclude_unsubs:u,exclude_unsubs_lists:s};d&&h&&(v.order=d,v.order_by=h),f&&(v.unopen_broadcast=parseInt(f)),e("GET",Object(o.m)("/contacts"),v)},fetchListing:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=t.s,b=void 0===p?"":p,h=(t.page,t.filter,t.orderby),d=t.order,y=(t.path,m(t,l)),v={offset:r,limit:n,search:b,filters:y,get_wc:Object(o.xb)(),grab_totals:a,only_count:c,fetch_base:i,grab_custom_fields:!1,exclude_unsubs:u,exclude_unsubs_lists:s};d&&h&&(v.order=d,v.order_by=h),f&&(v.unopen_broadcast=parseInt(f)),e("GET",Object(o.m)("/contacts/listing"),v)},startIndexing:function(){return e("GET",Object(o.m)("/contacts"),{start_indexing:!0})}})}},876:function(t,e,r){"use strict";var n=r(0),o=r(27),a=r(2),c=r(147);e.a=function(t){var e=t.selected,r=t.onTagsChange;return Object(n.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(n.createElement)("div",{className:"bwf-input-label"},Object(a.__)("Add Tags","wp-marketing-automations")),Object(n.createElement)(o.a,{autocompleter:c.b,multiple:!1,allowFreeTextSearch:!0,inlineTags:!1,selected:e,onChange:function(t){r(t)},onRemoveTag:function(t,n){var o=e.filter((function(e){return!(e.key==t&&e.label==n)}));r(o)},placeholder:Object(a.__)("Search by tag name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},878:function(t,e,r){"use strict";var n=r(144);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=["getStateProp"];function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}e.a=function(){var t=Object(n.a)("contacts"),e=t.getStateProp;return i(i({},u(t,a)),{},{getContacts:function(){return e("contacts_list")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getTotalCount:function(){return parseInt(e("total"))},getCountData:function(){return e("countData")}})}},883:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(0);var o=function(t,e){var r=Object(n.useRef)();Object(n.useEffect)((function(){r.current=t}),[t]),Object(n.useEffect)((function(){if(null!==e){var t=setInterval((function(){r.current()}),e);return function(){return clearInterval(t)}}}),[e])}},885:function(t,e,r){"use strict";var n=r(0),o=r(27),a=r(2),c=r(147);e.a=function(t){var e=t.selected,r=t.onListsChange;return Object(n.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(n.createElement)("div",{className:"bwf-input-label"},Object(a.__)("Add to Lists","wp-marketing-automations")),Object(n.createElement)(o.a,{autocompleter:c.a,multiple:!1,allowFreeTextSearch:!0,selected:e,onChange:function(t){r(t)},onRemoveTag:function(t){var n=e.filter((function(e){return e.key!=t}));r(n)},placeholder:Object(a.__)("Search by list name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},915:function(t,e,r){"use strict";var n=r(0),o=(r(942),r(5)),a=r(884),c=r(890),i=r(151),l=r(2),u=r(4);e.a=function(t){var e=t.isOpen,r=void 0!==e&&e,s=t.query,f=Object(a.a)();return r&&!0===f?Object(n.createElement)(u.Spinner,null):r&&!!f&&Object(n.createElement)(i.a,{siteLocale:"en-US",currency:Object(o.xb)()?bwfcrm_contacts_data.currency:{},config:{title:Object(l.__)("Select Rules","wp-marketing-automations"),filters:f,footerComponent:function(t){return Object(n.createElement)(c.a,{filter:t.data,config:t.config})},enableGrouping:!0},path:"/contacts",query:s})}},916:function(t,e,r){},917:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r(62),o={"am-AM":/^(\+?374|0)((10|[9|7][0-9])\d{6}$|[2-4]\d{7}$)/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)([569]\d{7}|41\d{6})$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?(9[1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SD":/^((\+?249)|0)?(9[012369]|1[012])\d{7}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,"el-GR":/^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,"el-CY":/^(\+?357?)?(9(9|6)\d{6})$/,"en-AI":/^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-AG":/^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,"en-BS":/^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-JM":/^(\+?876)?\d{7}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"fr-CF":/^(\+?236| ?)(70|75|77|72|21|22)\d{6}$/,"en-SS":/^(\+?211|0)(9[1257])\d{7}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-KN":/^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,"en-LS":/^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PG":/^(\+?675|0)?(7\d|8[18])\d{6}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8|3|2]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-NI":/^(\+?505)\d{7,8}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-BJ":/^(\+229)\d{8}$/,"fr-CD":/^(\+?243|0)?(8|9)\d{8}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"fr-WF":/^(\+681)?\d{6}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"ir-IR":/^(\+98|0)?9\d{9}$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(79\d{7}|5\d{8})$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"ky-KG":/^(\+?7\s?\+?7|0)\s?\d{2}\s?\d{3}\s?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"mg-MG":/^((\+?261|0)(2|3)\d)?\d{7}$/,"mn-MN":/^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,"my-MM":/^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,"ms-MY":/^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nl-AW":/^(\+)?297(56|59|64|73|74|99)\d{5}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?([5-8]\d|45) ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+244)\d{9}$/,"ro-MD":/^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,"ro-RO":/^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"so-SO":/^(\+?252|0)((6[0-9])\d{7}|(7[1-9])\d{7})$/,"sq-AL":/^(\+355|0)6[789]\d{6}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/,"ar-YE":/^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,"ar-EH":/^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,"fa-AF":/^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/};function a(t,e,r){if(Object(n.a)(t),r&&r.strictMode&&!t.startsWith("+"))return!1;if(Array.isArray(e))return e.some((function(e){if(o.hasOwnProperty(e)&&o[e].test(t))return!0;return!1}));if(e in o)return o[e].test(t);if(!e||"any"===e){for(var a in o){if(o.hasOwnProperty(a))if(o[a].test(t))return!0}return!1}throw new Error("Invalid locale '".concat(e,"'"))}o["en-CA"]=o["en-US"],o["fr-CA"]=o["en-CA"],o["fr-BE"]=o["nl-BE"],o["zh-HK"]=o["en-HK"],o["zh-MO"]=o["en-MO"],o["ga-IE"]=o["en-IE"],o["fr-CH"]=o["de-CH"],o["it-CH"]=o["fr-CH"];Object.keys(o)},941:function(t,e,r){"use strict";r.d(e,"a",(function(){return v}));var n=r(0),o=r(4),a=r(2),c=r(3),i=r(876),l=r(885),u=r(17),s=r(76),f=r(8);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===m(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var v=function(t){var e=t.headersData,r=t.onRequestImport,m=t.submitButtonText,p=t.secondaryButtonText,y=t.onSecondaryButtonClick,v=t.savedData,g=t.buttonAlignClass,w=t.backButtonText,O=t.backButtonClick,j=t.extra,E=t.isSubmitButtonBusy,_=t.sourceHeaderText,k=void 0===_?Object(a.__)("Columns To Import","wp-marketing-automations"):_,x=t.contactHeaderText,S=void 0===x?Object(a.__)("Map Into Field","wp-marketing-automations"):x,N=t.updateExistingText,L=void 0===N?Object(a.__)("Update Existing Contacts","wp-marketing-automations"):N,P=t.secondaryClass,C=void 0===P?"":P,I=e.headers,A=e.fields,T=d(Object(n.useState)(v&&v.mapped_fields?function(t,e){if(!t)return{};var r={},n=function(n){e.find((function(t){return t.index.toString()===n}))&&(r[n]=t[n])};for(var o in t)n(o);return r}(v.mapped_fields,I):{}),2),F=T[0],G=T[1],$=d(Object(n.useState)(0),2),D=$[0],M=$[1],B=v&&v.tags?v.tags.map((function(t){return{key:t.id,label:t.value}})):[],z=v&&v.lists?v.lists.map((function(t){return{key:t.id,label:t.value}})):[],U=d(Object(n.useState)(B),2),q=U[0],R=U[1],Y=d(Object(n.useState)(z),2),V=Y[0],H=Y[1],W=d(Object(n.useState)(!(!v||!("update_existing"in v))&&v.update_existing),2),K=W[0],Q=W[1],Z=d(Object(n.useState)(!v||!("update_blank"in v)||v.update_blank),2),J=Z[0],X=Z[1],tt=d(Object(n.useState)(!v||!("marketing_status"in v)||v.marketing_status),2),et=tt[0],rt=(tt[1],d(Object(n.useState)(!(!v||!("trigger_events"in v))&&v.trigger_events),2)),nt=rt[0],ot=rt[1],at=d(Object(n.useState)(null),2),ct=at[0],it=at[1],lt=(j||{}).disableMarketingStatusCheck,ut=void 0!==lt&&lt,st=function(){return it(null),0===Object(c.size)(F)?(setTimeout((function(){return it(Object(a.__)("Select the contact fields.","wp-marketing-automations"))}),500),!1):!!Object.values(F).includes("email")||(setTimeout((function(){return it(Object(a.__)("Map contact email with a form field.","wp-marketing-automations"))}),500),!1)},ft=function(){if(st()){var t={};I.map((function(e){e.index in F&&(t[e.index]=F[e.index])}));var e={map:t,tags:q.map((function(t){return{id:t.key,value:t.label}})),lists:V.map((function(t){return{id:t.key,value:t.label}})),update_existing:K,trigger_events:nt,imported_contact_status:D,dont_update_blank:J};!ut&&(e.marketing_status=et),r(e)}},mt=function(){if(st()){var t={};I.map((function(e){e.index in F&&(t[e.index]=F[e.index])}));var e={map:t,tags:q.map((function(t){return{id:t.key,value:t.label}})),lists:V.map((function(t){return{id:t.key,value:t.label}})),update_existing:K,trigger_events:nt};!ut&&(e.marketing_status=et),y(e)}};if(!Object(c.isArray)(A)||!A.length>0)return Object(n.createElement)(o.Notice,{status:"error"},Object(a.__)("No contact fields found","wp-marketing-automations"));if(!Object(c.isArray)(I)||!I.length>0)return Object(n.createElement)(o.Notice,{status:"error"},Object(a.__)("No mapping fields found"));var pt={0:Object(a.__)("Unverified","wp-marketing-automations"),1:Object(a.__)("Subscribed","wp-marketing-automations"),2:Object(a.__)("Bounced","wp-marketing-automations"),3:Object(a.__)("Unsubscribed","wp-marketing-automations")};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-import-mapper-fields bwf-card-wrap bwf-form-fields bwf-crm-importer-csv-wrap"},Object(n.createElement)("div",{className:"bwf-card-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(a.__)("Mapping","wp-marketing-automations"))),ct&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(s.a,null),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(o.Notice,{status:"error",onRemove:function(){return it(null)}},ct)),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-c-import-field",key:"mapper-sel-wrap"},Object(n.createElement)("strong",null,k),Object(n.createElement)("span",null),Object(n.createElement)("strong",null,S)),I.map((function(t,e){return Object(n.createElement)("div",{key:e,className:"bwf-c-import-field"},Object(n.createElement)(o.TextControl,{disabled:!0,value:t.header}),Object(n.createElement)("span",{className:"bwf-display-flex"},Object(n.createElement)(f.a,{icon:"mapper"})),Object(n.createElement)("select",{value:t.index in F?F[t.index]:"",onChange:function(e){return function(t,e){var r=e.target.value,n="index"in t?t.index:"";""===r&&n in F?G(Object(c.omit)(F,n)):""!==r&&""!==n&&G(b(b({},F),{},h({},n,r)))}(t,e)},key:"bwf-select-field"},Object(n.createElement)("option",{value:"",key:"default-key"+e},Object(a.__)("Do Not Import This Field","wp-marketing-automations")),A.map((function(t,r){return"fields"in t&&t.fields.length>0&&Object(n.createElement)("optgroup",{key:t.id+"-"+r+"-"+e,label:t.name},t.fields.map((function(t){return Object(n.createElement)("option",{key:t.id,value:t.id},t.name)})))}))))}))),Object(n.createElement)("div",{className:"bwf-crm-import-section",style:{border:0}},Object(n.createElement)("div",{className:"bwf-h4"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-import-field",key:"select-tag-list"},Object(n.createElement)(i.a,{onTagsChange:R,selected:q}),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(l.a,{onListsChange:H,selected:V})),Object(n.createElement)("div",{className:"bwf_clear_10"}),!ut&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-p"},Object(a.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-csv-status-select",onChange:function(t){M(t.target.value)},key:"bwf-select-status",value:D},Object.keys(pt).map((function(t){return Object(n.createElement)("option",{key:t,value:t},pt[t])})))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",null,Object(n.createElement)(o.ToggleControl,{label:L,checked:K,className:"bwf-tooglecontrol-advance",onChange:Q})),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",null,Object(n.createElement)(o.ToggleControl,{label:Object(a.__)("Don't Update Blank Values","wp-marketing-automations"),checked:J,className:"bwf-tooglecontrol-advance",onChange:X})),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",null,Object(n.createElement)(o.ToggleControl,{label:Object(a.__)("Trigger Automations (For Tag & List Related Events)","wp-marketing-automations"),checked:nt,className:"bwf-tooglecontrol-advance",onChange:ot}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-pt-0"},g?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(u.a,null,!!w&&Object(n.createElement)(u.b,null,Object(n.createElement)(o.Button,{isSecondary:!0,onClick:O,className:C},w)),Object(n.createElement)(u.b,{className:g},Object(n.createElement)(o.Button,{onClick:ft,isBusy:!!E,disabled:!!E,isPrimary:!0},Object(n.createElement)("span",null,m||Object(a.__)("Import","wp-marketing-automations"))),p&&Object(n.createElement)(o.Button,{onClick:mt,className:"bwf-ml-10",isSecondary:!0},p)))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(o.Button,{onClick:ft,isPrimary:!0,isBusy:!!E,disabled:!!E,className:"bwf-display-flex"},Object(n.createElement)("span",null,m||Object(a.__)("Import","wp-marketing-automations"))),p&&Object(n.createElement)(o.Button,{onClick:mt,className:"bwf-ml-10",isSecondary:!0},p)))))}},942:function(t,e,r){}}]);