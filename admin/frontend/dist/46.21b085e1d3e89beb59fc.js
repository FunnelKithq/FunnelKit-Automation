(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{1245:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(865),o=n(5),i=n(141),c=n(291),u=n(29),l=n(15);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==s(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t){var e=t.query;return Object(a.createElement)("div",{className:"bwf-crm-emails-report-filter"},Object(a.createElement)(c.a,{siteLocale:"en-US",path:"/",query:e,onDateSelect:function(t){var n=p(p({},e),t);delete n.compare,Object(l.k)(n,"/",{})},showDatePicker:!0,isoDateFormat:u.g,hideCompare:!0,dateQuery:function(t){t.compare="previous_year";var e=Object(u.e)(t),n=e.period,a=e.compare,r=e.before,o=e.after,i=Object(u.c)(t);return{period:n,compare:a,before:r,after:o,primaryDate:i.primary,secondaryDate:i.secondary}}(e),currency:Object(o.X)()}))},h=n(76),v=n(2),y=n(280),d=n(278),g=n(277),O=n(868),j=n(77),_=n(8),w=n(3),k=function(t){var e=t.query,n=t.type,r=t.automationId,i=Object(j.a)(Object(o.X)()).formatAmount,c=Object(O.a)(),u=c.getAnalyticsTileData,s=c.getAnalyticsLoading,m=e.chart?e.chart:function(){switch(n){case"contact":return"active_contacts";default:return"email_sents"}}(),p=s(),f=u(),b=function(t){return Object(w.isEmpty)(f)||!f.hasOwnProperty(t)||Object(w.isNull)(f[t])?0:f[t]};return Object(a.createElement)("div",{className:"bwf-crm-emails-report-tiles"},p?function(){switch(n){case"email":return Object(a.createElement)(g.a,{numberOfItems:Object(o.xb)()?5:3,hideDelta:!0});case"sms":return Object(a.createElement)(g.a,{numberOfItems:Object(o.xb)()?4:2,hideDelta:!0});case"contact":return Object(a.createElement)(g.a,{numberOfItems:Object(o.xb)()?6:3,hideDelta:!0})}}():function(){switch(n){case"email":return Object(a.createElement)(y.a,null,(function(){var t=[];return t=[Object(a.createElement)(d.a,{key:1,value:parseInt(b("email_sents")),label:Object(v.__)("Sent","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/email&chart=email_sents"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"email_sents"},"/",e)},selected:"email_sents"===m,tileIcon:Object(a.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(a.createElement)(_.a,{icon:"sent",size:30}))}),Object(a.createElement)(d.a,{key:2,value:parseFloat(b("open_rate"))+" %",label:Object(v.__)("Open Rate","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/email&chart=open_rate"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"open_rate"},"/",e)},selected:"open_rate"===m,tileIcon:Object(a.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(a.createElement)(_.a,{icon:"open-in-popup",size:30}))}),Object(a.createElement)(d.a,{key:3,value:parseFloat(b("click_rate"))+" %",label:Object(v.__)("Click Rate","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/email&chart=click_rate"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"click_rate"},"/",e)},selected:"click_rate"===m,tileIcon:Object(a.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(a.createElement)(_.a,{icon:"cursor",size:30}))})],Object(o.xb)()&&t.push(Object(a.createElement)(d.a,{key:4,value:parseInt(b("total_orders")),label:Object(v.__)("Orders","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/email&chart=total_orders"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"total_orders"},"/",e)},selected:"total_orders"===m,tileIcon:Object(a.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(a.createElement)(_.a,{icon:"order",size:30}))}),Object(a.createElement)(d.a,{key:5,value:i(b("total_revenue")),label:Object(v.__)("Revenue","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/email&chart=total_revenue"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"total_revenue"},"/",e)},selected:"total_revenue"===m,tileIcon:Object(a.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(a.createElement)(_.a,{icon:"revenue",size:30}))})),t}));case"sms":return Object(a.createElement)(y.a,null,(function(){var t=[];return t=[Object(a.createElement)(d.a,{key:1,value:parseInt(b("email_sents")),label:Object(v.__)("Sent","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/sms&chart=email_sents"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"email_sents"},"/",e)},selected:"email_sents"==m,tileIcon:Object(a.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(a.createElement)(_.a,{icon:"sent",size:30}))}),Object(a.createElement)(d.a,{key:2,value:parseInt(b("email_click")),label:Object(v.__)("Clicks","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/sms&chart=email_click"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"email_click"},"/",e)},selected:"email_click"==m,tileIcon:Object(a.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(a.createElement)(_.a,{icon:"cursor",size:30}))})],Object(o.xb)()&&t.push(Object(a.createElement)(d.a,{key:3,value:parseInt(b("total_orders")),label:Object(v.__)("Orders","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/sms&chart=total_orders"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"total_orders"},"/",e)},selected:"total_orders"==m,tileIcon:Object(a.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(a.createElement)(_.a,{icon:"order",size:30}))}),Object(a.createElement)(d.a,{key:4,value:i(b("total_revenue")),label:Object(v.__)("Revenue","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/sms&chart=total_revenue"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"total_revenue"},"/",e)},selected:"total_revenue"==m,tileIcon:Object(a.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(a.createElement)(_.a,{icon:"revenue",size:30}))})),t}));case"contact":return Object(a.createElement)(y.a,null,(function(){var t=[];return t=[Object(a.createElement)(d.a,{key:1,value:parseInt(b("active_contacts")),label:Object(v.__)("Active Contacts","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=active_contacts"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"active_contacts"},"/",e)},selected:"active_contacts"==m,tileIcon:Object(a.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(a.createElement)(_.a,{icon:"contact-tile",size:30,color:"#0073aa"}))}),Object(a.createElement)(d.a,{key:2,value:parseInt(b("complete_contacts")),label:Object(v.__)("Completed Contacts","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=complete_contacts"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"complete_contacts"},"/",e)},selected:"complete_contacts"==m,tileIcon:Object(a.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(a.createElement)(_.a,{icon:"total-customer",size:30,color:"#0073aa"}))})],Object(o.xb)()&&t.push(Object(a.createElement)(d.a,{key:3,value:b("conversions"),label:Object(v.__)("Orders","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=conversions"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"conversions"},"/",e)},selected:"conversions"==m,tileIcon:Object(a.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(a.createElement)(_.a,{icon:"order",size:30}))}),Object(a.createElement)(d.a,{key:4,value:i(b("revenue")),label:Object(v.__)("Revenue","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=revenue"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"revenue"},"/",e)},selected:"revenue"==m,tileIcon:Object(a.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(a.createElement)(_.a,{icon:"revenue",size:30}))}),Object(a.createElement)(d.a,{key:5,value:i(parseFloat(b("aov")).toFixed(2)),label:Object(v.__)("AOV","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=aov"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"aov"},"/",e)},selected:"aov"==m,tileIcon:Object(a.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(a.createElement)(_.a,{icon:"recovery-rate",size:30}))})),t.push(Object(a.createElement)(d.a,{key:6,value:parseInt(b("unsubscribers")),label:Object(v.__)("Unsubscribes","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=unsubscribers"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"unsubscribers"},"/",e)},selected:"unsubscribers"==m,tileIcon:Object(a.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(a.createElement)(_.a,{icon:"unsubscribe",size:30,color:"#0073aa"}))})),t}))}}())},E=n(881),S=n(145),L=n(279),I=function(t){var e,n=t.query,r=t.type,o=n.chart?n.chart:function(){switch(r){case"contact":return"active_contacts";default:return"email_sents"}}(),i=Object(O.a)(),c=i.getAnalyticsData,l=i.getAnalyticsLoading,s=i.getAnalyticsTileData,m=l(),p=c(),f=s(),b=n.chartType?n.chartType:"line",h=Object(u.f)(n),y=Object(u.b)(((e=n).period&&""!==e.period||(e.period="month"),e.compare&&""!==e.compare||(e.compare="previous_year"),n));y.includes(h)||(h=y[y.length-1]);var d={email_sents:Object(v.__)("Sent","wp-marketing-automations"),email_open:Object(v.__)("Open","wp-marketing-automations"),email_click:Object(v.__)("Clicks","wp-marketing-automations"),total_orders:Object(v.__)("Orders","wp-marketing-automations"),total_revenue:Object(v.__)("Revenue","wp-marketing-automations")},g={email_sents:Object(v.__)("Sent","wp-marketing-automations"),email_click:Object(v.__)("Clicks","wp-marketing-automations"),total_orders:Object(v.__)("Orders","wp-marketing-automations"),total_revenue:Object(v.__)("Revenue","wp-marketing-automations")},j={active_contacts:Object(v.__)("Active Contacts","wp-marketing-automations"),complete_contacts:Object(v.__)("Complete Contacts","wp-marketing-automations"),unsubscribers:Object(v.__)("Unsubscribe","wp-marketing-automations"),revenue:Object(v.__)("Revenue","wp-marketing-automations"),conversions:Object(v.__)("Orders","wp-marketing-automations"),aov:Object(v.__)("AOV","wp-marketing-automations")},_=function(){switch(r){case"email":return d;case"sms":return g;case"contact":return j}}();return Object(a.createElement)(L.a,{isRequesting:m,data:function(t){switch(r){case"email":return function(t){var e=[];if(!Object(w.isEmpty)(p)){p.map((function(n){switch(t){case"email_sents":e.push({date:n.start_date,email_sents:{label:Object(v.__)("Email Sent","wp-marketing-automations"),value:parseInt(n.subtotals.email_sents)}});break;case"open_rate":e.push({date:n.start_date,email_open:{label:Object(v.__)("Opens","wp-marketing-automations"),value:parseInt(n.subtotals.email_open)}});break;case"click_rate":e.push({date:n.start_date,email_click:{label:Object(v.__)("Clicks","wp-marketing-automations"),value:parseInt(n.subtotals.email_click)}});break;case"total_orders":e.push({date:n.start_date,total_orders:{label:Object(v.__)("Total Orders","wp-marketing-automations"),value:parseInt(n.subtotals.total_orders)}});break;case"total_revenue":e.push({date:n.start_date,total_revenue:{label:Object(v.__)("Total Revenue","wp-marketing-automations"),value:parseInt(n.subtotals.total_revenue)}})}}))}return e}(t);case"sms":return function(t){var e=[];if(!Object(w.isEmpty)(p)){p.map((function(n){switch(t){case"email_sents":e.push({date:n.start_date,email_sents:{label:Object(v.__)("SMS Sent","wp-marketing-automations"),value:parseInt(n.subtotals.email_sents)}});break;case"email_click":e.push({date:n.start_date,email_click:{label:Object(v.__)("SMS Clicks","wp-marketing-automations"),value:parseInt(n.subtotals.email_click)}});break;case"total_orders":e.push({date:n.start_date,total_orders:{label:Object(v.__)("Total Orders","wp-marketing-automations"),value:parseInt(n.subtotals.total_orders)}});break;case"total_revenue":e.push({date:n.start_date,total_revenue:{label:Object(v.__)("Total Revenue","wp-marketing-automations"),value:parseInt(n.subtotals.total_revenue)}})}}))}return e}(t);case"contact":return function(t){var e=[];if(!Object(w.isEmpty)(p)){p.map((function(n){switch(t){case"active_contacts":e.push({date:n.start_date,active_contacts:{label:Object(v.__)("Active Contacts","wp-marketing-automations"),value:parseInt(n.subtotals.active_contacts)}});break;case"complete_contacts":e.push({date:n.start_date,complete_contacts:{label:Object(v.__)("Complete Contacts","wp-marketing-automations"),value:parseInt(n.subtotals.complete_contacts)}});break;case"unsubscribers":e.push({date:n.start_date,unsubscribers:{label:Object(v.__)("Unsubscribes","wp-marketing-automations"),value:parseInt(n.subtotals.unsubscribers)}});break;case"revenue":e.push({date:n.start_date,revenue:{label:Object(v.__)("Revenue","wp-marketing-automations"),value:parseInt(n.subtotals.revenue)}});break;case"conversions":e.push({date:n.start_date,conversions:{label:Object(v.__)("Orders","wp-marketing-automations"),value:parseInt(n.subtotals.conversions)}});break;case"aov":e.push({date:n.start_date,conversions:{label:Object(v.__)("AOV","wp-marketing-automations"),value:parseInt(n.subtotals.aov)}})}}))}return e}(t)}}(o),title:_[o],interval:h,layout:"item-comparison",chartType:b,legendTotals:"aov"==o?{conversions:f.hasOwnProperty("aov")?f.aov:0}:null,interactiveLegend:!0})},x=n(4),P=n(268),C=n(12),A=n.n(C),D=n(16);function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(){M=function(){return e};var t,e={},n=Object.prototype,a=n.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,a){var o=e&&e.prototype instanceof v?e:v,i=Object.create(o.prototype),c=new x(a||[]);return r(i,"_invoke",{value:E(t,n,c)}),i}function m(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",f="executing",b="completed",h={};function v(){}function y(){}function d(){}var g={};l(g,i,(function(){return this}));var O=Object.getPrototypeOf,j=O&&O(O(P([])));j&&j!==n&&a.call(j,i)&&(g=j);var _=d.prototype=v.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(r,o,i,c){var u=m(t[r],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==N(s)&&a.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(u.arg)}var o;r(this,"_invoke",{value:function(t,a){function r(){return new e((function(e,r){n(t,a,e,r)}))}return o=o?o.then(r,r):r()}})}function E(e,n,a){var r=p;return function(o,i){if(r===f)throw new Error("Generator is already running");if(r===b){if("throw"===o)throw i;return{value:t,done:!0}}for(a.method=o,a.arg=i;;){var c=a.delegate;if(c){var u=S(c,a);if(u){if(u===h)continue;return u}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===p)throw r=b,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=f;var l=m(e,n,a);if("normal"===l.type){if(r=a.done?b:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r=b,a.method="throw",a.arg=l.arg)}}}function S(e,n){var a=n.method,r=e.iterator[a];if(r===t)return n.delegate=null,"throw"===a&&e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),h;var o=m(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(a.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(N(e)+" is not iterable")}return y.prototype=d,r(_,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:y,configurable:!0}),y.displayName=l(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},w(k.prototype),l(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new k(s(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},w(_),l(_,u,"Generator"),l(_,i,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var a in e)n.push(a);return n.reverse(),function t(){for(;n.length;){var a=n.pop();if(a in e)return t.value=a,t.done=!1,t}return t.done=!0,t}},e.values=P,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(a,r){return c.type="throw",c.arg=e,n.next=a,r&&(n.method="next",n.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),l=a.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var r=a.arg;I(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:P(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),h}},e}function F(t,e,n,a,r,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(a,r)}function T(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,o,i,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=o.call(n)).done)&&(c.push(a.value),c.length!==e);u=!0);}catch(t){l=!0,r=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw r}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var R=function(t){var e=t.query,n=t.automationId,r=e.period,i=e.interval,c=void 0===i?"day":i,l=e.after,s=e.before,m=Object(j.a)(Object(o.X)()).formatAmount,p=T(Object(a.useState)([]),2),f=p[0],b=p[1],h=T(Object(a.useState)(!0),2),y=h[0],d=h[1],g=T(Object(a.useState)(25),2),_=g[0],k=g[1],E=T(Object(a.useState)(0),2),S=E[0],L=E[1],I=T(Object(a.useState)(0),2),x=I[0],C=I[1],N=parseInt(S)/parseInt(_)+1,Y=Object(O.a)(),R=Y.getAnalyticsTileData,G=Y.getAnalyticsLoading,q=R(),z=G();Object(a.useEffect)((function(){if(!Object(o.mb)()&&z){var t=q.email_click,e=void 0===t?0:t,n=q.email_open,a=void 0===n?0:n,r=q.email_sents,i=void 0===r?0:r,c=q.total_orders,u=void 0===c?0:c,l=q.revenue,s=void 0===l?0:l;b([{click_count:e,click_rate:(e/i*100).toFixed(2),conversions:u,oid:"5",open_count:a,open_rate:(a/i*100).toFixed(2),revenue:s,sent:i,subject:"Dummy Subject",template:"",tid:"52",title:"Dummy Mail",type:"1"}]),d(!1)}}),[z]);var H=function(){var t,e=(t=M().mark((function t(e,a){return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d(!0),Object(o.mb)()){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,A()({method:"GET",path:Object(o.m)("/analytics/emails/tabular/")+"?"+Object(D.stringify)({after:e,before:a,oid:n,type:1,interval:"day",limit:_,offset:S,mode:1})}).then((function(t){t.hasOwnProperty("result")&&b(t.result),t.hasOwnProperty("total_count")&&C(t.total_count),d(!1)}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),d(!1);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){F(o,a,r,i,c,"next",t)}function c(t){F(o,a,r,i,c,"throw",t)}i(void 0)}))});return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var t,n=((t=e).compare="previous_year",Object(u.c)(t).primary),a="",r="";n&&(Object(w.isEmpty)(n.after)||(a=n.after.format("YYYY-MM-DD HH:mm:ss")),Object(w.isEmpty)(n.before)||(r=n.before.format("YYYY-MM-DD 23:59:59")),Object(w.isEmpty)(a)||Object(w.isEmpty)(r)||H(a,r))}),[r,c,l,s]);var V,B=[{key:"subject",label:Object(v.__)("Subject","wp-marketing-automations"),isLeftAligned:!0},{key:"source",label:Object(v.__)("Source","wp-marketing-automations"),isLeftAligned:!1},{key:"sent",label:Object(v.__)("Sent","wp-marketing-automations"),isLeftAligned:!0,isNumeric:!0},{key:"open",label:Object(v.__)("Open Rate","wp-marketing-automations"),isLeftAligned:!0},{key:"click",label:Object(v.__)("Click Rate","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0},Object(o.xb)()?{key:"orders",label:Object(v.__)("Orders","wp-marketing-automations"),isLeftAligned:!0}:{},Object(o.xb)()?{key:"revenue",label:Object(v.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0}:{}],U=function(t){t!==_&&k(t)};return Object(a.createElement)(P.a,{title:Object(v.__)("Email","wp-marketing-automations"),rows:(V=[],Object(w.isEmpty)(f)||f.map((function(t){V.push([{display:t.subject?t.subject:"-",value:t.subject},{display:t.title?t.title:"-",value:t.title},{display:parseInt(t.sent)?parseInt(t.sent):"-",value:t.sent},{display:parseInt(t.open_rate)?parseFloat(t.open_rate).toFixed(1)+"%":"-",value:t.open_count},{display:parseInt(t.click_rate)?parseFloat(t.click_rate).toFixed(1)+"%":"-",value:t.click_count},Object(o.xb)()?{display:parseInt(t.conversions)?parseInt(t.conversions):"-",value:t.conversions}:{},Object(o.xb)()?{display:parseFloat(t.revenue)>0?m(t.revenue):"-",value:t.revenue}:{}])})),V),headers:B,query:{paged:N},rowsPerPage:_,totalRows:x,isLoading:y,onPageChange:function(t,e){L((t-1)*_)},onQueryChange:function(t){return"per_page"!==t?function(){}:U},showMenu:!1,rowHeader:!0,emptyMessage:Object(v.__)("No emails found","wp-marketing-automations")})};function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(){q=function(){return e};var t,e={},n=Object.prototype,a=n.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,a){var o=e&&e.prototype instanceof v?e:v,i=Object.create(o.prototype),c=new x(a||[]);return r(i,"_invoke",{value:E(t,n,c)}),i}function m(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",f="executing",b="completed",h={};function v(){}function y(){}function d(){}var g={};l(g,i,(function(){return this}));var O=Object.getPrototypeOf,j=O&&O(O(P([])));j&&j!==n&&a.call(j,i)&&(g=j);var _=d.prototype=v.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(r,o,i,c){var u=m(t[r],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==G(s)&&a.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(u.arg)}var o;r(this,"_invoke",{value:function(t,a){function r(){return new e((function(e,r){n(t,a,e,r)}))}return o=o?o.then(r,r):r()}})}function E(e,n,a){var r=p;return function(o,i){if(r===f)throw new Error("Generator is already running");if(r===b){if("throw"===o)throw i;return{value:t,done:!0}}for(a.method=o,a.arg=i;;){var c=a.delegate;if(c){var u=S(c,a);if(u){if(u===h)continue;return u}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===p)throw r=b,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=f;var l=m(e,n,a);if("normal"===l.type){if(r=a.done?b:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r=b,a.method="throw",a.arg=l.arg)}}}function S(e,n){var a=n.method,r=e.iterator[a];if(r===t)return n.delegate=null,"throw"===a&&e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),h;var o=m(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(a.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(G(e)+" is not iterable")}return y.prototype=d,r(_,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:y,configurable:!0}),y.displayName=l(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},w(k.prototype),l(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new k(s(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},w(_),l(_,u,"Generator"),l(_,i,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var a in e)n.push(a);return n.reverse(),function t(){for(;n.length;){var a=n.pop();if(a in e)return t.value=a,t.done=!1,t}return t.done=!0,t}},e.values=P,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(a,r){return c.type="throw",c.arg=e,n.next=a,r&&(n.method="next",n.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),l=a.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var r=a.arg;I(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:P(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),h}},e}function z(t,e,n,a,r,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(a,r)}function H(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,o,i,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=o.call(n)).done)&&(c.push(a.value),c.length!==e);u=!0);}catch(t){l=!0,r=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw r}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var B=function(t){var e=t.query,n=t.automationId,r=e.period,i=e.interval,c=void 0===i?"day":i,l=e.after,s=e.before,m=Object(j.a)(Object(o.X)()).formatAmount,p=H(Object(a.useState)([]),2),f=p[0],b=p[1],h=H(Object(a.useState)(!0),2),y=h[0],d=h[1],g=H(Object(a.useState)(25),2),_=g[0],k=g[1],E=H(Object(a.useState)(0),2),S=E[0],L=E[1],I=H(Object(a.useState)(0),2),x=I[0],C=I[1],N=parseInt(S)/parseInt(_)+1,M=Object(O.a)(),F=M.getAnalyticsTileData,T=M.getAnalyticsLoading,Y=F(),R=T();Object(a.useEffect)((function(){if(!Object(o.mb)()){var t=Y.email_click,e=void 0===t?0:t,n=Y.email_open,a=void 0===n?0:n,r=Y.email_sents,i=void 0===r?0:r,c=Y.total_orders,u=void 0===c?0:c,l=Y.revenue,s=void 0===l?0:l;b([{click_count:e,click_rate:(e/i*100).toFixed(2),conversions:u,oid:"5",open_count:a,open_rate:(a/i*100).toFixed(2),revenue:s,sent:i,subject:"Dummy Message",template:"",tid:"52",title:"Dummy SMS",type:"1"}]),d(!1)}}),[R]);var G=function(){var t,e=(t=q().mark((function t(e,a){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d(!0),Object(o.mb)()){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,A()({method:"GET",path:Object(o.m)("/analytics/emails/tabular/")+"?"+Object(D.stringify)({after:e,before:a,oid:n,type:1,interval:"day",limit:_,offset:S,mode:2})}).then((function(t){t.hasOwnProperty("result")&&b(t.result),t.hasOwnProperty("total_count")&&C(t.total_count),d(!1)}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),d(!1);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){z(o,a,r,i,c,"next",t)}function c(t){z(o,a,r,i,c,"throw",t)}i(void 0)}))});return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var t,n=((t=e).compare="previous_year",Object(u.c)(t).primary),a="",r="";n&&(Object(w.isEmpty)(n.after)||(a=n.after.format("YYYY-MM-DD HH:mm:ss")),Object(w.isEmpty)(n.before)||(r=n.before.format("YYYY-MM-DD 23:59:59")),Object(w.isEmpty)(a)||Object(w.isEmpty)(r)||G(a,r))}),[r,c,l,s]);var V,B=[{key:"message",label:Object(v.__)("Message","wp-marketing-automations"),isLeftAligned:!0},{key:"source",label:Object(v.__)("Source","wp-marketing-automations"),isLeftAligned:!1},{key:"sent",label:Object(v.__)("Sent","wp-marketing-automations"),isLeftAligned:!0,isNumeric:!0},{key:"click",label:Object(v.__)("Click","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0},Object(o.xb)()?{key:"orders",label:Object(v.__)("Orders","wp-marketing-automations"),isLeftAligned:!0}:{},Object(o.xb)()?{key:"revenue",label:Object(v.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0}:{}],U=function(t){t!==_&&k(t)};return Object(a.createElement)(P.a,{title:Object(v.__)("SMS","wp-marketing-automations"),rows:(V=[],Object(w.isEmpty)(f)||f.map((function(t){var e=parseFloat(t.click_rate)?" ( "+parseFloat(t.click_rate).toFixed(2)+"% ) ":"";V.push([{display:t.template?Object(a.createElement)("div",{className:"bwf-pre-line"},t.template):"-",value:""},{display:t.title?t.title:"-",value:t.title},{display:parseInt(t.sent)?parseInt(t.sent):"-",value:t.sent},{display:parseInt(t.click_count)?t.click_count+e:"-",value:t.click_count},Object(o.xb)()?{display:parseInt(t.conversions)?parseInt(t.conversions):"-",value:t.conversions}:{},Object(o.xb)()?{display:m(t.revenue),value:t.revenue}:{}])})),V),headers:B,query:{paged:N},rowsPerPage:_,totalRows:x,isLoading:y,onPageChange:function(t,e){L((t-1)*_)},onQueryChange:function(t){return"per_page"!==t?function(){}:U},showMenu:!1,rowHeader:!0,emptyMessage:Object(v.__)("No SMS found","wp-marketing-automations")})},U=n(102);function X(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,o,i,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=o.call(n)).done)&&(c.push(a.value),c.length!==e);u=!0);}catch(t){l=!0,r=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw r}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}e.default=function(t){var e=t.match.params,n=e.automationId,c=e.type,s=void 0===c?"contact":c,m=t.isV2,p=void 0===m||m,f=Object(l.i)(),y=f.period,d=f.compare,g=f.interval,j=f.after,_=f.before,L=Object(i.a)(),P=L.setL2NavAlign,C=L.setL2Title,A=Object(E.a)(),D=A.fetchAnalytics,N=A.setAnalyticsValues,M=(0,Object(O.a)().getAnalyticsAutomationData)().title,F=void 0===M?"":M,T=X(Object(a.useState)(!0),2),Y=T[0],G=T[1],q=Object(S.a)(),z=q.getAutomationData,H=q.getAutomationId,V=z().title,Q=void 0===V?"":V,$=H();Object(r.a)("analytics","",!0,!1,null,n,!1,p),Object(a.useEffect)((function(){P("left"),Object(o.g)("Automation #"+n),N("automationId",n)}),[]),Object(a.useEffect)((function(){C(parseInt(n)===parseInt($)&&""!==Q&&""===F?Q:""!==F?F:Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))}),[Q,F,n]);var J=function(t){return t.compare="previous_year",Object(u.c)(t).primary},W=function(t,e){if(N("analytics",[]),N("tiles",[]),Object(o.mb)()){var a=J(t),r="",i="",c="";if(a){switch(Object(w.isEmpty)(a.after)||(r=a.after.format("YYYY-MM-DD HH:mm:ss")),Object(w.isEmpty)(a.before)||(i=a.before.format("YYYY-MM-DD 23:59:59")),s){case"email":c=1;break;case"sms":c=2;break;case"whatsapp":c=3;break;case"contact":c=4;break;default:c=1}Object(w.isEmpty)(r)||Object(w.isEmpty)(i)||D(n,r,i,e,1,c)}}else setTimeout((function(){!function(){for(var t=J(f),e=0,n=0,a=0,r=0,o=0,i=0,c=0,u=0,l=[],s=t.after;s.isBefore(t.before);s.add(1,"days")){var m=Math.floor(11*Math.random()),p=Math.floor(Math.random()*parseInt(m)),b=Math.floor(Math.random()*parseInt(m)),h=Math.floor(Math.random()*parseInt(b)),v=Math.floor(100*Math.random()).toFixed(2),y=Math.floor(10*Math.random()),d=Math.floor(10*Math.random()),g=Math.floor(10*Math.random()),O=parseFloat(v)>0&&parseInt(h)>0?parseFloat(parseFloat(v)/parseInt(h)).toFixed(2):0;l.push({date_end_gmt:s.format("YYYY-MM-DD")+" 23:59:59",date_start_gmt:s.format("YYYY-MM-DD")+" 00:00:00",end_date:s.format("YYYY-MM-DD")+" 23:59:59",interval:s.format("YYYY-MM-DD"),start_date:s.format("YYYY-MM-DD")+" 00:00:00",subtotals:{click_rate:(p/m*100).toFixed(2),email_click:p,email_open:b,email_sents:m,open_rate:(b/m*100).toFixed(2),total_orders:h,total_revenue:parseFloat(v).toFixed(2),active_contacts:y,complete_contacts:d,unsubscribers:g,revenue:parseFloat(v).toFixed(2),conversions:h,aov:parseFloat(O).toFixed(2)}}),e+=b,n+=m,a+=p,r+=h,o=parseFloat(o)+parseFloat(v),i+=y,c+=d,u+=g}N("tiles",{click_rate:(a/n*100).toFixed(2),email_click:a,email_open:e,email_sents:n,open_rate:(e/n*100).toFixed(2),total_orders:r,total_revenue:o,active_contacts:i,complete_contacts:c,unsubscribers:u,revenue:o,conversions:r,aov:(parseFloat(o)/parseInt(r)).toFixed(2)}),N("analytics",l),N("isLoading",!1)}()}),1e3)};Object(a.useEffect)((function(){var t=f.hasOwnProperty("interval")?f.interval:"day";W(f,t)}),[y,d,g,j,_,s]);return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>#bwfcrm-page{ overflow: auto !important; }</style>"}}),Object(a.createElement)(h.a,null),Object(a.createElement)(x.ButtonGroup,{className:"bwf-btn-group-tabs"},Object(a.createElement)(x.Button,{isPrimary:s&&"contact"===s,isSecondary:s&&"contact"!==s,onClick:function(){return Object(l.k)({page:"autonami",path:"/automation/".concat(n,"/analytics/contact")},"/",{})}},Object(v.__)("Contacts","wp-marketing-automations")),Object(a.createElement)(x.Button,{isPrimary:s&&"email"===s,isSecondary:s&&"email"!==s,onClick:function(){return Object(l.k)({page:"autonami",path:"/automation/".concat(n,"/analytics/email")},"/",{})}},Object(v.__)("Emails","wp-marketing-automations")),!Object(w.isEmpty)(Object(o.k)())&&Object(a.createElement)(x.Button,{isPrimary:s&&"sms"===s,isSecondary:s&&"sms"!==s,onClick:function(){return Object(l.k)({page:"autonami",path:"/automation/".concat(n,"/analytics/sms")},"/",{})}},Object(v.__)("SMS","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf_clear_24"}),Object(a.createElement)("div",{className:"bwf-crm-analytics-wrap bwf-crm-emails-report-wrap"},Object(a.createElement)(b,{query:f}),Object(a.createElement)("div",{className:"bwf_clear_40"}),Object(a.createElement)(k,{query:f,type:s,automationId:n}),Object(a.createElement)("div",{className:"bwf_clear_20"}),Object(a.createElement)(I,{query:f,type:s}),function(){switch(s){case"email":return Object(a.createElement)(R,{query:f,automationId:n});case"sms":return Object(a.createElement)(B,{query:f,automationId:n});default:return Object(a.createElement)(a.Fragment,null)}}()),!Object(o.mb)()&&Object(a.createElement)(U.a,{isOpen:Y,onRequestClose:function(){return G(!1)},closeOnClickOut:!1,modalContent:{demoLabel:Object(v.__)("Try Demo","wp-marketing-automations")}}))}},865:function(t,e,n){"use strict";var a=n(0),r=n(141),o=n(2),i=n(5),c=n(58),u=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={workflow:{name:Object(o.__)("Workflow","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t):"admin.php?page=autonami-automations&edit=".concat(t)}};return e&&(n.analytics={name:Object(o.__)("Analytics","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/analytics"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/analytics"),isProFeature:!0,showOnClick:!0},n.contacts={name:Object(o.__)("Contacts","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(t,"/contacts"),isProFeature:!0,showOnClick:!0}),n.engagement={name:Object(o.__)("Engagements","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/engagements"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/engagements"),isProFeature:!0,showOnClick:!0},Object(i.xb)()&&(n.orders={name:Object(o.__)("Orders","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/orders"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/orders"),isProFeature:!0,showOnClick:!0}),n};e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,m=arguments.length>6&&void 0!==arguments[6]&&arguments[6],p=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=arguments.length>8&&void 0!==arguments[8]&&arguments[8],b=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},h=b.automation_nav,v=b.automationv2_nav,y=Object(r.a)(),d=y.setActiveMultiple,g=y.resetHeaderMenu,O=y.setL2NavType,j=y.setL2Nav,_=y.setBackLink,w=y.setL2Title,k=y.setL2Content,E=y.setBackLinkLabel,S=y.setL2NavAlign,L=y.setPageHeader;return Object(a.useEffect)((function(){g(),!i&&O("menu"),f||j(s?u(s,p):p?v:h),d({leftNav:p?"automations-v2":"automations-v1",rightNav:t}),n&&_(n),s&&_(n&&!p?"admin.php?page=autonami&path=/automations-v1":"admin.php?page=autonami&path=/automations"),i||p&&s&&E(Object(o.__)("All Automations","wp-marketing-automations-crm")),!p&&s&&E(Object(o.__)("All Automations","wp-marketing-automations")),s&&S("left"),e&&w(e),!n&&l&&k(l),L(p?"Automations":Object(a.createElement)(a.Fragment,null,"Automations",Object(a.createElement)(c.a,{label:"Legacy"}))),m&&j({})}),[t,p,f]),!0}},868:function(t,e,n){"use strict";var a=n(144),r=n(104);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=["getStateProp"];function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a=function(){var t=Object(a.a)("automationList"),e=t.getStateProp,n=s(t,i),o=Object(a.a)(r.a.recipient).getStateProp,c=Object(a.a)(r.a.conversion).getStateProp,l=Object(a.a)(r.a.contacts).getStateProp,m=Object(a.a)(r.a.analytics).getStateProp;return u(u({},n),{},{getAutomations:function(){return e("automations")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getRecipientData:function(){return o("data")},getRecipientLoading:function(){return o("isLoading")},getRecipientOffset:function(){return o("offset")},getRecipientAutomationId:function(){return o("automationId")},getRecipientTotal:function(){return o("total")},getRecipientAutomation:function(){return o("automation")},getRecipientPage:function(){return parseInt(o("offset"))/parseInt(o("limit"))+1},getRecipientLimit:function(){return o("limit")},getConversionData:function(){return c("data")},getConversionLoading:function(){return c("isLoading")},getConversionOffset:function(){return c("offset")},getConversionAutomationId:function(){return c("automationId")},getConversionTotal:function(){return c("total")},getConversionAutomation:function(){return c("automation")},getConversionPage:function(){return parseInt(c("offset"))/parseInt(c("limit"))+1},getConversionLimit:function(){return c("limit")},getCountData:function(){return e("countData")},getContactData:function(){return l("data")},getContactLoading:function(){return l("isLoading")},getContactOffset:function(){return l("offset")},getContactAutomationId:function(){return l("automationId")},getContactTotal:function(){return l("total")},getContactAutomation:function(){return l("automation")},getContactPage:function(){return parseInt(l("offset"))/parseInt(l("limit"))+1},getContactLimit:function(){return l("limit")},getContactCountData:function(){return l("contactCount")},getAnalyticsData:function(){return m("analytics")},getAnalyticsTileData:function(){return m("tiles")},getAnalyticsTableData:function(){return m("tableData")},getAnalyticsLoading:function(){return m("isLoading")},getAnalyticsType:function(){return m("type")},getAnalyticsAutomationData:function(){return m("automation")}})}},881:function(t,e,n){"use strict";var a=n(143),r=n(5),o=n(104),i=n(16);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=["fetch","setStateProp"],l=["s","page","filter","path"];function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==c(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a=function(){var t=Object(a.a)("automationList"),e=t.fetch,n=t.setStateProp,c=f(t,u),s=Object(a.a)(o.a.recipient),p=s.fetch,b=s.setStateProp,h=Object(a.a)(o.a.conversion),v=h.fetch,y=h.setStateProp,d=Object(a.a)(o.a.contacts),g=d.fetch,O=d.setStateProp,j=Object(a.a)(o.a.analytics),_=j.fetch,w=j.setStateProp;return m(m({},c),{},{fetch:function(t,a,o,i){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n("automation",{});var u=a.s,s=(a.page,a.filter,a.path,f(a,l)),m={offset:o,limit:i,status:t,search:u,filters:s,version:c?2:1};e("GET",Object(r.m)("/automations"),m)},setAutomationListValues:function(t,e){n(t,e)},fetchRecipient:function(t,e,n){p("GET",Object(r.m)("/automation/".concat(t,"/recipients?limit=").concat(e,"&offset=").concat(n)))},setRecipientsValues:function(t,e){b(t,e)},fetchConversion:function(t,e,n){y("automation",{}),v("GET",Object(r.m)("/automation/".concat(t,"/conversions?limit=").concat(e,"&offset=").concat(n)))},setConversionValues:function(t,e){y(t,e)},fetchContacts:function(t,e,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";O("automation",{}),g("GET",Object(r.m)("/automation/".concat(t,"/contacts?limit=").concat(e,"&offset=").concat(n,"&type=").concat(a,"&search=").concat(o)))},setContactValues:function(t,e){O(t,e)},fetchAnalytics:function(t,e,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=0;4===parseInt(c)&&(u=1),_("GET",Object(r.m)("/analytics/emails/chart/")+"?"+Object(i.stringify)({after:e,before:n,interval:a,oid:t,type:o,mode:c,contact:u}))},setAnalyticsValues:function(t,e){w(t,e)}})}}}]);