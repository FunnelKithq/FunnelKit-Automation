(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{1225:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(4),l=a(2),c=a(871),i=a(870),m=a(5),s=a(76),o=a(283),b=a(67),d=a(101),f=a(17),u=a(3),j=a(58),O=a(8);function p(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,c,i=[],m=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;m=!1}else for(;!(m=(n=l.call(a)).done)&&(i.push(n.value),i.length!==t);m=!0);}catch(e){s=!0,r=e}finally{try{if(!m&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(s)throw r}}return i}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return _(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var v=function(e){var t=e.mappedFields,a=e.formHeaders;if(!t)return Object(n.createElement)(r.Notice,{status:"error",isDismissible:!1,className:"bwf-c-mapping-notice"},Object(n.createElement)("b",null,Object(l.__)("Error: ","wp-marketing-automations")),Object(l.__)("No email mapping found. Email mapping is must. Click edit to map email.","wp-marketing-automations"));var c,i=function(e){return"email"!==t[e]?0:a.find((function(t){return t.index.toString()===e}))?{v:null}:{v:Object(n.createElement)(r.Notice,{status:"error",isDismissible:!1,className:"bwf-c-mapping-notice"},Object(n.createElement)("b",null,Object(l.__)("Error: ","wp-marketing-automations")),Object(l.__)("Invalid email mapping found. Email mapping is must. Click edit to map email.","wp-marketing-automations"))}};for(var m in t)if(0!==(c=i(m))&&c)return c.v;return Object(n.createElement)(r.Notice,{status:"error",isDismissible:!1,className:"bwf-c-mapping-notice"},Object(n.createElement)("b",null,Object(l.__)("Error: ","wp-marketing-automations")),Object(l.__)("No email mapping found. Email mapping is must. Click edit to map email.","wp-marketing-automations"))},g=function(e){var t=e.mappedFields,a=e.formHeaders;if(!t)return Object(n.createElement)(r.Notice,{status:"warning",isDismissible:!1,className:"bwf-c-mapping-notice"},Object(n.createElement)("b",null,Object(l.__)("Warning: ","wp-marketing-automations")),Object(l.__)("Invalid / Empty Mapping Data. Click edit to map fields.","wp-marketing-automations"));var c,i=function(e){if(!a.find((function(t){return t.index.toString()===e})))return{v:Object(n.createElement)(r.Notice,{status:"warning",isDismissible:!1,className:"bwf-c-mapping-notice"},Object(n.createElement)("b",null,Object(l.__)("Warning: ","wp-marketing-automations")),Object(l.__)("Detected some invalid field mappings. Maybe your form fields have been changed. Click edit to map fields.","wp-marketing-automations"))}};for(var m in t)if(c=i(m))return c.v;return null};t.default=function(){var e=Object(c.a)(),t=e.getFeed,a=e.getFormFields,E=e.getFormHeaders,_=e.getLoading,N=e.getUpdateStatusStatus,y=Object(i.a)(),k=y.fetchMappingData,h=y.setEditMapMode,C=y.setStep,S=y.updateStatus,x=y.resetUpdateStatusStatus,A=t(),F=A.id,D=A.data,I=A.valid,T=w(Object(n.useState)(!I),2),P=T[0],H=T[1],L=a(),M=Array.isArray(L)?L.map((function(e){return e.fields})).reduce((function(e,t){return[].concat(p(e),p(t))}),[]):[],U=E(),Y=D.mapped_fields,B=_(),R=w(Object(n.useState)(!1),2),Q=R[0],J=R[1];Object(n.useEffect)((function(){I&&k(F)}),[F]);var V=N(),W=Object(n.useContext)(m.d);Object(n.useEffect)((function(){V&&(1===V&&W(Object(l.__)("Loadingâ€¦","wp-marketing-automations")),2===V&&W(Object(l.__)("Status Changed Successfully!","wp-marketing-automations")),3===V&&W(Object(l.__)("Unable to change status","wp-marketing-automations")),3!==V&&2!==V||setTimeout((function(){W(""),x()}),2e3))}),[V]);var q=Object(m.L)(),z=!!A&&!!A.data&&!!A.data.incentivize_email;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(s.a,null),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwfcrm-overview-wrap"},Object(n.createElement)(r.Card,{className:"bwf-crm-form-feed-report-detail-wrap"},Object(n.createElement)(r.CardHeader,{className:"bwf-crm-form-feed-report-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(l.__)("Overview","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex bwf-form-status-header"},I&&Object(n.createElement)(b.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var t=e.onToggle;return Object(n.createElement)(d.a,{isClickable:!0,onInvoke:function(){var e=2===A.status?3:2;S(F,e),t()}},Object(n.createElement)(f.a,{justify:"flex-start"},Object(n.createElement)(f.c,null,2===A.status?"Deactivate":"Activate")))}}))),Object(n.createElement)(r.CardBody,null,P&&Object(n.createElement)(r.Notice,{className:"bwf-error-notice",isDismissible:!1,status:"error",onRemove:function(){return H(!1)}},Object(l.__)("Saved form does not exist.","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(l.__)("Title","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},A.title)),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(l.__)("Source","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},q&&q[A.source]?q[A.source]:A.source,!!A.form_link&&A.data.hasOwnProperty("form_id")&&Object(n.createElement)(n.Fragment,null," ( ",Object(n.createElement)("a",{href:A.form_link,target:"_blank",className:"bwf-a-no-underline",rel:"noreferrer"},"#"+A.data.form_id)," )"))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(l.__)("Status","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},1===A.status?Object(l.__)("Draft","wp-marketing-automations"):2===A.status?Object(l.__)("Active","wp-marketing-automations"):Object(l.__)("Inactive","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(l.__)("Submissions","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},A.contacts_created)))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(r.Card,{className:"bwf-crm-form-feed-report-detail-wrap"},Object(n.createElement)(r.CardHeader,{className:"bwf-crm-form-feed-report-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(l.__)("Mapping","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex bwf-form-status-header"},I&&Object(n.createElement)(b.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var t=e.onToggle;return Object(n.createElement)(d.a,{isClickable:!0,onInvoke:function(){h(!0),C("mapping"),t()}},Object(n.createElement)(f.a,{justify:"flex-start"},Object(n.createElement)(f.c,null,Object(l.__)("Edit","wp-marketing-automations"))))}}))),Object(n.createElement)(r.CardBody,{className:"bwf-crm-overview-full"},!!I&&Object(n.createElement)(n.Fragment,null,!B&&U.length>0&&M.length>0?Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(l.__)("Fields","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},Object(n.createElement)(g,{mappedFields:Y,formHeaders:U}),Object(n.createElement)(v,{mappedFields:Y,formHeaders:U}),Object(n.createElement)("table",{className:"bwf-overview-table"},Object(n.createElement)("thead",null,Object(n.createElement)("tr",null,Object(n.createElement)("th",null,Object(l.__)("Form Field","wp-marketing-automations")),Object(n.createElement)("th",null,Object(l.__)("Contact Field","wp-marketing-automations")))),Object(n.createElement)("tbody",null,Object.keys(Y).map((function(e){var t=Y[e],a=U.find((function(t){return t.index.toString()===e.toString()})),r=M.find((function(e){return e.id.toString()===t.toString()}));return Object(n.createElement)("tr",{key:e},Object(n.createElement)("td",null,Object(n.createElement)("div",{className:"bwf-c-field-label-wrapper"},!a&&Object(n.createElement)("span",{className:"bwf-mr-10"},Object(n.createElement)(O.a,{icon:"info",color:"red"})),a&&a.header?a.header:e)),Object(n.createElement)("td",null,r&&r.name?r.name:t))})))))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(l.__)("Fields","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex",style:{justifyContent:"flex-start",gap:"20px",padding:"12px 0"}},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-300 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf-display-flex",style:{justifyContent:"flex-start",gap:"20px",padding:"12px 0"}},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-300 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf-display-flex",style:{justifyContent:"flex-start",gap:"20px",padding:"12px 0"}},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-300 bwf-h-15"})))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(l.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},Object(n.createElement)("table",{className:"bwf-overview-table"},Object(n.createElement)("tbody",null,A.data.hasOwnProperty("tags")&&!Object(u.isEmpty)(A.data.tags)&&Object(n.createElement)("tr",null,Object(n.createElement)("td",null,Object(l.__)("Tags","wp-marketing-automations")),Object(n.createElement)("td",null,A.data.tags.map((function(e){return Object(n.createElement)(j.a,{label:e.value})})))),A.data.hasOwnProperty("lists")&&!Object(u.isEmpty)(A.data.lists)&&Object(n.createElement)("tr",null,Object(n.createElement)("td",null,Object(l.__)("Lists","wp-marketing-automations")),Object(n.createElement)("td",null,A.data.lists.map((function(e){return Object(n.createElement)(j.a,{label:e.value})})))),Object(n.createElement)("tr",null,Object(n.createElement)("td",null,Object(l.__)("Update Existing Contacts","wp-marketing-automations")),Object(n.createElement)("td",null,A.data.hasOwnProperty("update_existing")&&A.data.update_existing?"Yes":"No")),Object(n.createElement)("tr",null,Object(n.createElement)("td",null,Object(l.__)("Don't Update Blank Values","wp-marketing-automations")),Object(n.createElement)("td",null,A.data.hasOwnProperty("update_blank")&&A.data.update_blank?"Yes":"No")),Object(n.createElement)("tr",null,Object(n.createElement)("td",null,Object(l.__)("Trigger Automations","wp-marketing-automations")),Object(n.createElement)("td",null,A.data.hasOwnProperty("trigger_events")&&A.data.trigger_events?"Yes":"No")))))))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(r.Card,{className:"bwf-crm-form-feed-report-detail-wrap"},Object(n.createElement)(r.CardHeader,{className:"bwf-crm-form-feed-report-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(l.__)("Email Notification","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex bwf-form-status-header"},I&&Object(n.createElement)(b.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var t=e.onToggle;return Object(n.createElement)(d.a,{isClickable:!0,onInvoke:function(){h(!0),C("double_optin"),t()}},Object(n.createElement)(f.a,{justify:"flex-start"},Object(n.createElement)(f.c,null,Object(l.__)("Edit","wp-marketing-automations"))))}}))),Object(n.createElement)(r.CardBody,null,Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(l.__)("Enabled","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},z?"Yes":"No")),!!z&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(l.__)("Email","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},Object(n.createElement)(r.Button,{isSecondary:!0,className:"bwf-mr-5",onClick:function(){return J(!0)}},Object(l.__)("View Details","wp-marketing-automations")),Q&&Object(n.createElement)(o.a,{isOpen:Q,isLoading:!1,onRequestClose:function(){return J(!1)},subject:A.data.incentive_email.content[0].subject,preHeader:A.data.incentive_email.content[0].preheader,body:"editor"!==A.data.incentive_email.content[0].type?Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:A.data.incentive_email.content[0].body}}):Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:A.data.incentive_email.content[0].editor.body}}),type:A.data.incentive_email.content[0].type,sourceType:2,mode:1,utm:A.data.incentive_email.content[0].utmEnabled?A.data.incentive_email.content[0].utm:{}}))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(l.__)("Don't Send Email to Subscribed Contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},A.data.not_send_to_subscribed?"Yes":"No")),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(l.__)("Confirmation Redirect URL","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},!!A.data.redirect_url&&A.data.redirect_url)),A.data.hasOwnProperty("add_tag_enable")&&A.data.add_tag_enable&&A.data.hasOwnProperty("tag_to_add")&&!Object(u.isEmpty)(A.data.tag_to_add)&&Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(l.__)("Confirmation Tags","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},A.data.tag_to_add.map((function(e){return Object(n.createElement)(j.a,{key:e.id,label:e.value,id:e.id,screenReaderLabel:e.value})}))))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(l.__)("Auto-Confirm Contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},A.data.marketing_status?"Yes":"No"))))))}}}]);