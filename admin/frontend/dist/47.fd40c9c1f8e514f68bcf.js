(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1253:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(2),o=n(268),i=n(881),c=n(868),u=n(5),s=n(76),l=n(38),m=n(270),f=n(865),p=n(141),b=n(67),h=n(101),y=n(17),g=n(8),d=n(3),O=n(4),j=n(912),w=n(858),v=n(15),_=n(58),E=n(12),k=n.n(E),C=n(142),P=n(147),S=n(27);function x(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],u=!0,s=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,a=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var A=function(t){var e=x(Object(r.useState)([]),2),n=e[0],o=e[1],i=t.onSearch,c=function(t){i({search:t.length>0?t[0].key:""})};return Object(r.createElement)(S.a,{autocompleter:P.d,multiple:!1,allowFreeTextSearch:!0,inlineTags:!0,selected:n,onChange:function(t){o(t),c(t)},onRemoveItem:function(t){var e=n.filter((function(e){return e.key!=t}));o(e),c(e)},placeholder:Object(a.__)("Search","wp-marketing-automations"),showClearButton:!0,disabled:!1,bwfMaintainSingleTerm:!0})},I=n(9),T=n.n(I),N=n(102),D=n(145),B=n(222),M=n(125);function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(){F=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),c=new x(r||[]);return a(i,"_invoke",{value:k(t,n,c)}),i}function m(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="executing",b="completed",h={};function y(){}function g(){}function d(){}var O={};s(O,i,(function(){return this}));var j=Object.getPrototypeOf,w=j&&j(j(L([])));w&&w!==n&&r.call(w,i)&&(O=w);var v=d.prototype=y.prototype=Object.create(O);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(a,o,i,c){var u=m(t[a],t,o);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==R(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return n("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,n,r){var a=f;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===b){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var u=C(c,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var s=m(e,n,r);if("normal"===s.type){if(a=r.done?b:"suspendedYield",s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=b,r.method="throw",r.arg=s.arg)}}}function C(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=m(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(R(e)+" is not iterable")}return g.prototype=d,a(v,"constructor",{value:d,configurable:!0}),a(d,"constructor",{value:g,configurable:!0}),g.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(v),t},e.awrap=function(t){return{__await:t}},_(E.prototype),s(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new E(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(v),s(v,u,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),h}},e}function G(t,e,n,r,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,a)}function U(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){G(o,r,a,i,c,"next",t)}function c(t){G(o,r,a,i,c,"throw",t)}i(void 0)}))}}var q=function(t){var e=t.isOpen,n=t.tasks,o=t.onSuccess,i=t.onError,c=t.onRequestClose,s=t.actionType,l=t.automationId,m=t.screenType,f=Object(r.useContext)(u.d),p=n?n.length:0,b=Object(M.useMutation)(function(){var t=U(F().mark((function t(e){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k()({path:Object(u.m)("/automation/".concat(l,"/bulk-action/")),method:"POST",data:{action:s,a_cids:e,status:m}}).then((function(t){f(t.message),Object(u.fb)(f,2e3)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return b.reset()}),2500),o&&setTimeout((function(){return o()}),2e3)},onError:function(){i&&i()}}),h=function(){var t=U(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.mutate(n.map((function(t){return t.ID})));case 2:return t.abrupt("return");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y={delete:{title:Object(a._n)("Delete Automation for Contact","Delete Automation for Contacts",p,"wp-marketing-automations"),description:Object(r.createElement)(r.Fragment,null,Object(a.__)("You are about to delete ","wp-marketing-automations"),Object(a._n)("contact","contacts",p,"wp-marketing-automations"),Object(a.__)(" from this automation. This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")),confirmBtn:Object(a.__)("Delete","wp-marketing-automations"),cancelBtn:Object(a.__)("Cancel","wp-marketing-automations"),successMsg:Object(a.__)("Bulk action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(a.__)("Unable to delete automation for contacts","wp-marketing-automations"),confirmDescription:Object(a.__)("This action is irreversible","wp-marketing-automations")},end:{title:Object(a._n)("End Automation for Contact","End Automation for Contacts",p,"wp-marketing-automations"),description:Object(r.createElement)(r.Fragment,null,Object(a.__)("You are about to end automation for ","wp-marketing-automations"),Object(a._n)("contact","contacts",p,"wp-marketing-automations"),Object(a.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(a.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(a.__)("Cancel","wp-marketing-automations"),successMsg:Object(a.__)("Bulk action has been scheduled, it will be executed within one minute.","wp-marketing-automations"),errorMsg:Object(a.__)("Unable to end automation for contacts","wp-marketing-automations")},paused:{title:Object(a._n)("Pause Automation for Contact","Pause Automation for Contacts",p,"wp-marketing-automations"),description:Object(r.createElement)(r.Fragment,null,Object(a.__)("You are about to pause automation for ","wp-marketing-automations"),Object(a._n)("contact","contacts",p,"wp-marketing-automations"),Object(a.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(a.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(a.__)("Cancel","wp-marketing-automations"),successMsg:Object(a.__)("Bulk action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(a.__)("Unable to pause automation for contacts","wp-marketing-automations")},run_now:{title:Object(a._n)("Run Automation for Contact","Run Automation for Contacts",p,"wp-marketing-automations"),description:Object(r.createElement)(r.Fragment,null,Object(a.__)("You are about to run automation for ","wp-marketing-automations"),Object(a._n)("contact","contacts",p,"wp-marketing-automations"),Object(a.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(a.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(a.__)("Cancel","wp-marketing-automations"),successMsg:Object(a.__)("Bulk Action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(a.__)("Unable to run automation for contacts","wp-marketing-automations")},unpaused:{title:Object(a._n)("Resume Automation for Contact","Resume Automation for Contacts",p,"wp-marketing-automations"),description:Object(r.createElement)(r.Fragment,null,Object(a.__)("You are about to resume automation for ","wp-marketing-automations"),Object(a._n)("contact","contacts",p,"wp-marketing-automations"),Object(a.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(a.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(a.__)("Cancel","wp-marketing-automations"),successMsg:Object(a.__)("Bulk Action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(a.__)("Unable to resume automation for contacts","wp-marketing-automations")},retry:{title:Object(a._n)("Retry Automation for Contact","Retry Automation for Contacts",p,"wp-marketing-automations"),description:Object(r.createElement)(r.Fragment,null,Object(a.__)("You are about to retry automation for ","wp-marketing-automations"),Object(a._n)("contact","contacts",p,"wp-marketing-automations"),Object(a.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(a.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(a.__)("Cancel","wp-marketing-automations"),successMsg:Object(a.__)("Bulk Action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(a.__)("Unable to re-run automation for contacts","wp-marketing-automations")}};return Object(r.createElement)(C.a,{modalTitle:y.hasOwnProperty(s)&&y[s].hasOwnProperty("title")?y[s].title:Object(a._n)("Perform Actions","Perform Actions",p,"wp-marketing-automations"),deleteDescriptionText:y.hasOwnProperty(s)&&y[s].hasOwnProperty("description")?y[s].description:"",confirmButtonText:y.hasOwnProperty(s)&&y[s].hasOwnProperty("confirmBtn")?y[s].confirmBtn:Object(a.__)("Confirm","wp-marketing-automations"),cancelButtonText:y.hasOwnProperty(s)&&y[s].hasOwnProperty("cancelBtn")?y[s].cancelBtn:Object(a.__)("Cancel","wp-marketing-automations"),onConfirm:h,isLoading:b.isLoading,successMessage:b.isSuccess&&(y.hasOwnProperty(s)&&y[s].hasOwnProperty("successMsg")?y[s].successMsg:Object(a.__)("Actions Done!","wp-marketing-automations")),errorMessage:b.isError&&(b.error&&b.error.message?b.error.message:y.hasOwnProperty(s)&&y[s].hasOwnProperty("errorMsg")?y[s].errorMsg:Object(a.__)("Unable to perform action","wp-marketing-automations")),onRequestClose:function(){return!!c&&c()},isOpen:e,confirmDescription:y.hasOwnProperty(s)&&y[s].hasOwnProperty("confirmDescription")?y[s].confirmDescription:"",isDelete:!0})};function Y(){return(Y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function J(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],u=!0,s=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,a=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var H=function(t){var e=t.floatingBarProps,n=void 0===e?{}:e,o=t.resetSelection,i=t.onSuccess,c=t.screenType,u=t.screenTypeId,s=t.automationId,l=J(Object(r.useState)([]),2),m=l[0],f=l[1],p=J(Object(r.useState)(!1),2),b=p[0],h=p[1],y=J(Object(r.useState)(""),2),g=y[0],d=y[1],O=function(){o&&o(),f([])};Object(r.useEffect)((function(){O()}),[c]);var j,w,v=Object(r.useCallback)((function(t,e){f(e),d(t),h(!0)}),[]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(B.a,Y({actions:(j=c,w=[],"completed"!==j&&("active"===j&&(w.push({id:"run_now",icon:"play",hint:Object(a.__)("Run Now","wp-marketing-automations")}),w.push({id:"paused",icon:"pause",hint:Object(a.__)("Pause","wp-marketing-automations")})),"paused"===j&&w.push({id:"unpaused",icon:"play",hint:Object(a.__)("Resume","wp-marketing-automations")}),"failed"===j?w.push({id:"retry",icon:"retry",hint:Object(a.__)("Retry","wp-marketing-automations")}):w.push({id:"end",icon:"end",hint:Object(a.__)("End","wp-marketing-automations")})),w.push({id:"delete",icon:"trash",hint:Object(a.__)("Delete","wp-marketing-automations")}),w),onAction:v},n)),Object(r.createElement)(q,{tasks:m,isOpen:b,onSuccess:function(){i&&i(g,m),O()},onError:O,onRequestClose:function(){return h(!1)},screenType:c,screenTypeId:u,actionType:g,automationId:s}))};function W(t){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(){$=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),c=new x(r||[]);return a(i,"_invoke",{value:k(t,n,c)}),i}function m(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="executing",b="completed",h={};function y(){}function g(){}function d(){}var O={};s(O,i,(function(){return this}));var j=Object.getPrototypeOf,w=j&&j(j(L([])));w&&w!==n&&r.call(w,i)&&(O=w);var v=d.prototype=y.prototype=Object.create(O);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(a,o,i,c){var u=m(t[a],t,o);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==W(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return n("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,n,r){var a=f;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===b){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var u=C(c,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var s=m(e,n,r);if("normal"===s.type){if(a=r.done?b:"suspendedYield",s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=b,r.method="throw",r.arg=s.arg)}}}function C(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=m(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(W(e)+" is not iterable")}return g.prototype=d,a(v,"constructor",{value:d,configurable:!0}),a(d,"constructor",{value:g,configurable:!0}),g.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(v),t},e.awrap=function(t){return{__await:t}},_(E.prototype),s(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new E(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(v),s(v,u,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),h}},e}function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){K(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function K(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==W(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===W(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X(t,e,n,r,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,a)}function Z(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){X(o,r,a,i,c,"next",t)}function c(t){X(o,r,a,i,c,"throw",t)}i(void 0)}))}}function tt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],u=!0,s=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,a=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(t,e)||et(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(t,e){if(t){if("string"==typeof t)return nt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(t,e):void 0}}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var rt={1:"Active",2:"Failed",3:"Paused",4:"Waiting",5:"Terminated",6:"Reattempt"},at={1:"bwf-tags bwf-tag-green",2:"bwf-tags bwf-tag-red",3:"bwf-tags bwf-tag-red",4:"bwf-tags bwf-tag-orange",5:"bwf-tags bwf-tag-red",6:"bwf-tags bwf-tag-blue"};e.default=function(t){var e=Object(r.useContext)(u.d),n=Object(v.i)(),E=t.match.params,P=E.automationId,S=E.type,x=void 0===S?"active":S,L=tt(Object(r.useState)({loading:!1,status:!1}),2),I=L[0],M=L[1],R="t_0";Object(d.isEmpty)(x)||("paused"===x?R="t_1":"completed"===x?R="l_1":"failed"===x&&(R="l_0"));var F=tt(Object(r.useState)(""),2),G=F[0],U=F[1],q=tt(Object(r.useState)(""),2),Y=q[0],J=q[1],V=tt(Object(r.useState)(!0),2),W=V[0],z=V[1],K=tt(Object(r.useState)({}),2),X=K[0],nt=K[1],ot=Object(c.a)(),it=ot.getContactData(),ct=ot.getContactAutomation().title,ut=void 0===ct?"":ct,st=Object(p.a)(),lt=st.setL2NavAlign,mt=st.setL2Title,ft=Object(D.a)(),pt=ft.getAutomationData,bt=ft.getAutomationId,ht=pt().title,yt=void 0===ht?"":ht,gt=bt();Object(f.a)("contacts","",!0,!1,null,P,!1,!0);var dt=ot.getContactLoading(),Ot=ot.getContactLimit(),jt=ot.getContactOffset(),wt=ot.getContactTotal(),vt=ot.getContactCountData(),_t=Object(i.a)(),Et=_t.fetchContacts,kt=_t.setContactValues,Ct=[{ID:"1",cid:"1",aid:P,trail:"ssadsda",c_date:T()().format(),email:"johndoe@gmail.com",f_name:"John",l_name:"Doe",contact_no:"1234567890",date:T()().format(),e_time:T()().format(),status:"1",last:"1",data:{run_time:T()().format(),action:"Send Email",type:"2"}}];Object(r.useEffect)((function(){Object(u.mb)()&&Et(P,Ot,jt,x,Y)}),[Ot,jt,x,Y]),Object(r.useEffect)((function(){lt("left"),Object(u.g)("Automation #"+P)}),[dt]),Object(r.useEffect)((function(){mt(parseInt(P)===parseInt(gt)&&""!==yt&&""===ut?yt:""!==ut?ut:Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))}),[yt,ut,P]);var Pt,St=Object(r.useMemo)((function(){var t={};if(Array.isArray(it)){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=et(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(it);try{for(n.s();!(e=n.n()).done;){var r=e.value;t[r.ID]=r}}catch(t){n.e(t)}finally{n.f()}}return t}),[it]),xt=Object(B.b)(St),Lt=xt.singleSelectProps,At=xt.selectAllProps,It=xt.floatingBarProps,Tt=xt.resetSelection,Nt=[{key:"select_contact",label:Object(r.createElement)(O.CheckboxControl,At),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"action",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"contact",label:Object(a.__)("Contact","wp-marketing-automations"),required:!0,cellClassName:"bwf-crm-col-contact bwf-w-210"},{key:"details",label:Object(a.__)("Details","wp-marketing-automations"),cellClassName:"bwf-crm-col-contact-details bwf-w-210"},{key:"startedon ",label:Object(a.__)("Started On","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-w-210"},{key:"last_run",label:Object(a.__)("Last Run","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-w-210"},{key:"next_last_run",label:Object(a.__)("Next Run Time","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m"},{key:"status",label:Object(a.__)("Status","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-w-120"},{key:"journey",label:Object(a.__)("","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-w-120"}],Dt=function(){var t=Z($().mark((function t(n){var r,a,o=arguments;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},a=o.length>2&&void 0!==o[2]?o[2]:0,M(Q(Q({},r),{},{status:!0})),t.prev=3,t.next=6,k()({path:Object(u.m)("/automation/".concat(P,"/delete-contact")),method:"DELETE",data:{trail_id:n,ac_id:a,type:x}}).then((function(t){if(200!==t.code)throw Error(Object(u.j)(null==t?void 0:t.message));M({status:!1}),e(t.message),Et(P,Ot,jt,x,Y)})).catch((function(t){throw Error(Object(u.j)(null==t?void 0:t.message))}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),M(Q(Q({},r),{},{status:!0,error:t.t0.message}));case 11:Object(u.fb)(e,2e3);case 12:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),Bt=function(){var t=Z($().mark((function t(n,r,a){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e("Updating status..."),t.prev=1,t.next=4,k()({path:Object(u.m)("/automation/".concat(n,"/contact/status")),method:"POST",data:{to:a,from:r}}).then((function(t){200===t.code?(e(t.message),Et(P,Ot,jt,x,Y)):e(t.message)}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),e(t.t0.message);case 9:Object(u.fb)(e,2e3);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n,r){return t.apply(this,arguments)}}(),Mt=ot.getContactPage(),Rt=function(t){t!==Ot&&(kt("limit",t),kt("offset",0))},Ft=function(t){return Object(r.createElement)(r.Fragment,null,Object(u.mb)()?Object(r.createElement)(l.a,{href:"admin.php?page=autonami&path=/contact/"+t.cid,type:"bwf-crm",className:"bwf-crm-campaign-contactData-contact-link bwf-a-no-underline",key:t.cid},Object(r.createElement)(m.a,{contact:t,date:t.date,dateText:Object(a.__)("Joined on","wp-marketing-automations")})):Object(r.createElement)(m.a,{contact:t,date:t.date,dateText:Object(a.__)("Joined on","wp-marketing-automations")}))},Gt=function(t){var e=t.trail,n=void 0===e?"":e;return Object(d.isEmpty)(n)?"-":Object(r.createElement)("a",{className:"bwf-cursor-pointe bwf-a-no-underline",onClick:function(){Object(u.mb)()?(U(n),nt(t)):z(!0)}},"View Journey")},Ut={1:"Delay",2:"Action",3:"Goal",4:"Condition"},qt=function(t){var e=t.data,n=void 0===e?{}:e;if(Object(d.isEmpty)(n))return Object(r.createElement)(r.Fragment,null);var a=n.action,o=void 0===a?"":a,i=n.run_time,c=void 0===i?"":i,s=n.type,l=void 0===s?"":s;return Object(r.createElement)("div",{className:"bwf-c-contact-details-cell"},!Object(d.isEmpty)(l)&&Ut.hasOwnProperty(parseInt(l))&&Object(r.createElement)(y.a,{justify:"justify",align:"top"},Object(r.createElement)(y.c,null,Object(r.createElement)("span",{className:"bwf_bold"},Ut[parseInt(l)]),Object(d.isEmpty)(o)?"":" : "+o)),!Object(d.isEmpty)(c)&&Object(r.createElement)(y.a,{justify:"justify",align:"top"},Object(r.createElement)(y.c,null,Object(u.N)(c))),(Object(d.isEmpty)(l)||!Ut.hasOwnProperty(parseInt(l)))&&Object(d.isEmpty)(c)&&Object(r.createElement)("span",null,"-"))},Yt=function(t){var e=t.data,n=void 0===e?{}:e;return!(!n.hasOwnProperty("type")||3!==parseInt(n.type))};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>#bwfcrm-page{ overflow: auto !important; }</style>"}}),Object(r.createElement)(s.a,null),Object(r.createElement)(O.ButtonGroup,{className:"bwf-btn-group-tabs"},Object(r.createElement)(O.Button,{isPrimary:x&&"active"===x,isSecondary:x&&"active"!==x,onClick:function(){return Object(v.k)({path:"/automation/".concat(P,"/contacts/active")},"/",n)}},Object(a.__)("Active","wp-marketing-automations"),vt.hasOwnProperty("active")&&parseInt(vt.active)>0?Object(r.createElement)("span",{className:"bwf-crm-btn-group-count"},parseInt(vt.active)):""),Object(r.createElement)(O.Button,{isPrimary:x&&"completed"===x,isSecondary:x&&"completed"!==x,onClick:function(){return Object(v.k)({path:"/automation/".concat(P,"/contacts/completed")},"/",n)}},Object(a.__)("Completed","wp-marketing-automations"),vt.hasOwnProperty("completed")&&parseInt(vt.completed)>0?Object(r.createElement)("span",{className:"bwf-crm-btn-group-count"},parseInt(vt.completed)):""),Object(r.createElement)(O.Button,{isPrimary:x&&"paused"===x,isSecondary:x&&"paused"!==x,onClick:function(){return Object(v.k)({path:"/automation/".concat(P,"/contacts/paused")},"/",n)}},Object(a.__)("Paused","wp-marketing-automations"),vt.hasOwnProperty("paused")&&parseInt(vt.paused)>0?Object(r.createElement)("span",{className:"bwf-crm-btn-group-count"},parseInt(vt.paused)):""),Object(r.createElement)(O.Button,{isPrimary:x&&"failed"===x,isSecondary:x&&"failed"!==x,onClick:function(){return Object(v.k)({path:"/automation/".concat(P,"/contacts/failed")},"/",n)}},Object(a.__)("Failed","wp-marketing-automations"),vt.hasOwnProperty("failed")&&parseInt(vt.failed)>0?Object(r.createElement)("span",{className:"bwf-crm-btn-group-count"},parseInt(vt.failed)):"")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(o.a,{className:"bwf-crm-automation-contact has-search",rows:(Object(u.mb)()?it:Ct).map((function(t){return[{display:Lt.hasOwnProperty(t.ID)?Object(r.createElement)(O.CheckboxControl,Lt[t.ID]):Object(r.createElement)(r.Fragment,null),value:null},{display:(n=t,o=n.status,i=void 0===o?"":o,c=n.trail,s=void 0===c?"":c,l=n.ID,Object(r.createElement)(b.a,{label:Object(a.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var e=t.onToggle;return Object(r.createElement)(r.Fragment,null,1===parseInt(i)&&Object(r.createElement)(h.a,{isClickable:!0,onInvoke:function(){Object(u.mb)()?Bt(l,i,"now"):z(!0),e()}},Object(r.createElement)(y.a,{justify:"flex-start"},Object(r.createElement)(y.c,null,Object(r.createElement)(g.a,{icon:"play"})),Object(r.createElement)(y.c,null,Object(a.__)("Run Now","wp-marketing-automations")))),[1,4,6].includes(parseInt(i))&&Object(r.createElement)(h.a,{isClickable:!0,onInvoke:function(){Object(u.mb)()?Bt(l,i,3):z(!0),e()}},Object(r.createElement)(y.a,{justify:"flex-start"},Object(r.createElement)(y.c,null,Object(r.createElement)(g.a,{icon:"pause"})),Object(r.createElement)(y.c,null,Object(a.__)("Pause","wp-marketing-automations")))),3===parseInt(i)&&Object(r.createElement)(h.a,{isClickable:!0,onInvoke:function(){Object(u.mb)()?Bt(l,i,1):z(!0),e()}},Object(r.createElement)(y.a,{justify:"flex-start"},Object(r.createElement)(y.c,null,Object(r.createElement)(g.a,{icon:"play"})),Object(r.createElement)(y.c,null,Object(a.__)("Unpause","wp-marketing-automations")))),!Object(d.isEmpty)(i)&&Object(r.createElement)(h.a,{isClickable:!0,onInvoke:function(){Object(u.mb)()?Bt(l,i,"end"):z(!0),e()}},Object(r.createElement)(y.a,{justify:"flex-start"},Object(r.createElement)(y.c,null,Object(r.createElement)(g.a,{icon:"end"})),Object(r.createElement)(y.c,null,Object(a.__)("End","wp-marketing-automations")))),2===parseInt(i)&&Object(r.createElement)(h.a,{isClickable:!0,onInvoke:function(){Object(u.mb)()?Bt(l,i,6):z(!0),e()}},Object(r.createElement)(y.a,{justify:"flex-start"},Object(r.createElement)(y.c,null,Object(r.createElement)(g.a,{icon:"retry",size:20})),Object(r.createElement)(y.c,null,Object(a.__)("Retry","wp-marketing-automations")))),Object(r.createElement)(h.a,{isClickable:!0,onInvoke:function(){var t={status:!0,deleteEntityName:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{style:{fontWeight:"normal"}},Object(a.__)("contact ")),n.f_name,"Â ",n.l_name),buttonConfirm:Object(a.__)("Delete","wp-marketing-automations"),buttonCancel:Object(a.__)("Cancel","wp-marketing-automations"),modalTitle:Object(a.__)("Delete Contact")};Object(u.mb)()?M(Q(Q({},t),{},{onConfirm:function(){return Dt(s,t,l)}})):z(!0),e()}},Object(r.createElement)(y.a,{justify:"flex-start"},Object(r.createElement)(y.c,null,Object(r.createElement)(g.a,{icon:"trash"})),Object(r.createElement)(y.c,null,Object(a.__)("Delete","wp-marketing-automations")))))}})),value:""},{display:Ft(t),value:t.hasOwnProperty("contact_name")?t.contact_name:"-"},{display:(e=t,Object(r.createElement)("div",{className:"bwf-c-contact-details-cell"},e.email&&Object(r.createElement)(y.a,{justify:"justify",align:"top"},Object(r.createElement)(y.c,null,Object(r.createElement)(g.a,{icon:"mail"})),Object(r.createElement)(y.c,null,e.email)),e.contact_no&&Object(r.createElement)(y.a,{justify:"justify",align:"top"},Object(r.createElement)(y.c,null,Object(r.createElement)(g.a,{icon:"phone"})),Object(r.createElement)(y.c,null,e.contact_no)),!e.contact_no&&!e.email&&Object(r.createElement)("span",null,"-"))),value:""},{display:t.hasOwnProperty("c_date")?Object(u.N)(t.c_date):"-",value:t.hasOwnProperty("c_date")?t.c_date:"-"},{display:qt(t),value:""},{display:t.hasOwnProperty("e_time")&&!Yt(t)?Object(u.N)(t.e_time):"-",value:"-"},{display:t.hasOwnProperty("status")&&rt.hasOwnProperty(parseInt(t.status))?Object(r.createElement)("span",{className:at[t.status]},rt[t.status]):Object(r.createElement)("span",{className:"bwf-tags bwf-tag-green"},Object(a.__)("Completed","wp-marketing-automations")),value:"-"},{display:Gt(t),value:"-"}];var e,n,o,i,c,s,l})),headers:Nt,query:{paged:Mt},rowsPerPage:Ot,totalRows:Object(u.mb)()?wt:1,isLoading:!!Object(u.mb)()&&dt,onPageChange:function(t){kt("offset",(t-1)*Ot)},onQueryChange:function(t){return"per_page"!==t?function(){}:Rt},rowHeader:!0,showMenu:!1,emptyMessage:Object(a.__)("No contacts found","wp-marketing-automations"),actions:[Object(r.createElement)(A,{onSearch:function(t){J(t.hasOwnProperty("search")?t.search:"")},key:"bwf-automation-table-search"})]}),!Object(d.isEmpty)(G)&&Object(r.createElement)(O.Modal,{title:"",onRequestClose:function(){U(""),nt({})},className:"bwf-admin-modal bwf-admin-modal-no-header bwf-admin-modal-fullscreen"},Object(r.createElement)("div",{className:"bwf-stretch-header-customer-journey"},Object(r.createElement)("div",{className:"bwf-wrapper"},Object(r.createElement)("div",{className:"bwf-left-section"},Object(r.createElement)("div",{className:"bwf-back-button bwf-display-flex bwf-cursor-pointer",onClick:function(){U(""),nt({})}},Object(r.createElement)(g.a,{icon:"arrow-left",size:20})),Object(r.createElement)("div",{className:"bwf-title bwf-h3"},ut)),Object(r.createElement)("div",{className:"bwf-right-section"},Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start"},Object(r.createElement)(g.a,{icon:"split-path",width:16,height:18}),Object(r.createElement)("span",null,Object(a.__)("Contact Journey"))),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)(_.a,{id:X.cid,label:(Pt="-",Object(d.isEmpty)(X)||(Pt=Object(d.isEmpty)(X.f_name)&&Object(d.isEmpty)(X.l_name)?X.email:X.f_name+" "+X.l_name),Pt)})))),Object(r.createElement)(w.e,null,Object(r.createElement)(j.a,{customerData:{trail:G},isConatctTab:!0,automatonID:P}))),Object(r.createElement)(C.a,{modalTitle:I.modalTitle,content:I.content,deleteEntityName:I.deleteEntityName,confirmText:I.confirmText,confirmButtonText:I.buttonConfirm,cancelButtonText:I.buttonCancel,onConfirm:I.onConfirm,isLoading:I.loading,successMessage:I.success,errorMessage:I.error,onRequestClose:function(){return M({status:!1})},isOpen:I.status,isDelete:!0}),!Object(u.mb)()&&Object(r.createElement)(N.a,{isOpen:W,onRequestClose:function(){return z(!1)},closeOnClickOut:!1,modalContent:{demoLabel:Object(a.__)("Try Demo","wp-marketing-automations")}}),Object(r.createElement)(H,{floatingBarProps:It,resetSelection:Tt,onSuccess:function(){return Et(P,Ot,jt,x,Y)},screenType:x,screenTypeId:R,automationId:P}))}},865:function(t,e,n){"use strict";var r=n(0),a=n(141),o=n(2),i=n(5),c=n(58),u=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={workflow:{name:Object(o.__)("Workflow","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t):"admin.php?page=autonami-automations&edit=".concat(t)}};return e&&(n.analytics={name:Object(o.__)("Analytics","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/analytics"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/analytics"),isProFeature:!0,showOnClick:!0},n.contacts={name:Object(o.__)("Contacts","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(t,"/contacts"),isProFeature:!0,showOnClick:!0}),n.engagement={name:Object(o.__)("Engagements","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/engagements"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/engagements"),isProFeature:!0,showOnClick:!0},Object(i.xb)()&&(n.orders={name:Object(o.__)("Orders","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/orders"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/orders"),isProFeature:!0,showOnClick:!0}),n};e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,m=arguments.length>6&&void 0!==arguments[6]&&arguments[6],f=arguments.length>7&&void 0!==arguments[7]&&arguments[7],p=arguments.length>8&&void 0!==arguments[8]&&arguments[8],b=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},h=b.automation_nav,y=b.automationv2_nav,g=Object(a.a)(),d=g.setActiveMultiple,O=g.resetHeaderMenu,j=g.setL2NavType,w=g.setL2Nav,v=g.setBackLink,_=g.setL2Title,E=g.setL2Content,k=g.setBackLinkLabel,C=g.setL2NavAlign,P=g.setPageHeader;return Object(r.useEffect)((function(){O(),!i&&j("menu"),p||w(l?u(l,f):f?y:h),d({leftNav:f?"automations-v2":"automations-v1",rightNav:t}),n&&v(n),l&&v(n&&!f?"admin.php?page=autonami&path=/automations-v1":"admin.php?page=autonami&path=/automations"),i||f&&l&&k(Object(o.__)("All Automations","wp-marketing-automations-crm")),!f&&l&&k(Object(o.__)("All Automations","wp-marketing-automations")),l&&C("left"),e&&_(e),!n&&s&&E(s),P(f?"Automations":Object(r.createElement)(r.Fragment,null,"Automations",Object(r.createElement)(c.a,{label:"Legacy"}))),m&&w({})}),[t,f,p]),!0}},868:function(t,e,n){"use strict";var r=n(144),a=n(104);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=["getStateProp"];function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}e.a=function(){var t=Object(r.a)("automationList"),e=t.getStateProp,n=l(t,i),o=Object(r.a)(a.a.recipient).getStateProp,c=Object(r.a)(a.a.conversion).getStateProp,s=Object(r.a)(a.a.contacts).getStateProp,m=Object(r.a)(a.a.analytics).getStateProp;return u(u({},n),{},{getAutomations:function(){return e("automations")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getRecipientData:function(){return o("data")},getRecipientLoading:function(){return o("isLoading")},getRecipientOffset:function(){return o("offset")},getRecipientAutomationId:function(){return o("automationId")},getRecipientTotal:function(){return o("total")},getRecipientAutomation:function(){return o("automation")},getRecipientPage:function(){return parseInt(o("offset"))/parseInt(o("limit"))+1},getRecipientLimit:function(){return o("limit")},getConversionData:function(){return c("data")},getConversionLoading:function(){return c("isLoading")},getConversionOffset:function(){return c("offset")},getConversionAutomationId:function(){return c("automationId")},getConversionTotal:function(){return c("total")},getConversionAutomation:function(){return c("automation")},getConversionPage:function(){return parseInt(c("offset"))/parseInt(c("limit"))+1},getConversionLimit:function(){return c("limit")},getCountData:function(){return e("countData")},getContactData:function(){return s("data")},getContactLoading:function(){return s("isLoading")},getContactOffset:function(){return s("offset")},getContactAutomationId:function(){return s("automationId")},getContactTotal:function(){return s("total")},getContactAutomation:function(){return s("automation")},getContactPage:function(){return parseInt(s("offset"))/parseInt(s("limit"))+1},getContactLimit:function(){return s("limit")},getContactCountData:function(){return s("contactCount")},getAnalyticsData:function(){return m("analytics")},getAnalyticsTileData:function(){return m("tiles")},getAnalyticsTableData:function(){return m("tableData")},getAnalyticsLoading:function(){return m("isLoading")},getAnalyticsType:function(){return m("type")},getAnalyticsAutomationData:function(){return m("automation")}})}},881:function(t,e,n){"use strict";var r=n(143),a=n(5),o=n(104),i=n(16);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=["fetch","setStateProp"],s=["s","page","filter","path"];function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}e.a=function(){var t=Object(r.a)("automationList"),e=t.fetch,n=t.setStateProp,c=p(t,u),l=Object(r.a)(o.a.recipient),f=l.fetch,b=l.setStateProp,h=Object(r.a)(o.a.conversion),y=h.fetch,g=h.setStateProp,d=Object(r.a)(o.a.contacts),O=d.fetch,j=d.setStateProp,w=Object(r.a)(o.a.analytics),v=w.fetch,_=w.setStateProp;return m(m({},c),{},{fetch:function(t,r,o,i){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n("automation",{});var u=r.s,l=(r.page,r.filter,r.path,p(r,s)),m={offset:o,limit:i,status:t,search:u,filters:l,version:c?2:1};e("GET",Object(a.m)("/automations"),m)},setAutomationListValues:function(t,e){n(t,e)},fetchRecipient:function(t,e,n){f("GET",Object(a.m)("/automation/".concat(t,"/recipients?limit=").concat(e,"&offset=").concat(n)))},setRecipientsValues:function(t,e){b(t,e)},fetchConversion:function(t,e,n){g("automation",{}),y("GET",Object(a.m)("/automation/".concat(t,"/conversions?limit=").concat(e,"&offset=").concat(n)))},setConversionValues:function(t,e){g(t,e)},fetchContacts:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";j("automation",{}),O("GET",Object(a.m)("/automation/".concat(t,"/contacts?limit=").concat(e,"&offset=").concat(n,"&type=").concat(r,"&search=").concat(o)))},setContactValues:function(t,e){j(t,e)},fetchAnalytics:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=0;4===parseInt(c)&&(u=1),v("GET",Object(a.m)("/analytics/emails/chart/")+"?"+Object(i.stringify)({after:e,before:n,interval:r,oid:t,type:o,mode:c,contact:u}))},setAnalyticsValues:function(t,e){_(t,e)}})}}}]);