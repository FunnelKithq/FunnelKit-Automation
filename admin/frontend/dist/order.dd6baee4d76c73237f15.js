(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1152:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(2),r=a(3),s=a(6),l=a.n(s),i=a(68),o=a(799),m=a(804),b=a(5),u=a(248),d=a(149),p=a(93),f=a(141),O=a(8);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,c=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(n=(s=l.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){c=!0,r=e}finally{try{n||null==l.return||l.return()}finally{if(c)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var _=Object(i.a)(Object(b.X)()).formatAmount;t.default=function(){var e=Object(m.a)(),t=o.a.getContact(),a=o.a.getOrdersLimit(),s=o.a.getOrdersOffset(),i=o.a.getOrderContactId(),w=o.a.getOrderPage(),g=o.a.getSubscriptions(),E=o.a.getSubscriptionLoading(),v=o.a.getSubscriptionsLimit(),y=o.a.getSubscriptionsTotal(),h=o.a.getSubscriptionsOffset(),k=o.a.getSubscriptionPage();Object(n.useEffect)((function(){t&&"id"in t&&parseInt(t.id)!==parseInt(i)&&(e.fetchOrders(parseInt(t.id),s,a),t&&!Object(r.isEmpty)(t.wcs)&&e.fetchSubscription(parseInt(t.id),h,v))}),[t]);var N,A=o.a.getOrders(),S=o.a.getOrderLoading(),C=o.a.getOrdersTotal(),P=t&&t.wc&&t.wc.purchased_products?t.wc.purchased_products:[],I=t&&t.wc&&t.wc.purchased_products_cats?t.wc.purchased_products_cats:[],L=t&&t.wc&&t.wc.purchased_products_tags?t.wc.purchased_products_tags:[],D=t&&t.wc&&t.wc.used_coupons?t.wc.used_coupons:[],F=l()("bwfcrm-contacts-orders",{"has-search":!0}),M=[{key:"column_date",label:Object(c.__)("Date","wp-marketing-automations"),isLeftAligned:!0},{key:"column_order_id",label:Object(c.__)("Order ID","wp-marketing-automations"),isLeftAligned:!1},{key:"column_status",label:Object(c.__)("Status","wp-marketing-automations"),isLeftAligned:!1},{key:"column_products",label:Object(c.__)("Products","wp-marketing-automations"),isLeftAligned:!1},{key:"column_net_sale",label:Object(c.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1}],T=[{key:"date",label:Object(c.__)("Created On","wp-marketing-automations"),isLeftAligned:!0},{key:"sub_id",label:Object(c.__)("Subscription ID","wp-marketing-automations"),isLeftAligned:!1},{key:"renew_date",label:Object(c.__)("Next Renewal Date","wp-marketing-automations"),isLeftAligned:!1},{key:"status",label:Object(c.__)("Status","wp-marketing-automations"),isLeftAligned:!1},{key:"total_renewals",label:Object(c.__)("Total Renewal","wp-marketing-automations"),isLeftAligned:!1},{key:"total",label:Object(c.__)("Total","wp-marketing-automations"),isLeftAligned:!1}],R=function(e,t){var a,c,s,l=[{display:e.date?Object(b.M)(e.date):"-",value:""},{display:Object(n.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"post.php?post="+e.id+"&action=edit",rel:"noreferrer"},"#"+e.id),value:""}];return"subscription"==t&&l.push({display:e.next_renewal_date?Object(b.M)(e.next_renewal_date):"-",value:""}),l.push({display:e.status?e.status:"-",value:""}),"subscription"==t&&l.push({display:e.total_renewal?e.total_renewal:"0",value:""}),"order"==t&&l.push({display:(a=e.items?e.items:[],c="",s=[],Object.entries(a).map((function(e){var t=j(e,2),a=t[0],l=t[1];Object(r.isEmpty)(c)&&(c=Object(n.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"post.php?action=edit&post="+a,rel:"noreferrer"},l)),s.push(Object(n.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"post.php?action=edit&post="+a,rel:"noreferrer"},l))})),Object(n.createElement)(n.Fragment,null,!Object(r.isEmpty)(c)&&c,!Object(r.isEmpty)(s)&&s.length>1&&Object(n.createElement)(p.a,{items:s}))),value:""}),l.push({display:_(e.total?e.total:0),value:""}),l},x=Object(r.isArray)(A)?A.map((function(e){return R(e,"order")})):[],J=Object(r.isArray)(g)?g.map((function(e){return R(e,"subscription")})):[],q=function(n,c){var r=(c-1)*a;"order"==n?e.fetchOrders(parseInt(t.id),r,a):"subscription"==n&&e.fetchSubscription(parseInt(t.id),r,v)},H=function(e,t){return"per_page"!==t?function(){}:"order"==e?Q:"subscription"==e?U:void 0},Q=function(n){n!==a&&e.fetchOrders(parseInt(t.id),0,n)},U=function(a){a!==v&&e.fetchSubscription(parseInt(t.id),0,a)},V=function(){return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-s-list"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Total Spend","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},t&&t.wc&&t.wc.total_order_value?_(t.wc.total_order_value):0)),Object(n.createElement)("div",{className:"bwf-c-s-list"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("AOV","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},t&&function(){var e="";if(t.wc){var a,c=t.wc.aov_contact?parseFloat(t.wc.aov_contact):0,r=t.wc.aov_store?parseFloat(t.wc.aov_store):0;a=Number.isFinite(c)&&Number.isFinite(r)?0===r?0:Math.round((c-r)/r*100):null,e=c?a>0?Object(n.createElement)("div",null,_(c),Object(n.createElement)("span",{className:"bwf-c-s-hl bwf-c-s-hl-g"},a,"%")):Object(n.createElement)("div",null,_(c),Object(n.createElement)("span",{className:"bwf-c-s-hl bwf-c-s-hl-r"},a,"%")):"-"}return e}())),Object(n.createElement)("div",{className:"bwf-c-s-list"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Details","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},S?Object(n.createElement)(d.a,{caption:Object(c.__)("Orders","wp-marketing-automations"),className:F,headers:M}):Object(r.isEmpty)(x)?"-":Object(n.createElement)(u.a,{className:F,title:"",rows:x,headers:M,query:{paged:w},rowsPerPage:a,totalRows:C,isLoading:S,showMenu:!1,rowHeader:!0,onPageChange:function(e){return q("order",e)},onQueryChange:function(e){return H("order",e)},emptyMessage:Object(c.__)("No orders found","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf_clear_20"}))))};return Object(n.createElement)("div",{className:"bwf-c-s-data"},Object(n.createElement)(f.a,{items:(N=[{key:0,label:Object(c.__)("Products","wp-marketing-automations"),display:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-s-list bwf-c-s-list-items"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Items","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value bwf-c-s-inline-p"},Object(r.isEmpty)(P)?"-":P.map((function(e,t){return Object(n.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"post.php?post="+parseInt(e.id)+"&action=edit",key:t,rel:"noreferrer"},e.name)})))),Object(n.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-terms"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Categories","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},Object(r.isEmpty)(I)?"-":Object(n.createElement)(n.Fragment,null,Object(n.createElement)("ul",null,I.map((function(e,t){return Object(n.createElement)("li",{key:e.id},Object(n.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"term.php?taxonomy=product_cat&post_type=product&tag_ID="+e.id,key:t,rel:"noreferrer"},Object(n.createElement)("span",null,e.name)))})))))),Object(n.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-terms"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Tags","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},Object(r.isEmpty)(L)?"-":Object(n.createElement)(n.Fragment,null,Object(n.createElement)("ul",null,L.map((function(e,t){return Object(n.createElement)("li",{key:e.id},Object(n.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"term.php?taxonomy=product_tag&post_type=product&tag_ID="+e.id,key:t,rel:"noreferrer"},Object(n.createElement)("span",null,e.name)))})))))))},{key:1,label:Object(c.__)("Marketing","wp-marketing-automations"),display:Object(n.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-coupons"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Coupons","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},Object(r.isEmpty)(D)?"-":Object(n.createElement)(n.Fragment,null,Object(n.createElement)("ul",null,D.map((function(e,t){return Object(n.createElement)("li",{key:t},Object(n.createElement)("span",{className:"bwf-mr-5"},Object(n.createElement)(O.a,{icon:"coupon"})),Object(n.createElement)("span",null,e))}))))))},{key:2,label:Object(c.__)("Orders","wp-marketing-automations"),display:V()}],t&&!Object(r.isEmpty)(t.wcs)&&N.push({key:3,label:Object(c.__)("Subscription","wp-marketing-automations"),display:Object(n.createElement)("div",{className:"bwf-c-s-list"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Details","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},E?Object(n.createElement)(d.a,{caption:Object(c.__)("Subscription","wp-marketing-automations"),className:F,headers:T}):Object(r.isEmpty)(J)?"-":Object(n.createElement)(u.a,{className:F,title:"",rows:J,headers:T,query:{paged:k},rowsPerPage:v,totalRows:y,isLoading:E,showMenu:!1,rowHeader:!0,onPageChange:function(e,t){return q("subscription",e)},onQueryChange:function(e){return H("subscription",e)},emptyMessage:Object(c.__)("No subscriptions found","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf_clear_20"})))}),N)}))}},1158:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(141),r=a(2),s=a(68),l=a(5),i=a(92),o=a(248),m=a(3),b=a(93);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,c=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(n=(s=l.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){c=!0,r=e}finally{try{n||null==l.return||l.return()}finally{if(c)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=function(){var e=u(Object(n.useState)(!1),2),t=e[0],a=e[1],d=Object(s.a)(Object(l.X)()).formatAmount,p=[{key:"column_date",label:Object(r.__)("Date","wp-marketing-automations"),isLeftAligned:!0},{key:"column_order_id",label:Object(r.__)("Order ID","wp-marketing-automations"),isLeftAligned:!1},{key:"column_status",label:Object(r.__)("Status","wp-marketing-automations"),isLeftAligned:!1},{key:"column_products",label:Object(r.__)("Products","wp-marketing-automations"),isLeftAligned:!1},{key:"column_net_sale",label:Object(r.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1}],f=[{date:"2020-03-11 13:00:00",first_name:"John",id:1321,item_count:2,items:{235:"Product 1",347:"Product 2"},last_name:"Doe",status:"Completed",total:"24.51"},{date:"2020-03-16 06:54:00",first_name:"John",id:1322,item_count:2,items:{235:"Product 1"},last_name:"Doe",status:"Completed",total:"20"},{date:"2020-03-17 14:23:00",first_name:"John",id:1323,item_count:2,items:{347:"Product 2"},last_name:"Doe",status:"Completed",total:"30.02"},{date:"2020-03-20 09:45:00",first_name:"John",id:1324,item_count:2,items:{235:"Product 1",347:"Product 2"},last_name:"Doe",status:"Completed",total:"24.51"},{date:"2020-03-21 21:34:00",first_name:"John",id:1325,item_count:3,items:{235:"Product 1",347:"Product 2"},last_name:"Doe",status:"Completed",total:"34.51"}].map((function(e){var t,a,c;return[{display:Object(l.M)(e.date),value:e.date},{display:Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#"},"#"+e.id),value:e.id},{display:e.status,value:e.status},{display:(t=e.items,a="",c=[],Object.entries(t).map((function(e){var t=u(e,2),r=(t[0],t[1]);Object(m.isEmpty)(a)&&(a=Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#"},r)),c.push(Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#"},r))})),Object(n.createElement)(n.Fragment,null,!Object(m.isEmpty)(a)&&a,!Object(m.isEmpty)(c)&&c.length>1&&Object(n.createElement)(b.a,{items:c}))),value:""},{display:d(e.total),value:e.total}]}));return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-s-data"},Object(n.createElement)(c.a,{items:[{key:0,label:Object(r.__)("Products","wp-marketing-automations"),display:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-s-list bwf-c-s-list-items"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(r.__)("Items","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value bwf-c-s-inline-p"},Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},"Product 1"),Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},"Product 2"))),Object(n.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-terms"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(r.__)("Categories","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},Object(n.createElement)("ul",null,Object(n.createElement)("li",{key:0},Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},Object(n.createElement)("span",null,"Category 1"))),Object(n.createElement)("li",{key:2},Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},Object(n.createElement)("span",null,"Category 2")))))),Object(n.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-terms"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(r.__)("Tags","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},Object(n.createElement)("ul",null,Object(n.createElement)("li",{key:0},Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},Object(n.createElement)("span",null,"Tag 1"))),Object(n.createElement)("li",{key:2},Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},Object(n.createElement)("span",null,"Tag 2")))))))},{key:1,label:Object(r.__)("Marketing","wp-marketing-automations"),display:Object(n.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-coupons"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(r.__)("Coupons","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},Object(n.createElement)("ul",null,Object(n.createElement)("li",null,Object(n.createElement)("span",{className:"dashicons dashicons-tag"}),Object(n.createElement)("span",null,"Coupon 1")),Object(n.createElement)("li",null,Object(n.createElement)("span",{className:"dashicons dashicons-tag"}),Object(n.createElement)("span",null,"Coupon 2")))))},{key:2,label:Object(r.__)("Orders","wp-marketing-automations"),display:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-s-list"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(r.__)("Total Spend","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},d(135))),Object(n.createElement)("div",{className:"bwf-c-s-list"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(r.__)("AOV","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},Object(n.createElement)("div",null,d(89),Object(n.createElement)("span",{className:"bwf-c-s-hl bwf-c-s-hl-g"},56,"%")))),Object(n.createElement)("div",{className:"bwf-c-s-list"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(r.__)("Details","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},Object(n.createElement)(o.a,{className:"bwfcrm-contacts-orders",title:"",rows:f,headers:p,query:{paged:1},rowsPerPage:10,totalRows:5,isLoading:!1,showMenu:!1,rowHeader:!0}),Object(n.createElement)("div",{className:"bwf_clear_20"}))))}]})),Object(n.createElement)(i.a,{isOpen:t,onRequestClose:function(){return a(!1)}}))}}}]);